"use strict";(self.webpackChunkfirebaseApp=self.webpackChunkfirebaseApp||[]).push([[179],{2011:(It,Se,B)=>{B.d(Se,{Dh:()=>me,GT:()=>ae,cc:()=>Te,hO:()=>je,on:()=>K,pX:()=>oe,xv:()=>ve});var f=B(4650),G=B(9260),O=B(4976);It=B.hmd(It);const ne=["ngOnDestroy"],oe=(Ae,ke,Be,De={})=>new Proxy(Ae,{get:(Ce,Me)=>Be.runOutsideAngular(()=>{var $e;if(Ae[Me])return!(null===($e=De?.spy)||void 0===$e)&&$e.get&&De.spy.get(Me,Ae[Me]),Ae[Me];if(ne.indexOf(Me)>-1)return()=>{};const Oe=ke.toPromise().then(se=>{const tt=se&&se[Me];return"function"==typeof tt?tt.bind(se):tt&&tt.then?tt.then(St=>Be.run(()=>St)):Be.run(()=>tt)});return new Proxy(()=>{},{get:(se,tt)=>Oe[tt],apply:(se,tt,St)=>Oe.then(it=>{var Wt;const dt=it&&it(...St);return!(null===(Wt=De?.spy)||void 0===Wt)&&Wt.apply&&De.spy.apply(Me,St,dt),dt})})})}),ae=(Ae,ke)=>{ke.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(De=>{Object.defineProperty(Ae.prototype,De,Object.getOwnPropertyDescriptor(Be.prototype||Be,De))})})};class we{constructor(ke){return ke}}const me=new f.OlP("angularfire2.app.options"),ve=new f.OlP("angularfire2.app.name");function K(Ae,ke,Be){const Ce="object"==typeof Be&&Be||{};Ce.name=Ce.name||"string"==typeof Be&&Be||"[DEFAULT]";const $e=G.Z.apps.filter(Oe=>Oe&&Oe.name===Ce.name)[0]||ke.runOutsideAngular(()=>G.Z.initializeApp(Ae,Ce));try{JSON.stringify(Ae)!==JSON.stringify($e.options)&&q("error",`${$e.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we($e)}const q=(Ae,...ke)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Ae](...ke)},te={provide:we,useFactory:K,deps:[me,f.R0b,[new f.FiY,ve]]};let je=(()=>{class Ae{constructor(Be){G.Z.registerVersion("angularfire",O.q4.full,"core"),G.Z.registerVersion("angularfire",O.q4.full,"app-compat"),G.Z.registerVersion("angular",f.q4F.full,Be.toString())}static initializeApp(Be,De){return{ngModule:Ae,providers:[{provide:me,useValue:Be},{provide:ve,useValue:De}]}}}return Ae.\u0275fac=function(Be){return new(Be||Ae)(f.LFG(f.Lbi))},Ae.\u0275mod=f.oAB({type:Ae}),Ae.\u0275inj=f.cJS({providers:[te]}),Ae})();function Te(Ae,ke,Be,De,Ce){const[,Me,$e]=globalThis.\u0275AngularfireInstanceCache.find(Oe=>Oe[0]===Ae)||[];if(Me)return function Ke(Ae,ke){try{return Ae.toString()===ke.toString()}catch{return Ae===ke}}(Ce,$e)||(_e("error",`${ke} was already initialized on the ${Be} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Ce,was:$e})),Me;{const Oe=De();return globalThis.\u0275AngularfireInstanceCache.push([Ae,Oe,Ce]),Oe}}const at=!!It.hot,_e=(Ae,...ke)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Ae](...ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(It,Se,B)=>{B.d(Se,{q4:()=>pr,iC:()=>Ac,fc:()=>Sc,HU:()=>Xs,vb:()=>Kd,JM:()=>ca,u3:()=>Yd});var f=B(4650),G=B(259),O=B(5861),ne=B(6881),oe=B(2090),ae=B(4859),we=B(1877);const me=(E,b)=>b.some(R=>E instanceof R);let ve,K;const je=new WeakMap,Te=new WeakMap,Ke=new WeakMap,at=new WeakMap,_e=new WeakMap;let Be={get(E,b,R){if(E instanceof IDBTransaction){if("done"===b)return Te.get(E);if("objectStoreNames"===b)return E.objectStoreNames||Ke.get(E);if("store"===b)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return $e(E[b])},set:(E,b,R)=>(E[b]=R,!0),has:(E,b)=>E instanceof IDBTransaction&&("done"===b||"store"===b)||b in E};function Me(E){return"function"==typeof E?function Ce(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...b){return E.apply(Oe(this),b),$e(je.get(this))}:function(...b){return $e(E.apply(Oe(this),b))}:function(b,...R){const V=E.call(Oe(this),b,...R);return Ke.set(V,b.sort?b.sort():[b]),$e(V)}}(E):(E instanceof IDBTransaction&&function ke(E){if(Te.has(E))return;const b=new Promise((R,V)=>{const Z=()=>{E.removeEventListener("complete",J),E.removeEventListener("error",de),E.removeEventListener("abort",de)},J=()=>{R(),Z()},de=()=>{V(E.error||new DOMException("AbortError","AbortError")),Z()};E.addEventListener("complete",J),E.addEventListener("error",de),E.addEventListener("abort",de)});Te.set(E,b)}(E),me(E,function q(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Be):E)}function $e(E){if(E instanceof IDBRequest)return function Ae(E){const b=new Promise((R,V)=>{const Z=()=>{E.removeEventListener("success",J),E.removeEventListener("error",de)},J=()=>{R($e(E.result)),Z()},de=()=>{V(E.error),Z()};E.addEventListener("success",J),E.addEventListener("error",de)});return b.then(R=>{R instanceof IDBCursor&&je.set(R,E)}).catch(()=>{}),_e.set(b,E),b}(E);if(at.has(E))return at.get(E);const b=Me(E);return b!==E&&(at.set(E,b),_e.set(b,E)),b}const Oe=E=>_e.get(E),St=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],Wt=new Map;function dt(E,b){if(!(E instanceof IDBDatabase)||b in E||"string"!=typeof b)return;if(Wt.get(b))return Wt.get(b);const R=b.replace(/FromIndex$/,""),V=b!==R,Z=it.includes(R);if(!(R in(V?IDBIndex:IDBObjectStore).prototype)||!Z&&!St.includes(R))return;const J=function(){var de=(0,O.Z)(function*(Ze,...Ge){const ft=this.transaction(Ze,Z?"readwrite":"readonly");let Ot=ft.store;return V&&(Ot=Ot.index(Ge.shift())),(yield Promise.all([Ot[R](...Ge),Z&&ft.done]))[0]});return function(Ge){return de.apply(this,arguments)}}();return Wt.set(b,J),J}!function De(E){Be=E(Be)}(E=>({...E,get:(b,R,V)=>dt(b,R)||E.get(b,R,V),has:(b,R)=>!!dt(b,R)||E.has(b,R)}));const Os="@firebase/installations",he="0.6.4",ye=1e4,be=`w:${he}`,Re="FIS_v2",ze="https://firebaseinstallations.googleapis.com/v1",Ue=36e5,ut=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vt(E){return E instanceof oe.ZR&&E.code.includes("request-failed")}function tn({projectId:E}){return`${ze}/projects/${E}/installations`}function hn(E){return{token:E.token,requestStatus:2,expiresIn:ki(E.expiresIn),creationTime:Date.now()}}function In(E,b){return $r.apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(E,b){const V=(yield b.json()).error;return ut.create("request-failed",{requestName:E,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Gn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function zn(E){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(E){const b=yield E();return b.status>=500&&b.status<600?E():b})).apply(this,arguments)}function ki(E){return Number(E.replace("s","000"))}function gt(){return(gt=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:b},{fid:R}){const V=tn(E),Z=Gn(E),J=b.getImmediate({optional:!0});if(J){const ft=yield J.getHeartbeatsHeader();ft&&Z.append("x-firebase-client",ft)}const Ze={method:"POST",headers:Z,body:JSON.stringify({fid:R,authVersion:Re,appId:E.appId,sdkVersion:be})},Ge=yield zn(()=>fetch(V,Ze));if(Ge.ok){const ft=yield Ge.json();return{fid:ft.fid||R,registrationStatus:2,refreshToken:ft.refreshToken,authToken:hn(ft.authToken)}}throw yield In("Create Installation",Ge)})).apply(this,arguments)}function Un(E){return new Promise(b=>{setTimeout(b,E)})}const Wn=/^[cdef][\w-]{21}$/,Hr="";function Yr(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const R=function an(E){return function os(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Wn.test(R)?R:Hr}catch{return Hr}}function qt(E){return`${E.appName}!${E.appId}`}const ht=new Map;function Ut(E,b){const R=qt(E);Pn(R,b),function Qr(E,b){const R=function lr(){return!Vn&&"BroadcastChannel"in self&&(Vn=new BroadcastChannel("[Firebase] FID Change"),Vn.onmessage=E=>{Pn(E.data.key,E.data.fid)}),Vn}();R&&R.postMessage({key:E,fid:b}),function Kt(){0===ht.size&&Vn&&(Vn.close(),Vn=null)}()}(R,b)}function Pn(E,b){const R=ht.get(E);if(R)for(const V of R)V(b)}let Vn=null;const Di="firebase-installations-database",Jt=1,hi="firebase-installations-store";let Bt=null;function Kn(){return Bt||(Bt=function se(E,b,{blocked:R,upgrade:V,blocking:Z,terminated:J}={}){const de=indexedDB.open(E,b),Ze=$e(de);return V&&de.addEventListener("upgradeneeded",Ge=>{V($e(de.result),Ge.oldVersion,Ge.newVersion,$e(de.transaction))}),R&&de.addEventListener("blocked",()=>R()),Ze.then(Ge=>{J&&Ge.addEventListener("close",()=>J()),Z&&Ge.addEventListener("versionchange",()=>Z())}).catch(()=>{}),Ze}(Di,Jt,{upgrade:(E,b)=>{0===b&&E.createObjectStore(hi)}})),Bt}function kn(E,b){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,O.Z)(function*(E,b){const R=qt(E),Z=(yield Kn()).transaction(hi,"readwrite"),J=Z.objectStore(hi),de=yield J.get(R);return yield J.put(b,R),yield Z.done,(!de||de.fid!==b.fid)&&Ut(E,b.fid),b})).apply(this,arguments)}function Zn(E){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,O.Z)(function*(E){const b=qt(E),V=(yield Kn()).transaction(hi,"readwrite");yield V.objectStore(hi).delete(b),yield V.done})).apply(this,arguments)}function Gr(E,b){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,O.Z)(function*(E,b){const R=qt(E),Z=(yield Kn()).transaction(hi,"readwrite"),J=Z.objectStore(hi),de=yield J.get(R),Ze=b(de);return void 0===Ze?yield J.delete(R):yield J.put(Ze,R),yield Z.done,Ze&&(!de||de.fid!==Ze.fid)&&Ut(E,Ze.fid),Ze})).apply(this,arguments)}function z(E){return H.apply(this,arguments)}function H(){return H=(0,O.Z)(function*(E){let b;const R=yield Gr(E.appConfig,V=>{const Z=function F(E){return Tt(E||{fid:Yr(),registrationStatus:0})}(V),J=function L(E,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(ut.create("app-offline"))};const R={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},V=function N(E,b){return Y.apply(this,arguments)}(E,R);return{installationEntry:R,registrationPromise:V}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Ee(E)}:{installationEntry:b}}(E,Z);return b=J.registrationPromise,J.installationEntry});return R.fid===Hr?{installationEntry:yield b}:{installationEntry:R,registrationPromise:b}}),H.apply(this,arguments)}function Y(){return Y=(0,O.Z)(function*(E,b){try{const R=yield function Ln(E,b){return gt.apply(this,arguments)}(E,b);return kn(E.appConfig,R)}catch(R){throw vt(R)&&409===R.customData.serverCode?yield Zn(E.appConfig):yield kn(E.appConfig,{fid:b.fid,registrationStatus:0}),R}}),Y.apply(this,arguments)}function Ee(E){return nt.apply(this,arguments)}function nt(){return(nt=(0,O.Z)(function*(E){let b=yield Rt(E.appConfig);for(;1===b.registrationStatus;)yield Un(100),b=yield Rt(E.appConfig);if(0===b.registrationStatus){const{installationEntry:R,registrationPromise:V}=yield z(E);return V||R}return b})).apply(this,arguments)}function Rt(E){return Gr(E,b=>{if(!b)throw ut.create("installation-not-found");return Tt(b)})}function Tt(E){return function Zt(E){return 1===E.registrationStatus&&E.registrationTime+ye<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Cn(){return(Cn=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:b},R){const V=function jt(E,{fid:b}){return`${tn(E)}/${b}/authTokens:generate`}(E,R),Z=function xr(E,{refreshToken:b}){const R=Gn(E);return R.append("Authorization",function co(E){return`${Re} ${E}`}(b)),R}(E,R),J=b.getImmediate({optional:!0});if(J){const ft=yield J.getHeartbeatsHeader();ft&&Z.append("x-firebase-client",ft)}const Ze={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:be,appId:E.appId}})},Ge=yield zn(()=>fetch(V,Ze));if(Ge.ok)return hn(yield Ge.json());throw yield In("Generate Auth Token",Ge)})).apply(this,arguments)}function yr(E){return vs.apply(this,arguments)}function vs(){return vs=(0,O.Z)(function*(E,b=!1){let R;const V=yield Gr(E.appConfig,J=>{if(!en(J))throw ut.create("not-registered");const de=J.authToken;if(!b&&function wt(E){return 2===E.requestStatus&&!function pn(E){const b=Date.now();return b<E.creationTime||E.creationTime+E.expiresIn<b+Ue}(E)}(de))return J;if(1===de.requestStatus)return R=function pe(E,b){return re.apply(this,arguments)}(E,b),J;{if(!navigator.onLine)throw ut.create("app-offline");const Ze=function sn(E){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:b})}(J);return R=function yt(E,b){return xt.apply(this,arguments)}(E,Ze),Ze}});return R?yield R:V.authToken}),vs.apply(this,arguments)}function re(){return(re=(0,O.Z)(function*(E,b){let R=yield Fe(E.appConfig);for(;1===R.authToken.requestStatus;)yield Un(100),R=yield Fe(E.appConfig);const V=R.authToken;return 0===V.requestStatus?yr(E,b):V})).apply(this,arguments)}function Fe(E){return Gr(E,b=>{if(!en(b))throw ut.create("not-registered");return function zr(E){return 1===E.requestStatus&&E.requestTime+ye<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function xt(){return xt=(0,O.Z)(function*(E,b){try{const R=yield function Pt(E,b){return Cn.apply(this,arguments)}(E,b),V=Object.assign(Object.assign({},b),{authToken:R});return yield kn(E.appConfig,V),R}catch(R){if(!vt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const V=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield kn(E.appConfig,V)}else yield Zn(E.appConfig);throw R}}),xt.apply(this,arguments)}function en(E){return void 0!==E&&2===E.registrationStatus}function ju(){return(ju=(0,O.Z)(function*(E){const b=E,{installationEntry:R,registrationPromise:V}=yield z(b);return V?V.catch(console.error):yr(b).catch(console.error),R.fid})).apply(this,arguments)}function Fs(){return Fs=(0,O.Z)(function*(E,b=!1){const R=E;return yield function wr(E){return et.apply(this,arguments)}(R),(yield yr(R,b)).token}),Fs.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(E){const{registrationPromise:b}=yield z(E);b&&(yield b)})).apply(this,arguments)}function zo(E){return ut.create("missing-app-config-values",{valueName:E})}const Ht="installations",Oi=E=>{const b=E.getProvider("app").getImmediate(),R=function Va(E){if(!E||!E.options)throw zo("App Configuration");if(!E.name)throw zo("App Name");const b=["projectId","apiKey","appId"];for(const R of b)if(!E.options[R])throw zo(R);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(b);return{app:b,appConfig:R,heartbeatServiceProvider:(0,ne._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ba=E=>{const b=E.getProvider("app").getImmediate(),R=(0,ne._getProvider)(b,Ht).getImmediate();return{getId:()=>function vr(E){return ju.apply(this,arguments)}(R),getToken:Z=>function Df(E){return Fs.apply(this,arguments)}(R,Z)}};(function Us(){(0,ne._registerComponent)(new ae.wA(Ht,Oi,"PUBLIC")),(0,ne._registerComponent)(new ae.wA("installations-internal",Ba,"PRIVATE"))})(),(0,ne.registerVersion)(Os,he),(0,ne.registerVersion)(Os,he,"esm2017");const cr="@firebase/remote-config",Wr=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ug{constructor(b,R,V,Z){this.client=b,this.storage=R,this.storageCache=V,this.logger=Z}isCachedDataFresh(b,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-R,Z=V<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Z}.`),Z}fetch(b){var R=this;return(0,O.Z)(function*(){const[V,Z]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Z&&R.isCachedDataFresh(b.cacheMaxAgeMillis,V))return Z;b.eTag=Z&&Z.eTag;const J=yield R.client.fetch(b),de=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&de.push(R.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(de),J})()}}function ld(E=navigator){return E.languages&&E.languages[0]||E.language}class bf{constructor(b,R,V,Z,J,de){this.firebaseInstallations=b,this.sdkVersion=R,this.namespace=V,this.projectId=Z,this.apiKey=J,this.appId=de}fetch(b){var R=this;return(0,O.Z)(function*(){const[V,Z]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Ge={sdk_version:R.sdkVersion,app_instance_id:V,app_instance_id_token:Z,app_id:R.appId,language_code:ld()},ft={method:"POST",headers:Ze,body:JSON.stringify(Ge)},Ot=fetch(de,ft),Nt=new Promise((Ai,Kr)=>{b.signal.addEventListener(()=>{const pl=new Error("The operation was aborted.");pl.name="AbortError",Kr(pl)})});let jn;try{yield Promise.race([Ot,Nt]),jn=yield Ot}catch(Ai){let Kr="fetch-client-network";throw"AbortError"===Ai?.name&&(Kr="fetch-timeout"),Wr.create(Kr,{originalErrorMessage:Ai?.message})}let bt=jn.status;const es=jn.headers.get("ETag")||void 0;let xc,$i;if(200===jn.status){let Ai;try{Ai=yield jn.json()}catch(Kr){throw Wr.create("fetch-client-parse",{originalErrorMessage:Kr?.message})}xc=Ai.entries,$i=Ai.state}if("INSTANCE_STATE_UNSPECIFIED"===$i?bt=500:"NO_CHANGE"===$i?bt=304:("NO_TEMPLATE"===$i||"EMPTY_CONFIG"===$i)&&(xc={}),304!==bt&&200!==bt)throw Wr.create("fetch-status",{httpStatus:bt});return{status:bt,eTag:es,config:xc}})()}}class dd{constructor(b,R){this.client=b,this.storage=R}fetch(b){var R=this;return(0,O.Z)(function*(){const V=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(b,V)})()}attemptFetch(b,{throttleEndTimeMillis:R,backoffCount:V}){var Z=this;return(0,O.Z)(function*(){yield function cd(E,b){return new Promise((R,V)=>{const Z=Math.max(b-Date.now(),0),J=setTimeout(R,Z);E.addEventListener(()=>{clearTimeout(J),V(Wr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,R);try{const J=yield Z.client.fetch(b);return yield Z.storage.deleteThrottleMetadata(),J}catch(J){if(!function Vg(E){if(!(E instanceof oe.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(J))throw J;const de={throttleEndTimeMillis:Date.now()+(0,oe.$s)(V),backoffCount:V+1};return yield Z.storage.setThrottleMetadata(de),Z.attemptFetch(b,de)}})()}}class Tf{constructor(b,R,V,Z,J){this.app=b,this._client=R,this._storageCache=V,this._storage=Z,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function js(E,b){const R=E.target.error||void 0;return Wr.create(b,{originalErrorMessage:R&&R?.message})}const qo="app_namespace_store";class pd{constructor(b,R,V,Z=function Af(){return new Promise((E,b)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=V=>{b(js(V,"storage-open"))},R.onsuccess=V=>{E(V.target.result)},R.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(qo,{keyPath:"compositeKey"})}}catch(R){b(Wr.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=b,this.appName=R,this.namespace=V,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Z,J)=>{const Ze=V.transaction([qo],"readonly").objectStore(qo),Ge=R.createCompositeKey(b);try{const ft=Ze.get(Ge);ft.onerror=Ot=>{J(js(Ot,"storage-get"))},ft.onsuccess=Ot=>{const Nt=Ot.target.result;Z(Nt?Nt.value:void 0)}}catch(ft){J(Wr.create("storage-get",{originalErrorMessage:ft?.message}))}})})()}set(b,R){var V=this;return(0,O.Z)(function*(){const Z=yield V.openDbPromise;return new Promise((J,de)=>{const Ge=Z.transaction([qo],"readwrite").objectStore(qo),ft=V.createCompositeKey(b);try{const Ot=Ge.put({compositeKey:ft,value:R});Ot.onerror=Nt=>{de(js(Nt,"storage-set"))},Ot.onsuccess=()=>{J()}}catch(Ot){de(Wr.create("storage-set",{originalErrorMessage:Ot?.message}))}})})()}delete(b){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Z,J)=>{const Ze=V.transaction([qo],"readwrite").objectStore(qo),Ge=R.createCompositeKey(b);try{const ft=Ze.delete(Ge);ft.onerror=Ot=>{J(js(Ot,"storage-delete"))},ft.onsuccess=()=>{Z()}}catch(ft){J(Wr.create("storage-delete",{originalErrorMessage:ft?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class _o{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const R=b.storage.getLastFetchStatus(),V=b.storage.getLastSuccessfulFetchTimestampMillis(),Z=b.storage.getActiveConfig(),J=yield R;J&&(b.lastFetchStatus=J);const de=yield V;de&&(b.lastSuccessfulFetchTimestampMillis=de);const Ze=yield Z;Ze&&(b.activeConfig=Ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function md(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ga(){(0,ne._registerComponent)(new ae.wA("remote-config",function E(b,{instanceIdentifier:R}){const V=b.getProvider("app").getImmediate(),Z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Wr.create("registration-window");if(!(0,oe.hl)())throw Wr.create("indexed-db-unavailable");const{projectId:J,apiKey:de,appId:Ze}=V.options;if(!J)throw Wr.create("registration-project-id");if(!de)throw Wr.create("registration-api-key");if(!Ze)throw Wr.create("registration-app-id");const Ge=new pd(Ze,V.name,R=R||"firebase"),ft=new _o(Ge),Ot=new we.Yd(cr);Ot.logLevel=we.in.ERROR;const Nt=new bf(Z,ne.SDK_VERSION,R,J,de,Ze),jn=new dd(Nt,Ge),bt=new Ug(jn,Ge,ft,Ot),es=new Tf(V,bt,ft,Ge,Ot);return function ei(E){const b=(0,oe.m9)(E);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(es),es},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(cr,"0.4.4"),(0,ne.registerVersion)(cr,"0.4.4","esm2017")}();const Rf=(E,b)=>b.some(R=>E instanceof R);let $s,Kl;const Zo=new WeakMap,yo=new WeakMap,On=new WeakMap,za=new WeakMap,Wu=new WeakMap;let wo={get(E,b,R){if(E instanceof IDBTransaction){if("done"===b)return yo.get(E);if("objectStoreNames"===b)return E.objectStoreNames||On.get(E);if("store"===b)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return ti(E[b])},set:(E,b,R)=>(E[b]=R,!0),has:(E,b)=>E instanceof IDBTransaction&&("done"===b||"store"===b)||b in E};function qu(E){return"function"==typeof E?function xf(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _d(){return Kl||(Kl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...b){return E.apply(Ir(this),b),ti(Zo.get(this))}:function(...b){return ti(E.apply(Ir(this),b))}:function(b,...R){const V=E.call(Ir(this),b,...R);return On.set(V,b.sort?b.sort():[b]),ti(V)}}(E):(E instanceof IDBTransaction&&function vo(E){if(yo.has(E))return;const b=new Promise((R,V)=>{const Z=()=>{E.removeEventListener("complete",J),E.removeEventListener("error",de),E.removeEventListener("abort",de)},J=()=>{R(),Z()},de=()=>{V(E.error||new DOMException("AbortError","AbortError")),Z()};E.addEventListener("complete",J),E.addEventListener("error",de),E.addEventListener("abort",de)});yo.set(E,b)}(E),Rf(E,function zu(){return $s||($s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,wo):E)}function ti(E){if(E instanceof IDBRequest)return function dr(E){const b=new Promise((R,V)=>{const Z=()=>{E.removeEventListener("success",J),E.removeEventListener("error",de)},J=()=>{R(ti(E.result)),Z()},de=()=>{V(E.error),Z()};E.addEventListener("success",J),E.addEventListener("error",de)});return b.then(R=>{R instanceof IDBCursor&&Zo.set(R,E)}).catch(()=>{}),Wu.set(b,E),b}(E);if(za.has(E))return za.get(E);const b=qu(E);return b!==E&&(za.set(E,b),Wu.set(b,E)),b}const Ir=E=>Wu.get(E);function Wa(E,b,{blocked:R,upgrade:V,blocking:Z,terminated:J}={}){const de=indexedDB.open(E,b),Ze=ti(de);return V&&de.addEventListener("upgradeneeded",Ge=>{V(ti(de.result),Ge.oldVersion,Ge.newVersion,ti(de.transaction))}),R&&de.addEventListener("blocked",()=>R()),Ze.then(Ge=>{J&&Ge.addEventListener("close",()=>J()),Z&&Ge.addEventListener("versionchange",()=>Z())}).catch(()=>{}),Ze}function Hs(E,{blocked:b}={}){const R=indexedDB.deleteDatabase(E);return b&&R.addEventListener("blocked",()=>b()),ti(R).then(()=>{})}const yd=["get","getKey","getAll","getAllKeys","count"],Es=["put","add","delete","clear"],qa=new Map;function Yo(E,b){if(!(E instanceof IDBDatabase)||b in E||"string"!=typeof b)return;if(qa.get(b))return qa.get(b);const R=b.replace(/FromIndex$/,""),V=b!==R,Z=Es.includes(R);if(!(R in(V?IDBIndex:IDBObjectStore).prototype)||!Z&&!yd.includes(R))return;const J=function(){var de=(0,O.Z)(function*(Ze,...Ge){const ft=this.transaction(Ze,Z?"readwrite":"readonly");let Ot=ft.store;return V&&(Ot=Ot.index(Ge.shift())),(yield Promise.all([Ot[R](...Ge),Z&&ft.done]))[0]});return function(Ge){return de.apply(this,arguments)}}();return qa.set(b,J),J}!function kr(E){wo=E(wo)}(E=>({...E,get:(b,R,V)=>Yo(b,R)||E.get(b,R,V),has:(b,R)=>!!Yo(b,R)||E.has(b,R)}));const Lt="/firebase-messaging-sw.js",Ku="/firebase-cloud-messaging-push-scope",Mf="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zl="https://fcmregistrations.googleapis.com/v1",Yl="google.c.a.c_id",Ql="google.c.a.c_l",vd="google.c.a.ts",wd="google.c.a.e";var ge=(()=>{return(E=ge||(ge={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ge;var E})();function Vt(E){const b=new Uint8Array(E);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xl(E){const R=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(R),Z=new Uint8Array(V.length);for(let J=0;J<V.length;++J)Z[J]=V.charCodeAt(J);return Z}const Ka="fcm_token_details_db",Yn=5,Ed="fcm_token_object_Store";function Li(){return Li=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(Ka))return null;let b=null;return(yield Wa(Ka,Yn,{upgrade:(V=(0,O.Z)(function*(Z,J,de,Ze){var Ge;if(J<2||!Z.objectStoreNames.contains(Ed))return;const ft=Ze.objectStore(Ed),Ot=yield ft.index("fcmSenderId").get(E);if(yield ft.clear(),Ot)if(2===J){const Nt=Ot;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;b={token:Nt.fcmToken,createTime:null!==(Ge=Nt.createTime)&&void 0!==Ge?Ge:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:Vt(Nt.vapidKey)}}}else if(3===J){const Nt=Ot;b={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Vt(Nt.auth),p256dh:Vt(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Vt(Nt.vapidKey)}}}else if(4===J){const Nt=Ot;b={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:Vt(Nt.auth),p256dh:Vt(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:Vt(Nt.vapidKey)}}}}),function(J,de,Ze,Ge){return V.apply(this,arguments)})})).close(),yield Hs(Ka),yield Hs("fcm_vapid_details_db"),yield Hs("undefined"),function Zu(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:b}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var V}),Li.apply(this,arguments)}const Id="firebase-messaging-database",Cd=1,Gs="firebase-messaging-store";let Xo=null;function Or(){return Xo||(Xo=Wa(Id,Cd,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Gs)}})),Xo}function pi(E){return zs.apply(this,arguments)}function zs(){return zs=(0,O.Z)(function*(E){const b=bd(E),V=yield(yield Or()).transaction(Gs).objectStore(Gs).get(b);if(V)return V;{const Z=yield function Qo(E){return Li.apply(this,arguments)}(E.appConfig.senderId);if(Z)return yield Is(E,Z),Z}}),zs.apply(this,arguments)}function Is(E,b){return ls.apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(E,b){const R=bd(E),Z=(yield Or()).transaction(Gs,"readwrite");return yield Z.objectStore(Gs).put(b,R),yield Z.done,b})).apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(E){const b=bd(E),V=(yield Or()).transaction(Gs,"readwrite");yield V.objectStore(Gs).delete(b),yield V.done})).apply(this,arguments)}function bd({appConfig:E}){return E.appId}const Qn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Yu(E,b){return Za.apply(this,arguments)}function Za(){return(Za=(0,O.Z)(function*(E,b){const R=yield Ya(E),V=Xu(b),Z={method:"POST",headers:R,body:JSON.stringify(V)};let J;try{J=yield(yield fetch(Jl(E.appConfig),Z)).json()}catch(de){throw Qn.create("token-subscribe-failed",{errorInfo:de?.toString()})}if(J.error)throw Qn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Qn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function Qu(){return(Qu=(0,O.Z)(function*(E,b){const R=yield Ya(E),V=Xu(b.subscriptionOptions),Z={method:"PATCH",headers:R,body:JSON.stringify(V)};let J;try{J=yield(yield fetch(`${Jl(E.appConfig)}/${b.token}`,Z)).json()}catch(de){throw Qn.create("token-update-failed",{errorInfo:de?.toString()})}if(J.error)throw Qn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Qn.create("token-update-no-token");return J.token})).apply(this,arguments)}function Sd(E,b){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(E,b){const V={method:"DELETE",headers:yield Ya(E)};try{const J=yield(yield fetch(`${Jl(E.appConfig)}/${b}`,V)).json();if(J.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(Z){throw Qn.create("token-unsubscribe-failed",{errorInfo:Z?.toString()})}})).apply(this,arguments)}function Jl({projectId:E}){return`${Zl}/projects/${E}/registrations`}function Ya(E){return ec.apply(this,arguments)}function ec(){return(ec=(0,O.Z)(function*({appConfig:E,installations:b}){const R=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Xu({p256dh:E,auth:b,endpoint:R,vapidKey:V}){const Z={web:{endpoint:R,auth:b,p256dh:E}};return V!==Mf&&(Z.web.applicationPubKey=V),Z}const Ad=6048e5;function Rd(){return Rd=(0,O.Z)(function*(E){const b=yield function $g(E,b){return Md.apply(this,arguments)}(E.swRegistration,E.vapidKey),R={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:b.endpoint,auth:Vt(b.getKey("auth")),p256dh:Vt(b.getKey("p256dh"))},V=yield pi(E.firebaseDependencies);if(V){if(function Hg(E,b){return b.vapidKey===E.vapidKey&&b.endpoint===E.endpoint&&b.auth===E.auth&&b.p256dh===E.p256dh}(V.subscriptionOptions,R))return Date.now()>=V.createTime+Ad?function Rn(E,b){return xd.apply(this,arguments)}(E,{token:V.token,createTime:Date.now(),subscriptionOptions:R}):V.token;try{yield Sd(E.firebaseDependencies,V.token)}catch(Z){console.warn(Z)}return ea(E.firebaseDependencies,R)}return ea(E.firebaseDependencies,R)}),Rd.apply(this,arguments)}function cs(){return cs=(0,O.Z)(function*(E){const b=yield pi(E.firebaseDependencies);b&&(yield Sd(E.firebaseDependencies,b.token),yield function Dd(E){return Eo.apply(this,arguments)}(E.firebaseDependencies));const R=yield E.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),cs.apply(this,arguments)}function xd(){return xd=(0,O.Z)(function*(E,b){try{const R=yield function Td(E,b){return Qu.apply(this,arguments)}(E.firebaseDependencies,b),V=Object.assign(Object.assign({},b),{token:R,createTime:Date.now()});return yield Is(E.firebaseDependencies,V),R}catch(R){throw yield function qr(E){return cs.apply(this,arguments)}(E),R}}),xd.apply(this,arguments)}function ea(E,b){return nc.apply(this,arguments)}function nc(){return(nc=(0,O.Z)(function*(E,b){const V={token:yield Yu(E,b),createTime:Date.now(),subscriptionOptions:b};return yield Is(E,V),V.token})).apply(this,arguments)}function Md(){return(Md=(0,O.Z)(function*(E,b){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xl(b)})})).apply(this,arguments)}function Ju(E){const b={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function rc(E,b){if(!b.notification)return;E.notification={};const R=b.notification.title;R&&(E.notification.title=R);const V=b.notification.body;V&&(E.notification.body=V);const Z=b.notification.image;Z&&(E.notification.image=Z);const J=b.notification.icon;J&&(E.notification.icon=J)}(b,E),function Nd(E,b){b.data&&(E.data=b.data)}(b,E),function Pd(E,b){var R,V,Z,J,de;if(!(b.fcmOptions||null!==(R=b.notification)&&void 0!==R&&R.click_action))return;E.fcmOptions={};const Ze=null!==(Z=null===(V=b.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Z?Z:null===(J=b.notification)||void 0===J?void 0:J.click_action;Ze&&(E.fcmOptions.link=Ze);const Ge=null===(de=b.fcmOptions)||void 0===de?void 0:de.analytics_label;Ge&&(E.fcmOptions.analyticsLabel=Ge)}(b,E),b}function ta(E,b){const R=[];for(let V=0;V<E.length;V++)R.push(E.charAt(V)),V<b.length&&R.push(b.charAt(V));return R.join("")}function Cs(E){return Qn.create("missing-app-config-values",{valueName:E})}ta("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ta("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gg{constructor(b,R,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Qa(E){if(!E||!E.options)throw Cs("App Configuration Object");if(!E.name)throw Cs("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:R}=E;for(const V of b)if(!R[V])throw Cs(V);return{appName:E.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Z,installations:R,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Nf(E){return tl.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Lt,{scope:Ku}),E.swRegistration.update().catch(()=>{})}catch(b){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(E,b){if(!b&&!E.swRegistration&&(yield Nf(E)),b||!E.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");E.swRegistration=b}})).apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(E,b){b?E.vapidKey=b:E.vapidKey||(E.vapidKey=Mf)})).apply(this,arguments)}function na(){return na=(0,O.Z)(function*(E,b){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield function ic(E,b){return Xa.apply(this,arguments)}(E,b?.vapidKey),yield function kd(E,b){return Ds.apply(this,arguments)}(E,b?.serviceWorkerRegistration),function tc(E){return Rd.apply(this,arguments)}(E)}),na.apply(this,arguments)}function Ws(){return(Ws=(0,O.Z)(function*(E,b,R){const V=function Io(E){switch(E){case ge.NOTIFICATION_CLICKED:return"notification_open";case ge.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:R[Yl],message_name:R[Ql],message_time:R[vd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Co(){return Co=(0,O.Z)(function*(E,b){const R=b.data;if(!R.isFirebaseMessaging)return;E.onMessageHandler&&R.messageType===ge.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Ju(R)):E.onMessageHandler.next(Ju(R)));const V=R.data;(function el(E){return"object"==typeof E&&!!E&&Yl in E})(V)&&"1"===V[wd]&&(yield function Od(E,b,R){return Ws.apply(this,arguments)}(E,R.messageType,V))}),Co.apply(this,arguments)}const ia="@firebase/messaging",eu=E=>{const b=new Gg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ra(E,b){return Co.apply(this,arguments)}(b,R)),b},sc=E=>{const b=E.getProvider("messaging").getImmediate();return{getToken:V=>function nl(E,b){return na.apply(this,arguments)}(b,V)}};function Pf(){return oc.apply(this,arguments)}function oc(){return(oc=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function tu(){(0,ne._registerComponent)(new ae.wA("messaging",eu,"PUBLIC")),(0,ne._registerComponent)(new ae.wA("messaging-internal",sc,"PRIVATE")),(0,ne.registerVersion)(ia,"0.12.4"),(0,ne.registerVersion)(ia,"0.12.4","esm2017")}();const qs="analytics",il="firebase_id",Ud="origin",nu=6e4,Vd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sl="https://www.googletagmanager.com/gtag/js",hr=new we.Yd("@firebase/analytics"),Fn=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function kf(E){if(!E.startsWith(sl)){const b=Fn.create("invalid-gtag-resource",{gtagURL:E});return hr.warn(b.message),""}return E}function Ks(E){return Promise.all(E.map(b=>b.catch(R=>R)))}function Zs(){return(Zs=(0,O.Z)(function*(E,b,R,V,Z,J){const de=V[Z];try{if(de)yield b[de];else{const Ge=(yield Ks(R)).find(ft=>ft.measurementId===Z);Ge&&(yield b[Ge.appId])}}catch(Ze){hr.error(Ze)}E("config",Z,J)})).apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(E,b,R,V,Z){try{let J=[];if(Z&&Z.send_to){let de=Z.send_to;Array.isArray(de)||(de=[de]);const Ze=yield Ks(R);for(const Ge of de){const ft=Ze.find(Nt=>Nt.measurementId===Ge),Ot=ft&&b[ft.appId];if(!Ot){J=[];break}J.push(Ot)}}0===J.length&&(J=Object.values(b)),yield Promise.all(J),E("event",V,Z||{})}catch(J){hr.error(J)}})).apply(this,arguments)}const al=30,To=new class Bd{constructor(b={},R=1e3){this.throttleMetadata=b,this.intervalMillis=R}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,R){this.throttleMetadata[b]=R}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Ff(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function on(){return(on=(0,O.Z)(function*(E){var b;const{appId:R,apiKey:V}=E,Z={method:"GET",headers:Ff(V)},J=Vd.replace("{app-id}",R),de=yield fetch(J,Z);if(200!==de.status&&304!==de.status){let Ze="";try{const Ge=yield de.json();null!==(b=Ge.error)&&void 0!==b&&b.message&&(Ze=Ge.error.message)}catch{}throw Fn.create("config-fetch-failed",{httpStatus:de.status,responseMessage:Ze})}return de.json()})).apply(this,arguments)}function $d(){return($d=(0,O.Z)(function*(E,b=To,R){const{appId:V,apiKey:Z,measurementId:J}=E.options;if(!V)throw Fn.create("no-app-id");if(!Z){if(J)return{measurementId:J,appId:V};throw Fn.create("no-api-key")}const de=b.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new my;return setTimeout((0,O.Z)(function*(){Ze.abort()}),void 0!==R?R:nu),fc({appId:V,apiKey:Z,measurementId:J},de,Ze,b)})).apply(this,arguments)}function fc(E,b,R){return pc.apply(this,arguments)}function pc(){return pc=(0,O.Z)(function*(E,{throttleEndTimeMillis:b,backoffCount:R},V,Z=To){var J;const{appId:de,measurementId:Ze}=E;try{yield function Lf(E,b){return new Promise((R,V)=>{const Z=Math.max(b-Date.now(),0),J=setTimeout(R,Z);E.addEventListener(()=>{clearTimeout(J),V(Fn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(V,b)}catch(Ge){if(Ze)return hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${Ge?.message}]`),{appId:de,measurementId:Ze};throw Ge}try{const Ge=yield function jd(E){return on.apply(this,arguments)}(E);return Z.deleteThrottleMetadata(de),Ge}catch(Ge){const ft=Ge;if(!function gy(E){if(!(E instanceof oe.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ft)){if(Z.deleteThrottleMetadata(de),Ze)return hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:de,measurementId:Ze};throw Ge}const Ot=503===Number(null===(J=ft?.customData)||void 0===J?void 0:J.httpStatus)?(0,oe.$s)(R,Z.intervalMillis,al):(0,oe.$s)(R,Z.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Ot,backoffCount:R+1};return Z.setThrottleMetadata(de,Nt),hr.debug(`Calling attemptFetch again in ${Ot} millis`),fc(E,Nt,V,Z)}}),pc.apply(this,arguments)}class my{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let So,_c;function Uf(){return(Uf=(0,O.Z)(function*(E,b,R,V,Z){if(Z&&Z.global)E("event",R,V);else{const J=yield b;E("event",R,Object.assign(Object.assign({},V),{send_to:J}))}})).apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(){if(!(0,oe.hl)())return hr.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(E){return hr.warn(Fn.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function lt(){return lt=(0,O.Z)(function*(E,b,R,V,Z,J,de){var Ze;const Ge=function hc(E){return $d.apply(this,arguments)}(E);Ge.then(bt=>{R[bt.measurementId]=bt.appId,E.options.measurementId&&bt.measurementId!==E.options.measurementId&&hr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${bt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bt=>hr.error(bt)),b.push(Ge);const ft=function Ui(){return mn.apply(this,arguments)}().then(bt=>{if(bt)return V.getId()}),[Ot,Nt]=yield Promise.all([Ge,ft]);(function aa(E){const b=window.document.getElementsByTagName("script");for(const R of Object.values(b))if(R.src&&R.src.includes(sl)&&R.src.includes(E))return R;return null})(J)||function oa(E,b){const R=function ol(E,b){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(E,b)),R}("firebase-js-sdk-policy",{createScriptURL:kf}),V=document.createElement("script"),Z=`${sl}?l=${E}&id=${b}`;V.src=R?R?.createScriptURL(Z):Z,V.async=!0,document.head.appendChild(V)}(J,Ot.measurementId),_c&&(Z("consent","default",_c),function cl(E){_c=E}(void 0)),Z("js",new Date);const jn=null!==(Ze=de?.config)&&void 0!==Ze?Ze:{};return jn[Ud]="firebase",jn.update=!0,null!=Nt&&(jn[il]=Nt),Z("config",Ot.measurementId,jn),So&&(Z("set",So),function yc(E){So=E}(void 0)),Ot.measurementId}),lt.apply(this,arguments)}class Qi{constructor(b){this.app=b}_delete(){return delete nr[this.app.options.appId],Promise.resolve()}}let nr={},Gd=[];const su={};let zd,Vi,Fr="dataLayer",vc="gtag",Qs=!1;function ou(E,b,R){!function Ao(){const E=[];if((0,oe.ru)()&&E.push("This is a browser extension environment."),(0,oe.zI)()||E.push("Cookies are not available."),E.length>0){const b=E.map((V,Z)=>`(${Z+1}) ${V}`).join(" "),R=Fn.create("invalid-analytics-context",{errorInfo:b});hr.warn(R.message)}}();const V=E.options.appId;if(!V)throw Fn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Fn.create("no-api-key");hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=nr[V])throw Fn.create("already-exists",{id:V});if(!Qs){!function lc(E){let b=[];Array.isArray(window[E])?b=window[E]:window[E]=b}(Fr);const{wrappedGtag:J,gtagCore:de}=function bo(E,b,R,V,Z){let J=function(...de){window[V].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(J=window[Z]),window[Z]=function ru(E,b,R,V){function J(){return J=(0,O.Z)(function*(de,...Ze){try{if("event"===de){const[Ge,ft]=Ze;yield function Of(E,b,R,V,Z){return Do.apply(this,arguments)}(E,b,R,Ge,ft)}else if("config"===de){const[Ge,ft]=Ze;yield function cc(E,b,R,V,Z,J){return Zs.apply(this,arguments)}(E,b,R,V,Ge,ft)}else if("consent"===de){const[Ge]=Ze;E("consent","update",Ge)}else if("get"===de){const[Ge,ft,Ot]=Ze;E("get",Ge,ft,Ot)}else if("set"===de){const[Ge]=Ze;E("set",Ge)}else E(de,...Ze)}catch(Ge){hr.error(Ge)}}),J.apply(this,arguments)}return function Z(de){return J.apply(this,arguments)}}(J,E,b,R),{gtagCore:J,wrappedGtag:window[Z]}}(nr,Gd,su,Fr,vc);Vi=J,zd=de,Qs=!0}return nr[V]=function Yi(E,b,R,V,Z,J,de){return lt.apply(this,arguments)}(E,Gd,su,b,zd,Fr,R),new Qi(E)}function Wd(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const cu="@firebase/analytics";!function Cc(){(0,ne._registerComponent)(new ae.wA(qs,(b,{options:R})=>ou(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ne._registerComponent)(new ae.wA("analytics-internal",function E(b){try{const R=b.getProvider(qs).getImmediate();return{logEvent:(V,Z,J)=>function Vf(E,b,R,V){E=(0,oe.m9)(E),function _y(E,b,R,V,Z){return Uf.apply(this,arguments)}(Vi,nr[E.app.options.appId],b,R,V).catch(Z=>hr.error(Z))}(R,V,Z,J)}}catch(R){throw Fn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ne.registerVersion)(cu,"0.10.0"),(0,ne.registerVersion)(cu,"0.10.0","esm2017")}();var Dc=B(4408),Si=B(7565);const mi=new class bc extends Si.v{}(class du extends Dc.o{constructor(b,R){super(b,R),this.scheduler=b,this.work=R}schedule(b,R=0){return R>0?super.schedule(b,R):(this.delay=R,this.state=b,this.scheduler.flush(this),this)}execute(b,R){return R>0||this.closed?super.execute(b,R):this._execute(b,R)}requestAsyncId(b,R,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(b,R,V):(b.flush(this),0)}});var Bf=B(4986),xn=B(9751),xo=B(8505),fu=B(5363),ji=B(9468);const pr=new f.GfV("7.5.0"),pu="__angularfire_symbol__analyticsIsSupportedValue",fl="__angularfire_symbol__analyticsIsSupported",la="__angularfire_symbol__remoteConfigIsSupportedValue",Xi="__angularfire_symbol__remoteConfigIsSupported",bs="__angularfire_symbol__messagingIsSupportedValue",gr="__angularfire_symbol__messagingIsSupported";function ca(E,b,R){if(b){if(1===b.length)return b[0];const J=b.filter(de=>de.app===R);if(1===J.length)return J[0]}return R.container.getProvider(E).getImmediate({optional:!0})}globalThis[fl]||(globalThis[fl]=Wd().then(E=>globalThis[pu]=E).catch(()=>globalThis[pu]=!1)),globalThis[gr]||(globalThis[gr]=Pf().then(E=>globalThis[bs]=E).catch(()=>globalThis[bs]=!1)),globalThis[Xi]||(globalThis[Xi]=md().then(E=>globalThis[la]=E).catch(()=>globalThis[la]=!1));const Kd=(E,b)=>{const R=b?[b]:(0,G.C6)(),V=[];return R.forEach(Z=>{Z.container.getProvider(E).instances.forEach(de=>{V.includes(de)||V.push(de)})}),V};function Mo(){}class da{constructor(b,R=mi){this.zone=b,this.delegate=R}now(){return this.delegate.now()}schedule(b,R,V){const Z=this.zone;return this.delegate.schedule(function(de){Z.runGuarded(()=>{b.apply(this,[de])})},R,V)}}class At{constructor(b){this.zone=b,this.task=null}call(b,R){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)),R.pipe((0,xo.b)({next:V,complete:V,error:V})).subscribe(b).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xs=(()=>{class E{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new da(Zone.current)),this.insideAngular=R.run(()=>new da(Zone.current,Bf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(R){return new(R||E)(f.LFG(f.R0b))},E.\u0275prov=f.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function No(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Js(E){return No().ngZone.run(()=>E())}function Sc(E){return E.pipe((0,fu.Q)(No().outsideAngular))}function Ac(E){return No(),function Zd(E){return function(R){return(R=R.lift(new At(E.ngZone))).pipe((0,ji.R)(E.outsideAngular),(0,fu.Q)(E.insideAngular))}}(No())(E)}const Rc=(E,b)=>function(){const V=arguments;return b&&setTimeout(()=>{"scheduled"===b.state&&b.invoke()},10),Js(()=>E.apply(void 0,V))},Yd=(E,b)=>function(){let R;const V=arguments;for(let J=0;J<arguments.length;J++)"function"==typeof V[J]&&(b&&(R||(R=Js(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)))),V[J]=Rc(V[J],R));const Z=function ha(E){return No().ngZone.runOutsideAngular(()=>E())}(()=>E.apply(this,V));if(!b){if(Z instanceof xn.y){const J=No();return Z.pipe((0,ji.R)(J.outsideAngular),(0,fu.Q)(J.insideAngular))}return Js(()=>Z)}return Z instanceof xn.y?Z.pipe(Ac):Z instanceof Promise?Js(()=>new Promise((J,de)=>Z.then(Ze=>Js(()=>J(Ze)),Ze=>Js(()=>de(Ze))))):"function"==typeof Z&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),Z.apply(this,arguments)}:Js(()=>Z)}},1389:(It,Se,B)=>{B.d(Se,{$:()=>Lt,A:()=>q,D:()=>Te,I:()=>Bn,J:()=>Oi,L:()=>us,N:()=>Gr,P:()=>Yi,Q:()=>pd,R:()=>ll,U:()=>gd,V:()=>md,W:()=>Gu,X:()=>ws,Y:()=>zu,Z:()=>_d,_:()=>Wu,a:()=>gi,a0:()=>Mf,a1:()=>Yl,a2:()=>Bg,a3:()=>Ed,a4:()=>Li,a5:()=>Id,a6:()=>Gs,a7:()=>Or,a8:()=>zs,a9:()=>ls,aA:()=>se,aB:()=>fl,aC:()=>Zn,aD:()=>Jr,aE:()=>xo,aF:()=>lu,aG:()=>uu,aH:()=>gn,aL:()=>ds,aO:()=>$s,aa:()=>Dd,ab:()=>bd,ac:()=>jg,ad:()=>Td,ae:()=>Sd,af:()=>Jl,ai:()=>Ad,aj:()=>Rd,ak:()=>qr,an:()=>xf,ao:()=>rc,aq:()=>Xa,ar:()=>ia,as:()=>St,at:()=>Tt,au:()=>Ee,av:()=>De,aw:()=>Nt,ax:()=>gr,ay:()=>Zt,az:()=>Ce,b:()=>rl,c:()=>Vi,d:()=>ou,e:()=>wc,f:()=>cu,g:()=>bc,h:()=>Dc,i:()=>dc,j:()=>Bf,k:()=>$i,l:()=>iu,m:()=>pl,p:()=>me,r:()=>Hd,s:()=>Ys,u:()=>Ui});var f=B(5861),G=B(2090),O=B(6881),ne=B(655),oe=B(1877),ae=B(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Te=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Ke=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new oe.Yd("@firebase/auth");function Be(w,...p){Ae.logLevel<=oe.in.ERROR&&Ae.error(`Auth (${O.SDK_VERSION}): ${w}`,...p)}function De(w,...p){throw Oe(w,...p)}function Ce(w,...p){return Oe(w,...p)}function Me(w,p,_){const I=Object.assign(Object.assign({},Ke()),{[p]:_});return new G.LL("auth","Firebase",I).create(p,{appName:w.name})}function $e(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&De(w,"argument-error"),Me(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(w,...p){if("string"!=typeof w){const _=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return at.create(w,...p)}function se(w,p,..._){if(!w)throw Oe(p,..._)}function tt(w){const p="INTERNAL ASSERTION FAILED: "+w;throw Be(p),new Error(p)}function St(w,p){w||tt(p)}function it(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Wt(){return"http:"===dt()||"https:"===dt()}function dt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class ye{constructor(p,_){this.shortDelay=p,this.longDelay=_,St(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Os(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function be(w,p){St(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Re{static initialize(p,_,I){this.fetchImpl=p,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ze={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ue=new ye(3e4,6e4);function Pe(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function pt(w,p,_,I){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(w,p,_,I,x={}){return ut(w,x,(0,f.Z)(function*(){let k={},ee={};I&&("GET"===p?ee=I:k={body:JSON.stringify(I)});const ce=(0,G.xO)(Object.assign({key:w.config.apiKey},ee)).slice(1),Ve=yield w._getAdditionalHeaders();return Ve["Content-Type"]="application/json",w.languageCode&&(Ve["X-Firebase-Locale"]=w.languageCode),Re.fetch()(In(w,w.config.apiHost,_,ce),Object.assign({method:p,headers:Ve,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function ut(w,p,_){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(w,p,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},ze),p);try{const x=new $r(w),k=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const ee=yield k.json();if("needConfirmation"in ee)throw Gn(w,"account-exists-with-different-credential",ee);if(k.ok&&!("errorMessage"in ee))return ee;{const ce=k.ok?ee.errorMessage:ee.error.message,[Ve,Ye]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Gn(w,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Ve)throw Gn(w,"email-already-in-use",ee);if("USER_DISABLED"===Ve)throw Gn(w,"user-disabled",ee);const Et=I[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Me(w,Et,Ye);De(w,Et)}}catch(x){if(x instanceof G.ZR)throw x;De(w,"network-request-failed",{message:String(x)})}})).apply(this,arguments)}function tn(w,p,_,I){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(w,p,_,I,x={}){const k=yield pt(w,p,_,I,x);return"mfaPendingCredential"in k&&De(w,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function In(w,p,_,I){const x=`${p}${_}?${I}`;return w.config.emulator?be(w.config,x):`${w.config.apiScheme}://${x}`}class $r{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Ce(this.auth,"network-request-failed")),Ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(w,p,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const x=Ce(w,p,I);return x.customData._tokenResponse=_,x}function zn(){return(zn=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function ki(){return(ki=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function gt(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Wn(){return(Wn=(0,f.Z)(function*(w,p=!1){const _=(0,G.m9)(w),I=yield _.getIdToken(p),x=Yr(I);se(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const k="object"==typeof x.firebase?x.firebase:void 0,ee=k?.sign_in_provider;return{claims:x,token:I,authTime:gt(Hr(x.auth_time)),issuedAtTime:gt(Hr(x.iat)),expirationTime:gt(Hr(x.exp)),signInProvider:ee||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Hr(w){return 1e3*Number(w)}function Yr(w){const[p,_,I]=w.split(".");if(void 0===p||void 0===_||void 0===I)return Be("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,G.tV)(_);return x?JSON.parse(x):(Be("Failed to decode base64 JWT payload"),null)}catch(x){return Be("Caught error parsing JWT payload as JSON",x?.toString()),null}}function qt(w,p){return ht.apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(I){throw I instanceof G.ZR&&function Ut({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}class qn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),I)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Mr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=gt(this.lastLoginAt),this.creationTime=gt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pn(w){return Qr.apply(this,arguments)}function Qr(){return Qr=(0,f.Z)(function*(w){var p;const _=w.auth,I=yield w.getIdToken(),x=yield qt(w,function co(w,p){return Ln.apply(this,arguments)}(_,{idToken:I}));se(x?.users.length,_,"internal-error");const k=x.users[0];w._notifyReloadListener(k);const ee=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?function Di(w){return w.map(p=>{var{providerId:_}=p,I=(0,ne._T)(p,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(k.providerUserInfo):[],ce=function Kt(w,p){return[...w.filter(I=>!p.some(x=>x.providerId===I.providerId)),...p]}(w.providerData,ee),Et=!!w.isAnonymous&&!(w.email&&k.passwordHash||ce?.length),Gt={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:ce,metadata:new Mr(k.createdAt,k.lastLoginAt),isAnonymous:Et};Object.assign(w,Gt)}),Qr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(w){const p=(0,G.m9)(w);yield Pn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(w,p){const _=yield ut(w,{},(0,f.Z)(function*(){const I=(0,G.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:k}=w.config,ee=In(w,x,"/v1/token",`key=${k}`),ce=yield w._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Re.fetch()(ee,{method:"POST",headers:ce,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){se(p.idToken,"internal-error"),se(typeof p.idToken<"u","internal-error"),se(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function an(w){const p=Yr(w);return se(p,"internal-error"),se(typeof p.exp<"u","internal-error"),se(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var I=this;return(0,f.Z)(function*(){return se(!I.accessToken||I.refreshToken,p,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var I=this;return(0,f.Z)(function*(){const{accessToken:x,refreshToken:k,expiresIn:ee}=yield function Jt(w,p){return hi.apply(this,arguments)}(p,_);I.updateTokensAndExpiration(x,k,Number(ee))})()}updateTokensAndExpiration(p,_,I){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,_){const{refreshToken:I,accessToken:x,expirationTime:k}=_,ee=new Bt;return I&&(se("string"==typeof I,"internal-error",{appName:p}),ee.refreshToken=I),x&&(se("string"==typeof x,"internal-error",{appName:p}),ee.accessToken=x),k&&(se("number"==typeof k,"internal-error",{appName:p}),ee.expirationTime=k),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Bt,this.toJSON())}_performRefresh(){return tt("not implemented")}}function Kn(w,p){se("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class kn{constructor(p){var{uid:_,auth:I,stsTokenManager:x}=p,k=(0,ne._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Mr(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,f.Z)(function*(){const I=yield qt(_,_.stsTokenManager.getToken(_.auth,p));return se(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(p){return function os(w){return Wn.apply(this,arguments)}(this,p)}reload(){return function Vn(w){return lr.apply(this,arguments)}(this)}_assign(p){this!==p&&(se(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new kn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var I=this;return(0,f.Z)(function*(){let x=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield Pn(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,f.Z)(function*(){const _=yield p.getIdToken();return yield qt(p,function xr(w,p){return zn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var I,x,k,ee,ce,Ve,Ye,Et;const Gt=null!==(I=_.displayName)&&void 0!==I?I:void 0,_i=null!==(x=_.email)&&void 0!==x?x:void 0,Po=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,pa=null!==(ee=_.photoURL)&&void 0!==ee?ee:void 0,Mc=null!==(ce=_.tenantId)&&void 0!==ce?ce:void 0,Ss=null!==(Ve=_._redirectEventId)&&void 0!==Ve?Ve:void 0,Wf=null!==(Ye=_.createdAt)&&void 0!==Ye?Ye:void 0,Xd=null!==(Et=_.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Nc,emailVerified:ga,isAnonymous:Jd,providerData:eh,stsTokenManager:yl}=_;se(Nc&&yl,p,"internal-error");const th=Bt.fromJSON(this.name,yl);se("string"==typeof Nc,p,"internal-error"),Kn(Gt,p.name),Kn(_i,p.name),se("boolean"==typeof ga,p,"internal-error"),se("boolean"==typeof Jd,p,"internal-error"),Kn(Po,p.name),Kn(pa,p.name),Kn(Mc,p.name),Kn(Ss,p.name),Kn(Wf,p.name),Kn(Xd,p.name);const vl=new kn({uid:Nc,auth:p,email:_i,emailVerified:ga,displayName:Gt,isAnonymous:Jd,photoURL:pa,phoneNumber:Po,tenantId:Mc,stsTokenManager:th,createdAt:Wf,lastLoginAt:Xd});return eh&&Array.isArray(eh)&&(vl.providerData=eh.map(ma=>Object.assign({},ma))),Ss&&(vl._redirectEventId=Ss),vl}static _fromIdTokenResponse(p,_,I=!1){return(0,f.Z)(function*(){const x=new Bt;x.updateFromServerResponse(_);const k=new kn({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:I});return yield Pn(k),k})()}}const Nr=new Map;function Zn(w){St(w instanceof Function,"Expected a class definition");let p=Nr.get(w);return p?(St(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Nr.set(w,p),p)}const Gr=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,I){var x=this;return(0,f.Z)(function*(){x.storage[_]=I})()}_get(_){var I=this;return(0,f.Z)(function*(){const x=I.storage[_];return void 0===x?null:x})()}_remove(_){var I=this;return(0,f.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function Jr(w,p,_){return`firebase:${w}:${p}:${_}`}class z{constructor(p,_,I){this.persistence=p,this.auth=_,this.userKey=I;const{config:x,name:k}=this.auth;this.fullUserKey=Jr(this.userKey,x.apiKey,k),this.fullPersistenceKey=Jr("persistence",x.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?kn._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,f.Z)(function*(){if(_.persistence===p)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,I="authUser"){return(0,f.Z)(function*(){if(!_.length)return new z(Zn(Gr),p,I);const x=(yield Promise.all(_.map(function(){var Ye=(0,f.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let k=x[0]||Zn(Gr);const ee=Jr(I,p.config.apiKey,p.name);let ce=null;for(const Ye of _)try{const Et=yield Ye._get(ee);if(Et){const Gt=kn._fromJSON(p,Et);Ye!==k&&(ce=Gt),k=Ye;break}}catch{}const Ve=x.filter(Ye=>Ye._shouldAllowMigration);return k._shouldAllowMigration&&Ve.length?(k=Ve[0],ce&&(yield k._set(ee,ce.toJSON())),yield Promise.all(_.map(function(){var Ye=(0,f.Z)(function*(Et){if(Et!==k)try{yield Et._remove(ee)}catch{}});return function(Et){return Ye.apply(this,arguments)}}())),new z(k,p,I)):new z(k,p,I)})()}}function H(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Y(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(F(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(nt(p))return"Blackberry";if(Rt(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||N(p))&&!p.includes("edge/"))return"Chrome";if(Ee(p))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function F(w=(0,G.z$)()){return/firefox\//i.test(w)}function L(w=(0,G.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function N(w=(0,G.z$)()){return/crios\//i.test(w)}function Y(w=(0,G.z$)()){return/iemobile/i.test(w)}function Ee(w=(0,G.z$)()){return/android/i.test(w)}function nt(w=(0,G.z$)()){return/blackberry/i.test(w)}function Rt(w=(0,G.z$)()){return/webos/i.test(w)}function Tt(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Zt(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function jt(w=(0,G.z$)()){return Tt(w)||Ee(w)||Rt(w)||nt(w)||/windows phone/i.test(w)||Y(w)}function vs(w,p=[]){let _;switch(w){case"Browser":_=H((0,G.z$)());break;case"Worker":_=`${H((0,G.z$)())}-${w}`;break;default:_=w}const I=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${I}`}function re(){return(re=(0,f.Z)(function*(w){return(yield pt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fe(w,p){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(w,p){return pt(w,"GET","/v2/recaptchaConfig",Pe(w,p))})).apply(this,arguments)}function xt(w){return void 0!==w&&void 0!==w.getResponse}function en(w){return void 0!==w&&void 0!==w.enterprise}class wt{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function sn(w){return new Promise((p,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=p,I.onerror=x=>{const k=Ce("internal-error");k.customData=x,_(k)},I.type="text/javascript",I.charset="UTF-8",function pn(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(I)})}function zr(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Df="NO_RECAPTCHA";class Fs{constructor(p){this.type="recaptcha-enterprise",this.auth=gn(p)}verify(p="verify",_=!1){var I=this;return(0,f.Z)(function*(){function k(){return k=(0,f.Z)(function*(ce){if(!_){if(null==ce.tenantId&&null!=ce._agentRecaptchaConfig)return ce._agentRecaptchaConfig.siteKey;if(null!=ce.tenantId&&void 0!==ce._tenantRecaptchaConfigs[ce.tenantId])return ce._tenantRecaptchaConfigs[ce.tenantId].siteKey}return new Promise(function(){var Ve=(0,f.Z)(function*(Ye,Et){Fe(ce,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Gt=>{if(void 0!==Gt.recaptchaKey){const _i=new wt(Gt);return null==ce.tenantId?ce._agentRecaptchaConfig=_i:ce._tenantRecaptchaConfigs[ce.tenantId]=_i,Ye(_i.siteKey)}Et(new Error("recaptcha Enterprise site key undefined"))}).catch(Gt=>{Et(Gt)})});return function(Ye,Et){return Ve.apply(this,arguments)}}())}),k.apply(this,arguments)}function ee(ce,Ve,Ye){const Et=window.grecaptcha;en(Et)?Et.enterprise.ready(()=>{Et.enterprise.execute(ce,{action:p}).then(Gt=>{Ve(Gt)}).catch(()=>{Ve(Df)})}):Ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ce,Ve)=>{(function x(ce){return k.apply(this,arguments)})(I.auth).then(Ye=>{if(!_&&en(window.grecaptcha))ee(Ye,ce,Ve);else{if(typeof window>"u")return void Ve(new Error("RecaptchaVerifier is only supported in browser"));sn("https://www.google.com/recaptcha/enterprise.js?render="+Ye).then(()=>{ee(Ye,ce,Ve)}).catch(Et=>{Ve(Et)})}}).catch(Ye=>{Ve(Ye)})})})()}}function wr(w,p,_){return et.apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(w,p,_,I=!1){const x=new Fs(w);let k;try{k=yield x.verify(_)}catch{k=yield x.verify(_,!0)}const ee=Object.assign({},p);return Object.assign(ee,I?{captchaResp:k}:{captchaResponse:k}),Object.assign(ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ee})).apply(this,arguments)}class Yt{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const I=k=>new Promise((ee,ce)=>{try{ee(p(k))}catch(Ve){ce(Ve)}});I.onAbort=_,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===p)return;const I=[];try{for(const x of _.queue)yield x(p),x.onAbort&&I.push(x.onAbort)}catch(x){I.reverse();for(const k of I)try{k()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class An{constructor(p,_,I,x){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ls(this),this.idTokenSubscription=new Ls(this),this.beforeStateQueue=new Yt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(p,_){var I=this;return _&&(this._popupRedirectResolver=Zn(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var x,k;if(!I._deleted&&(I.persistenceManager=yield z.create(I,p),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(k=I.currentUser)||void 0===k?void 0:k.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,f.Z)(function*(){var I;const x=yield _.assertedPersistence.getCurrentUser();let k=x,ee=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ce=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Ve=k?._redirectEventId,Ye=yield _.tryRedirectSignIn(p);(!ce||ce===Ve)&&Ye?.user&&(k=Ye.user,ee=!0)}if(!k)return _.directlySetCurrentUser(null);if(!k._redirectEventId){if(ee)try{yield _.beforeStateQueue.runMiddleware(k)}catch(ce){k=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ce))}return k?_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)}return se(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var _=this;return(0,f.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,f.Z)(function*(){try{yield Pn(p)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function he(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,f.Z)(function*(){const I=p?(0,G.m9)(p):null;return I&&se(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(p,_=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return p&&se(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(Zn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,f.Z)(function*(){const _=yield Fe(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),I=new wt(_);null==p.tenantId?p._agentRecaptchaConfig=I:p._tenantRecaptchaConfigs[p.tenantId]=I,I.emailPasswordEnabled&&new Fs(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new G.LL("auth","Firebase",p())}onAuthStateChanged(p,_,I){return this.registerStateListener(this.authStateSubscription,p,_,I)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,I){return this.registerStateListener(this.idTokenSubscription,p,_,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var I=this;return(0,f.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const I=p&&Zn(p)||_._popupRedirectResolver;se(I,_,"argument-error"),_.redirectPersistenceManager=yield z.create(_,[Zn(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,f.Z)(function*(){var I,x;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,f.Z)(function*(){if(p===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,I,x){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return se(ee,this,"internal-error"),ee.then(()=>k(this.currentUser)),"function"==typeof _?p.addObserver(_,I,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=vs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var _;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();x&&(I["X-Firebase-Client"]=x);const k=yield p._getAppCheckToken();return k&&(I["X-Firebase-AppCheck"]=k),I})()}_getAppCheckToken(){var p=this;return(0,f.Z)(function*(){var _;const I=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function ke(w,...p){Ae.logLevel<=oe.in.WARN&&Ae.warn(`Auth (${O.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function gn(w){return(0,G.m9)(w)}class Ls{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,G.ne)(_=>this.observer=_)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bn(w,p,_){const I=gn(w);se(I._canInitEmulator,I,"emulator-config-failed"),se(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const x=!!_?.disableWarnings,k=Va(p),{host:ee,port:ce}=function zo(w){const p=Va(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const k=x[1];return{host:k,port:Ht(I.substr(k.length+1))}}{const[k,ee]=I.split(":");return{host:k,port:Ht(ee)}}}(p);I.config.emulator={url:`${k}//${ee}${null===ce?"":`:${ce}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ee,port:ce,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function $u(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Va(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Ht(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class Oi{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return tt("not implemented")}_getIdTokenResponse(p){return tt("not implemented")}_linkToIdToken(p,_){return tt("not implemented")}_getReauthenticationResolver(p){return tt("not implemented")}}function Ba(w,p){return Us.apply(this,arguments)}function Us(){return(Us=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:resetPassword",Pe(w,p))})).apply(this,arguments)}function cr(w,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function bi(){return(bi=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:update",Pe(w,p))})).apply(this,arguments)}function as(w,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signInWithPassword",Pe(w,p))})).apply(this,arguments)}function En(w,p){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:sendOobCode",Pe(w,p))})).apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(w,p){return En(w,p)})).apply(this,arguments)}function Wo(w,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(w,p){return En(w,p)})).apply(this,arguments)}function go(w,p){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,f.Z)(function*(w,p){return En(w,p)})).apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(w,p){return En(w,p)})).apply(this,arguments)}function mo(){return(mo=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signInWithEmailLink",Pe(w,p))})).apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signInWithEmailLink",Pe(w,p))})).apply(this,arguments)}class fi extends Oi{constructor(p,_,I,x=null){super("password",I),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new fi(p,_,"password")}static _fromEmailAndCode(p,_,I=null){return new fi(p,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,f.Z)(function*(){var I;switch(_.signInMethod){case"password":const x={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=p._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const k=yield wr(p,x,"signInWithPassword");return as(p,k)}return as(p,x).catch(function(){var k=(0,f.Z)(function*(ee){if("auth/missing-recaptcha-token"===ee.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ce=yield wr(p,x,"signInWithPassword");return as(p,ce)}return Promise.reject(ee)});return function(ee){return k.apply(this,arguments)}}());case"emailLink":return function Zi(w,p){return mo.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:De(p,"internal-error")}})()}_linkToIdToken(p,_){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return cr(p,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Hu(w,p){return $a.apply(this,arguments)}(p,{idToken:_,email:I._email,oobCode:I._password});default:De(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Bs(w,p){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signInWithIdp",Pe(w,p))})).apply(this,arguments)}class us extends Oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new us(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):De("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x}=_,k=(0,ne._T)(_,["providerId","signInMethod"]);if(!I||!x)return null;const ee=new us(I,x);return ee.idToken=k.idToken||void 0,ee.accessToken=k.accessToken||void 0,ee.secret=k.secret,ee.nonce=k.nonce,ee.pendingToken=k.pendingToken||null,ee}_getIdTokenResponse(p){return Bs(p,this.buildRequest())}_linkToIdToken(p,_){const I=this.buildRequest();return I.idToken=_,Bs(p,I)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Bs(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,G.xO)(_)}return p}}function ld(){return(ld=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:sendVerificationCode",Pe(w,p))})).apply(this,arguments)}function cd(){return(cd=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",Pe(w,p))})).apply(this,arguments)}function dd(){return(dd=(0,f.Z)(function*(w,p){const _=yield tn(w,"POST","/v1/accounts:signInWithPhoneNumber",Pe(w,p));if(_.temporaryProof)throw Gn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const hd={USER_NOT_FOUND:"user-not-found"};function Tf(){return(Tf=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",Pe(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),hd)})).apply(this,arguments)}class js extends Oi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new js({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new js({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function bf(w,p){return cd.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Vg(w,p){return dd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function fd(w,p){return Tf.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:I,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:I,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:k}=p;return I||_||x||k?new js({verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:k}):null}}class Ko{constructor(p){var _,I,x,k,ee,ce;const Ve=(0,G.zd)((0,G.pd)(p)),Ye=null!==(_=Ve.apiKey)&&void 0!==_?_:null,Et=null!==(I=Ve.oobCode)&&void 0!==I?I:null,Gt=function qo(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ve.mode)&&void 0!==x?x:null);se(Ye&&Et&&Gt,"argument-error"),this.apiKey=Ye,this.operation=Gt,this.code=Et,this.continueUrl=null!==(k=Ve.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(ee=Ve.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(ce=Ve.tenantId)&&void 0!==ce?ce:null}static parseLink(p){const _=function Sf(w){const p=(0,G.zd)((0,G.pd)(w)).link,_=p?(0,G.zd)((0,G.pd)(p)).deep_link_id:null,I=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(I?(0,G.zd)((0,G.pd)(I)).link:null)||I||_||p||w}(p);try{return new Ko(_)}catch{return null}}}let pd=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return fi._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const x=Ko.parseLink(I);return se(x,"argument-error"),fi._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class _o{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ga extends _o{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ws extends Ga{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return se("providerId"in _&&"signInMethod"in _,"argument-error"),us._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return se(p.idToken||p.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ws.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ws.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:k,nonce:ee,providerId:ce}=p;if(!I&&!x&&!_&&!k||!ce)return null;try{return new ws(ce)._credential({idToken:_,accessToken:I,nonce:ee,pendingToken:k})}catch{return null}}}let gd=(()=>{class w extends Ga{constructor(){super("facebook.com")}static credential(_){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),md=(()=>{class w extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x}=_;if(!I&&!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Gu=(()=>{class w extends Ga{constructor(){super("github.com")}static credential(_){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class $s extends Oi{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Bs(p,this.buildRequest())}_linkToIdToken(p,_){const I=this.buildRequest();return I.idToken=_,Bs(p,I)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Bs(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x,pendingToken:k}=_;return I&&x&&k&&I===x?new $s(I,k):null}static _create(p,_){return new $s(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zu extends _o{constructor(p){se(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return zu.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return zu.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=$s.fromJSON(p);return se(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:I}=p;if(!_||!I)return null;try{return $s._create(I,_)}catch{return null}}}let _d=(()=>{class w extends Ga{constructor(){super("twitter.com")}static credential(_,I){return us._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=_;if(!I||!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Zo(w,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signUp",Pe(w,p))})).apply(this,arguments)}class On{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,I,x=!1){return(0,f.Z)(function*(){const k=yield kn._fromIdTokenResponse(p,I,x),ee=za(I);return new On({user:k,providerId:ee,_tokenResponse:I,operationType:_})})()}static _forOperation(p,_,I){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const x=za(I);return new On({user:p,providerId:x,_tokenResponse:I,operationType:_})})()}}function za(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Wu(w){return dr.apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(w){var p;const _=gn(w);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new On({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Zo(_,{returnSecureToken:!0}),x=yield On._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class vo extends G.ZR{constructor(p,_,I,x){var k;super(_.code,_.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,vo.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,_,I,x){return new vo(p,_,I,x)}}function wo(w,p,_,I){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?vo._fromErrorAndOperation(w,k,p,I):k})}function kr(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function xf(w,p){return qu.apply(this,arguments)}function qu(){return qu=(0,f.Z)(function*(w,p){const _=(0,G.m9)(w);yield Wa(!0,_,p);const{providerUserInfo:I}=yield function di(w,p){return ki.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=kr(I||[]);return _.providerData=_.providerData.filter(k=>x.has(k.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),qu.apply(this,arguments)}function ti(w,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,f.Z)(function*(w,p,_=!1){const I=yield qt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return On._forOperation(w,"link",I)})).apply(this,arguments)}function Wa(w,p,_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(w,p,_){yield Pn(p);const x=!1===w?"provider-already-linked":"no-such-provider";se(kr(p.providerData).has(_)===w,p.auth,x)})).apply(this,arguments)}function yd(w,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(w,p,_=!1){const{auth:I}=w,x="reauthenticate";try{const k=yield qt(w,wo(I,x,p,w),_);se(k.idToken,I,"internal-error");const ee=Yr(k.idToken);se(ee,I,"internal-error");const{sub:ce}=ee;return se(w.uid===ce,I,"user-mismatch"),On._forOperation(w,x,k)}catch(k){throw"auth/user-not-found"===k?.code&&De(I,"user-mismatch"),k}})).apply(this,arguments)}function qa(w,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(w,p,_=!1){const I="signIn",x=yield wo(w,I,p),k=yield On._fromIdTokenResponse(w,I,x);return _||(yield w._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Lt(w,p){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,f.Z)(function*(w,p){return qa(gn(w),p)})).apply(this,arguments)}function Mf(w,p){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,f.Z)(function*(w,p){const _=(0,G.m9)(w);return yield Wa(!1,_,p.providerId),ti(_,p)})).apply(this,arguments)}function Yl(w,p){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,f.Z)(function*(w,p){return yd((0,G.m9)(w),p)})).apply(this,arguments)}function wd(){return(wd=(0,f.Z)(function*(w,p){return tn(w,"POST","/v1/accounts:signInWithCustomToken",Pe(w,p))})).apply(this,arguments)}function Bg(w,p){return ge.apply(this,arguments)}function ge(){return ge=(0,f.Z)(function*(w,p){const _=gn(w),I=yield function vd(w,p){return wd.apply(this,arguments)}(_,{token:p,returnSecureToken:!0}),x=yield On._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(x.user),x}),ge.apply(this,arguments)}class Vt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Xl._fromServerResponse(p,_):"totpInfo"in _?Ka._fromServerResponse(p,_):De(p,"internal-error")}}class Xl extends Vt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Xl(_)}}class Ka extends Vt{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new Ka(_)}}function Yn(w,p,_){var I;se((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),se(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(se(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(se(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Ed(w,p,_){return Qo.apply(this,arguments)}function Qo(){return Qo=(0,f.Z)(function*(w,p,_){var I;const x=gn(w),k={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(I=x._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ee=yield wr(x,k,"getOobCode",!0);_&&Yn(x,ee,_),yield Wo(x,ee)}else _&&Yn(x,k,_),yield Wo(x,k).catch(function(){var ee=(0,f.Z)(function*(ce){if("auth/missing-recaptcha-token"!==ce.code)return Promise.reject(ce);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ve=yield wr(x,k,"getOobCode",!0);_&&Yn(x,Ve,_),yield Wo(x,Ve)}});return function(ce){return ee.apply(this,arguments)}}())}),Qo.apply(this,arguments)}function Li(w,p,_){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(w,p,_){yield Ba((0,G.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Id(w,p){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,f.Z)(function*(w,p){yield function po(w,p){return bi.apply(this,arguments)}((0,G.m9)(w),{oobCode:p})}),Cd.apply(this,arguments)}function Gs(w,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(w,p){const _=(0,G.m9)(w),I=yield Ba(_,{oobCode:p}),x=I.requestType;switch(se(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(I.mfaInfo,_,"internal-error");default:se(I.email,_,"internal-error")}let k=null;return I.mfaInfo&&(k=Vt._fromServerResponse(gn(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:k},operation:x}})).apply(this,arguments)}function Or(w,p){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(w,p){const{data:_}=yield Gs((0,G.m9)(w),p);return _.email})).apply(this,arguments)}function zs(w,p,_){return Is.apply(this,arguments)}function Is(){return Is=(0,f.Z)(function*(w,p,_){var I;const x=gn(w),k={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let ee;if(null!==(I=x._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const Ye=yield wr(x,k,"signUpPassword");ee=Zo(x,Ye)}else ee=Zo(x,k).catch(function(){var Ye=(0,f.Z)(function*(Et){if("auth/missing-recaptcha-token"===Et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Gt=yield wr(x,k,"signUpPassword");return Zo(x,Gt)}return Promise.reject(Et)});return function(Et){return Ye.apply(this,arguments)}}());const ce=yield ee.catch(Ye=>Promise.reject(Ye)),Ve=yield On._fromIdTokenResponse(x,"signIn",ce);return yield x._updateCurrentUser(Ve.user),Ve}),Is.apply(this,arguments)}function ls(w,p,_){return Lt((0,G.m9)(w),pd.credential(p,_))}function Dd(w,p,_){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,f.Z)(function*(w,p,_){var I;const x=gn(w),k={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function ee(ce,Ve){se(Ve.handleCodeInApp,x,"argument-error"),Ve&&Yn(x,ce,Ve)}if(null!==(I=x._getRecaptchaConfig())&&void 0!==I&&I.emailPasswordEnabled){const ce=yield wr(x,k,"getOobCode",!0);ee(ce,_),yield go(x,ce)}else ee(k,_),yield go(x,k).catch(function(){var ce=(0,f.Z)(function*(Ve){if("auth/missing-recaptcha-token"!==Ve.code)return Promise.reject(Ve);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield wr(x,k,"getOobCode",!0);ee(Ye,_),yield go(x,Ye)}});return function(Ve){return ce.apply(this,arguments)}}())}),Eo.apply(this,arguments)}function bd(w,p){return"EMAIL_SIGNIN"===Ko.parseLink(p)?.operation}function jg(w,p,_){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w),x=pd.credentialWithLink(p,_||it());return se(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Lt(I,x)})).apply(this,arguments)}function Za(){return(Za=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:createAuthUri",Pe(w,p))})).apply(this,arguments)}function Td(w,p){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,f.Z)(function*(w,p){const I={identifier:p,continueUri:Wt()?it():"http://localhost"},{signinMethods:x}=yield function Yu(w,p){return Za.apply(this,arguments)}((0,G.m9)(w),I);return x||[]}),Qu.apply(this,arguments)}function Sd(w,p){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,f.Z)(function*(w,p){const _=(0,G.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Yn(_.auth,x,p);const{email:k}=yield function ql(w,p){return ja.apply(this,arguments)}(_.auth,x);k!==w.email&&(yield w.reload())}),Jo.apply(this,arguments)}function Jl(w,p,_){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&Yn(I.auth,k,_);const{email:ee}=yield function ud(w,p){return ei.apply(this,arguments)}(I.auth,k);ee!==w.email&&(yield w.reload())}),Ya.apply(this,arguments)}function Xu(){return(Xu=(0,f.Z)(function*(w,p){return pt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ad(w,p){return tc.apply(this,arguments)}function tc(){return tc=(0,f.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const I=(0,G.m9)(w),k={idToken:yield I.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},ee=yield qt(I,function ec(w,p){return Xu.apply(this,arguments)}(I.auth,k));I.displayName=ee.displayName||null,I.photoURL=ee.photoUrl||null;const ce=I.providerData.find(({providerId:Ve})=>"password"===Ve);ce&&(ce.displayName=I.displayName,ce.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ee)}),tc.apply(this,arguments)}function Rd(w,p){return cs((0,G.m9)(w),p,null)}function qr(w,p){return cs((0,G.m9)(w),null,p)}function cs(w,p,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,f.Z)(function*(w,p,_){const{auth:I}=w,k={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(k.email=p),_&&(k.password=_);const ee=yield qt(w,cr(I,k));yield w._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class ea{constructor(p,_,I={}){this.isNewUser=p,this.providerId=_,this.profile=I}}class nc extends ea{constructor(p,_,I,x){super(p,_,I),this.username=x}}class $g extends ea{constructor(p,_){super(p,"facebook.com",_)}}class Md extends nc{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Hg extends ea{constructor(p,_){super(p,"google.com",_)}}class Ju extends nc{constructor(p,_,I){super(p,"twitter.com",_,I)}}function rc(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function xd(w){var p,_;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},k=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const ee=null===(_=null===(p=Yr(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(ee)return new ea(k,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!I)return null;switch(I){case"facebook.com":return new $g(k,x);case"github.com":return new Md(k,x);case"google.com":return new Hg(k,x);case"twitter.com":return new Ju(k,x,w.screenName||null);case"custom":case"anonymous":return new ea(k,null);default:return new ea(k,I,x)}}(_)}class Ds{constructor(p,_,I){this.type=p,this.credential=_,this.auth=I}static _fromIdtoken(p,_){return new Ds("enroll",p,_)}static _fromMfaPendingCredential(p){return new Ds("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,I;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ds._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return Ds._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ic{constructor(p,_,I){this.session=p,this.hints=_,this.signInResolver=I}static _fromError(p,_){const I=gn(p),x=_.customData._serverResponse,k=(x.mfaInfo||[]).map(ce=>Vt._fromServerResponse(I,ce));se(x.mfaPendingCredential,I,"internal-error");const ee=Ds._fromMfaPendingCredential(x.mfaPendingCredential);return new ic(ee,k,function(){var ce=(0,f.Z)(function*(Ve){const Ye=yield Ve._process(I,ee);delete x.mfaInfo,delete x.mfaPendingCredential;const Et=Object.assign(Object.assign({},x),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(_.operationType){case"signIn":const Gt=yield On._fromIdTokenResponse(I,_.operationType,Et);return yield I._updateCurrentUser(Gt.user),Gt;case"reauthenticate":return se(_.user,I,"internal-error"),On._forOperation(_.user,_.operationType,Et);default:De(I,"internal-error")}});return function(Ve){return ce.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,f.Z)(function*(){return _.signInResolver(p)})()}}function Xa(w,p){var _;const I=(0,G.m9)(w),x=p;return se(p.customData.operationType,I,"argument-error"),se(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),ic._fromError(I,x)}class ra{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Vt._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new ra(p)}getSession(){var p=this;return(0,f.Z)(function*(){return Ds._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var I=this;return(0,f.Z)(function*(){const x=p,k=yield I.getSession(),ee=yield qt(I.user,x._process(I.user.auth,k,_));return yield I.user._updateTokensIfNecessary(ee),I.user.reload()})()}unenroll(p){var _=this;return(0,f.Z)(function*(){const I="string"==typeof p?p:p.uid,x=yield _.user.getIdToken();try{const k=yield qt(_.user,function Io(w,p){return pt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Pe(w,p))}(_.user.auth,{idToken:x,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ee})=>ee!==I),yield _.user._updateTokensIfNecessary(k),yield _.user.reload()}catch(k){throw k}})()}}const Co=new WeakMap;function ia(w){const p=(0,G.m9)(w);return Co.has(p)||Co.set(p,ra._fromUser(p)),Co.get(p)}const Ja="__sak";class eu{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ja,"1"),this.storage.removeItem(Ja),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const rl=(()=>{class w extends eu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sc(){const w=(0,G.z$)();return L(w)||Tt(w)}()&&function yr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=jt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),k=this.localCache[I];x!==k&&_(I,k,x)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((ce,Ve,Ye)=>{this.notifyListeners(ce,Ye)});const x=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(x);if(_.newValue!==ce)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!I)return}const k=()=>{const ce=this.storage.getItem(x);!I&&this.localCache[x]===ce||this.notifyListeners(x,ce)},ee=this.storage.getItem(x);!function Cn(){return(0,G.w1)()&&10===document.documentMode}()||ee===_.newValue||_.newValue===_.oldValue?k():setTimeout(k,10)}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const k of Array.from(x))k(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var x=()=>super._set,k=this;return(0,f.Z)(function*(){yield x().call(k,_,I),k.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,x=this;return(0,f.Z)(function*(){const k=yield I().call(x,_);return x.localCache[_]=JSON.stringify(k),k})()}_remove(_){var I=()=>super._remove,x=this;return(0,f.Z)(function*(){yield I().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),gi=(()=>{class w extends eu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let uc=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(k=>k.isListeningto(_));if(I)return I;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,f.Z)(function*(){const x=_,{eventId:k,eventType:ee,data:ce}=x.data,Ve=I.handlersMap[ee];if(!Ve?.size)return;x.ports[0].postMessage({status:"ack",eventId:k,eventType:ee});const Ye=Array.from(Ve).map(function(){var Gt=(0,f.Z)(function*(_i){return _i(x.origin,ce)});return function(_i){return Gt.apply(this,arguments)}}()),Et=yield function Fd(w){return Promise.all(w.map(function(){var p=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return p.apply(this,arguments)}}()))}(Ye);x.ports[0].postMessage({status:"done",eventId:k,eventType:ee,response:Et})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ds(w="",p=10){let _="";for(let I=0;I<p;I++)_+=Math.floor(10*Math.random());return w+_}class Ld{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,I=50){var x=this;return(0,f.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let ee,ce;return new Promise((Ve,Ye)=>{const Et=ds("",20);k.port1.start();const Gt=setTimeout(()=>{Ye(new Error("unsupported_event"))},I);ce={messageChannel:k,onMessage(_i){const Po=_i;if(Po.data.eventId===Et)switch(Po.data.status){case"ack":clearTimeout(Gt),ee=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Ve(Po.data.response);break;default:clearTimeout(Gt),clearTimeout(ee),Ye(new Error("invalid_response"))}}},x.handlers.add(ce),k.port1.addEventListener("message",ce.onMessage),x.target.postMessage({eventType:p,eventId:Et,data:_},[k.port2])}).finally(()=>{ce&&x.removeMessageHandler(ce)})})()}}function Xn(){return window}function il(){return typeof Xn().WorkerGlobalScope<"u"&&"function"==typeof Xn().importScripts}function nu(){return(nu=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const hr="firebaseLocalStorageDb",sa=1,Fn="firebaseLocalStorage",kf="fbase_key";class Ks{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ol(w,p){return w.transaction([Fn],p?"readwrite":"readonly").objectStore(Fn)}function lc(){const w=indexedDB.open(hr,sa);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Fn,{keyPath:kf})}catch(x){_(x)}}),w.addEventListener("success",(0,f.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Fn)?p(I):(I.close(),yield function oa(){const w=indexedDB.deleteDatabase(hr);return new Ks(w).toPromise()}(),p(yield lc()))}))})}function cc(w,p,_){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(w,p,_){const I=ol(w,!0).put({[kf]:p,value:_});return new Ks(I).toPromise()})).apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(w,p){const _=ol(w,!1).get(p),I=yield new Ks(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function ru(w,p){const _=ol(w,!0).delete(p);return new Ks(_).toPromise()}const dc=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield lc()),_.db})()}_withRetries(_){var I=this;return(0,f.Z)(function*(){let x=0;for(;;)try{const k=yield I._openDb();return yield _(k)}catch(k){if(x++>3)throw k;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return il()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=uc._getInstance(function sl(){return il()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(x,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(x,k){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(x,k){return["keyChanged"]});return function(x,k){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var I,x;if(_.activeServiceWorker=yield function Ud(){return nu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ld(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);k&&null!==(I=k[0])&&void 0!==I&&I.fulfilled&&null!==(x=k[0])&&void 0!==x&&x.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Vd(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield lc();return yield cc(_,Ja,"1"),yield ru(_,Ja),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var x=this;return(0,f.Z)(function*(){return x._withPendingWrite((0,f.Z)(function*(){return yield x._withRetries(k=>cc(k,_,I)),x.localCache[_]=I,x.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,f.Z)(function*(){const x=yield I._withRetries(k=>function Of(w,p){return Do.apply(this,arguments)}(k,_));return I.localCache[_]=x,x})()}_remove(_){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(x=>ru(x,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const I=yield _._withRetries(ee=>{const ce=ol(ee,!1).getAll();return new Ks(ce).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const x=[],k=new Set;for(const{fbase_key:ee,value:ce}of I)k.add(ee),JSON.stringify(_.localCache[ee])!==JSON.stringify(ce)&&(_.notifyListeners(ee,ce),x.push(ee));for(const ee of Object.keys(_.localCache))_.localCache[ee]&&!k.has(ee)&&(_.notifyListeners(ee,null),x.push(ee));return x})()}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const k of Array.from(x))k(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),hc=1e12;class $d{constructor(p){this.auth=p,this.counter=hc,this._widgets=new Map}render(p,_){const I=this.counter;return this._widgets.set(I,new fc(p,this.auth.name,_||{})),this.counter++,I}reset(p){var _;const I=p||hc;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(p){var _;return(null===(_=this._widgets.get(p||hc))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,f.Z)(function*(){var I;return null===(I=_._widgets.get(p||hc))||void 0===I||I.execute(),""})()}}class fc{constructor(p,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;se(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pc(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Lf=zr("rcb"),gy=new ye(3e4,6e4);class So{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Xn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return se(function _y(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&xt(Xn().grecaptcha)?Promise.resolve(Xn().grecaptcha):new Promise((I,x)=>{const k=Xn().setTimeout(()=>{x(Ce(p,"network-request-failed"))},gy.get());Xn()[Lf]=()=>{Xn().clearTimeout(k),delete Xn()[Lf];const ce=Xn().grecaptcha;if(!ce||!xt(ce))return void x(Ce(p,"internal-error"));const Ve=ce.render;ce.render=(Ye,Et)=>{const Gt=Ve(Ye,Et);return this.counter++,Gt},this.hostLanguage=_,I(ce)},sn(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Lf,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),x(Ce(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Xn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Uf{load(p){return(0,f.Z)(function*(){return new $d(p)})()}clearedOneInstance(){}}const fr="recaptcha",ul={theme:"light",type:"image"};class ll{constructor(p,_=Object.assign({},ul),I){this.parameters=_,this.type=fr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(I),this.isInvisible="invisible"===this.parameters.size,se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;se(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uf:new So,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(_)||new Promise(k=>{const ee=ce=>{ce&&(p.tokenChangeListeners.delete(ee),k(ce))};p.tokenChangeListeners.add(ee),p.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof p)p(_);else if("string"==typeof p){const I=Xn()[p];"function"==typeof I&&I(_)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){se(Wt()&&!il(),p.auth,"internal-error"),yield function gc(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function pe(w){return re.apply(this,arguments)}(p.auth);se(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ti{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=js._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Ys(w,p,_){return mc.apply(this,arguments)}function mc(){return(mc=(0,f.Z)(function*(w,p,_){const I=gn(w),x=yield cl(I,p,(0,G.m9)(_));return new Ti(x,k=>Lt(I,k))})).apply(this,arguments)}function iu(w,p,_){return ua.apply(this,arguments)}function ua(){return(ua=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w);yield Wa(!1,I,"phone");const x=yield cl(I.auth,p,(0,G.m9)(_));return new Ti(x,k=>Mf(I,k))})).apply(this,arguments)}function Hd(w,p,_){return _c.apply(this,arguments)}function _c(){return(_c=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w),x=yield cl(I.auth,p,(0,G.m9)(_));return new Ti(x,k=>Yl(I,k))})).apply(this,arguments)}function cl(w,p,_){return yc.apply(this,arguments)}function yc(){return yc=(0,f.Z)(function*(w,p,_){var I;const x=yield _.verify();try{let k;if(se("string"==typeof x,w,"argument-error"),se(_.type===fr,w,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const ee=k.session;if("phoneNumber"in k)return se("enroll"===ee.type,w,"internal-error"),(yield function nl(w,p){return pt(w,"POST","/v2/accounts/mfaEnrollment:start",Pe(w,p))}(w,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{se("signin"===ee.type,w,"internal-error");const ce=(null===(I=k.multiFactorHint)||void 0===I?void 0:I.uid)||k.multiFactorUid;return se(ce,w,"missing-multi-factor-info"),(yield function Bd(w,p){return pt(w,"POST","/v2/accounts/mfaSignIn:start",Pe(w,p))}(w,{mfaPendingCredential:ee.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield function Ug(w,p){return ld.apply(this,arguments)}(w,{phoneNumber:k.phoneNumber,recaptchaToken:x});return ee}}finally{_._reset()}}),yc.apply(this,arguments)}function Ui(w,p){return mn.apply(this,arguments)}function mn(){return(mn=(0,f.Z)(function*(w,p){yield ti((0,G.m9)(w),p)})).apply(this,arguments)}let Yi=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=gn(_)}verifyPhoneNumber(_,I){return cl(this.auth,_,(0,G.m9)(I))}static credential(_,I){return js._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:x}=_;return I&&x?js._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function lt(w,p){return p?Zn(p):(se(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Qi extends Oi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Bs(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Bs(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Bs(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function nr(w){return qa(w.auth,new Qi(w),w.bypassAuthState)}function Gd(w){const{auth:p,user:_}=w;return se(_,p,"internal-error"),yd(_,new Qi(w),w.bypassAuthState)}function su(w){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,f.Z)(function*(w){const{auth:p,user:_}=w;return se(_,p,"internal-error"),ti(_,new Qi(w),w.bypassAuthState)})).apply(this,arguments)}class vc{constructor(p,_,I,x,k=!1){this.auth=p,this.resolver=I,this.user=x,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,f.Z)(function*(I,x){p.pendingPromise={resolve:I,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(I,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:k,tenantId:ee,error:ce,type:Ve}=p;if(ce)return void _.reject(ce);const Ye={auth:_.auth,requestUri:I,sessionId:x,tenantId:ee||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ve)(Ye))}catch(Et){_.reject(Et)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return nr;case"linkViaPopup":case"linkViaRedirect":return su;case"reauthViaPopup":case"reauthViaRedirect":return Gd;default:De(this.auth,"internal-error")}}resolve(p){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zd=new ye(2e3,1e4);function Vi(w,p,_){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,f.Z)(function*(w,p,_){const I=gn(w);$e(w,p,_o);const x=lt(I,_);return new Ec(I,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function wc(w,p,_){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w);$e(I.auth,p,_o);const x=lt(I.auth,_);return new Ec(I.auth,"reauthViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}function ou(w,p,_){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w);$e(I.auth,p,_o);const x=lt(I.auth,_);return new Ec(I.auth,"linkViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}let Ec=(()=>{class w extends vc{constructor(_,I,x,k,ee){super(_,I,k,ee),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const I=yield _.execute();return se(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,f.Z)(function*(){St(1===_.filter.length,"Popup operations only handle one event");const I=ds();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,zd.get())};_()}}return w.currentPopupAction=null,w})();const Wd="pendingRedirect",Bi=new Map;class dl extends vc{constructor(p,_,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,f.Z)(function*(){let I=Bi.get(_.auth._key());if(!I){try{const k=(yield function ni(w,p){return au.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;I=()=>Promise.resolve(k)}catch(x){I=()=>Promise.reject(x)}Bi.set(_.auth._key(),I)}return _.bypassAuthState||Bi.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(I,p);if("unknown"!==p.type){if(p.eventId){const x=yield I.auth._redirectUserForId(p.eventId);if(x)return I.user=x,_().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function au(){return(au=(0,f.Z)(function*(w,p){const _=hl(p),I=Vf(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(_));return yield I._remove(_),x})).apply(this,arguments)}function Ic(w,p){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(w,p){return Vf(w)._set(hl(p),"true")})).apply(this,arguments)}function uu(){Bi.clear()}function lu(w,p){Bi.set(w._key(),p)}function Vf(w){return Zn(w._redirectPersistence)}function hl(w){return Jr(Wd,w.config.apiKey,w.name)}function cu(w,p,_){return function qd(w,p,_){return Cc.apply(this,arguments)}(w,p,_)}function Cc(){return(Cc=(0,f.Z)(function*(w,p,_){const I=gn(w);$e(w,p,_o),yield I._initializationPromise;const x=lt(I,_);return yield Ic(x,I),x._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function Dc(w,p,_){return function du(w,p,_){return Si.apply(this,arguments)}(w,p,_)}function Si(){return(Si=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w);$e(I.auth,p,_o),yield I.auth._initializationPromise;const x=lt(I.auth,_);yield Ic(x,I.auth);const k=yield ji(I);return x._openRedirect(I.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function bc(w,p,_){return function mi(w,p,_){return hu.apply(this,arguments)}(w,p,_)}function hu(){return(hu=(0,f.Z)(function*(w,p,_){const I=(0,G.m9)(w);$e(I.auth,p,_o),yield I.auth._initializationPromise;const x=lt(I.auth,_);yield Wa(!1,I,p.providerId),yield Ic(x,I.auth);const k=yield ji(I);return x._openRedirect(I.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function Bf(w,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(w,p){return yield gn(w)._initializationPromise,xo(w,p,!1)})).apply(this,arguments)}function xo(w,p){return fu.apply(this,arguments)}function fu(){return(fu=(0,f.Z)(function*(w,p,_=!1){const I=gn(w),x=lt(I,p),ee=yield new dl(I,x,_).execute();return ee&&!_&&(delete ee.user._redirectEventId,yield I._persistUserIfCurrent(ee.user),yield I._setRedirectUser(null,p)),ee})).apply(this,arguments)}function ji(w){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(w){const p=ds(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class fl{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(_=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function bs(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xi(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var I;if(p.error&&!Xi(p)){const x=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Ce(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const I=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(la(p))}saveEventToCache(p){this.cachedEventUids.add(la(p)),this.lastProcessedEventTime=Date.now()}}function la(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function Xi({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function gr(w){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(w,p={}){return pt(w,"GET","/v1/projects",p)})).apply(this,arguments)}const yy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jf=/^https?/;function ca(){return(ca=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield gr(w);for(const _ of p)try{if(Kd(_))return}catch{}De(w,"unauthorized-domain")})).apply(this,arguments)}function Kd(w){const p=it(),{protocol:_,hostname:I}=new URL(p);if(w.startsWith("chrome-extension://")){const ee=new URL(w);return""===ee.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&ee.hostname===I}if(!jf.test(_))return!1;if(yy.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Mo=new ye(3e4,6e4);function da(){const w=Xn().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Xs=null;const ha=new ye(5e3,15e3),Js="__/auth/iframe",Sc="emulator/auth/iframe",Ts={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ac=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zd(w){const p=w.config;se(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?be(p,Sc):`https://${w.config.authDomain}/${Js}`,I={apiKey:p.apiKey,appName:w.name,v:O.SDK_VERSION},x=Ac.get(w.config.apiHost);x&&(I.eid=x);const k=w._getFrameworks();return k.length&&(I.fw=k.join(",")),`${_}?${(0,G.xO)(I).slice(1)}`}function Yd(){return Yd=(0,f.Z)(function*(w){const p=yield function No(w){return Xs=Xs||function At(w){return new Promise((p,_)=>{var I,x,k;function ee(){da(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{da(),_(Ce(w,"network-request-failed"))},timeout:Mo.get()})}if(null!==(x=null===(I=Xn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(k=Xn().gapi)||void 0===k||!k.load){const ce=zr("iframefcb");return Xn()[ce]=()=>{gapi.load?ee():_(Ce(w,"network-request-failed"))},sn(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Ve=>_(Ve))}ee()}}).catch(p=>{throw Xs=null,p})}(w),Xs}(w),_=Xn().gapi;return se(_,w,"internal-error"),p.open({where:document.body,url:Zd(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ts,dontclear:!0},I=>new Promise(function(){var x=(0,f.Z)(function*(k,ee){yield I.restyle({setHideOnLeave:!1});const ce=Ce(w,"network-request-failed"),Ve=Xn().setTimeout(()=>{ee(ce)},ha.get());function Ye(){Xn().clearTimeout(Ve),k(I)}I.ping(Ye).then(Ye,()=>{ee(ce)})});return function(k,ee){return x.apply(this,arguments)}}()))}),Yd.apply(this,arguments)}const E={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b=500,R=600,V="_blank",Z="http://localhost";class J{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ge="__/auth/handler",ft="emulator/auth/handler",Ot=encodeURIComponent("fac");function Nt(w,p,_,I,x,k){return jn.apply(this,arguments)}function jn(){return(jn=(0,f.Z)(function*(w,p,_,I,x,k){se(w.config.authDomain,w,"auth-domain-config-required"),se(w.config.apiKey,w,"invalid-api-key");const ee={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:O.SDK_VERSION,eventId:x};if(p instanceof _o){p.setDefaultLanguage(w.languageCode),ee.providerId=p.providerId||"",(0,G.xb)(p.getCustomParameters())||(ee.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Et,Gt]of Object.entries(k||{}))ee[Et]=Gt}if(p instanceof Ga){const Et=p.getScopes().filter(Gt=>""!==Gt);Et.length>0&&(ee.scopes=Et.join(","))}w.tenantId&&(ee.tid=w.tenantId);const ce=ee;for(const Et of Object.keys(ce))void 0===ce[Et]&&delete ce[Et];const Ve=yield w._getAppCheckToken(),Ye=Ve?`#${Ot}=${encodeURIComponent(Ve)}`:"";return`${function bt({config:w}){return w.emulator?be(w,ft):`https://${w.authDomain}/${Ge}`}(w)}?${(0,G.xO)(ce).slice(1)}${Ye}`})).apply(this,arguments)}const es="webStorageSupport",$i=class xc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gi,this._completeRedirectFn=xo,this._overrideRedirectResult=lu}_openPopup(p,_,I,x){var k=this;return(0,f.Z)(function*(){var ee;St(null===(ee=k.eventManagers[p._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const ce=yield Nt(p,_,I,it(),x);return function de(w,p,_,I=b,x=R){const k=Math.max((window.screen.availHeight-x)/2,0).toString(),ee=Math.max((window.screen.availWidth-I)/2,0).toString();let ce="";const Ve=Object.assign(Object.assign({},E),{width:I.toString(),height:x.toString(),top:k,left:ee}),Ye=(0,G.z$)().toLowerCase();_&&(ce=N(Ye)?V:_),F(Ye)&&(p=p||Z,Ve.scrollbars="yes");const Et=Object.entries(Ve).reduce((_i,[Po,pa])=>`${_i}${Po}=${pa},`,"");if(function Pt(w=(0,G.z$)()){var p;return Tt(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ye)&&"_self"!==ce)return function Ze(w,p){const _=document.createElement("a");_.href=w,_.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(p||"",ce),new J(null);const Gt=window.open(p||"",ce,Et);se(Gt,w,"popup-blocked");try{Gt.focus()}catch{}return new J(Gt)}(p,ce,ds())})()}_openRedirect(p,_,I,x){var k=this;return(0,f.Z)(function*(){return yield k._originValidation(p),function qs(w){Xn().location.href=w}(yield Nt(p,_,I,it(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:k}=this.eventManagers[_];return x?Promise.resolve(x):(St(k,"If manager is not set, promise should be"),k)}const I=this.initAndGetManager(p);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(p){var _=this;return(0,f.Z)(function*(){const I=yield function Rc(w){return Yd.apply(this,arguments)}(p),x=new fl(p);return I.register("authEvent",k=>(se(k?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=I,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(es,{type:es},x=>{var k;const ee=null===(k=x?.[0])||void 0===k?void 0:k[es];void 0!==ee&&_(!!ee),De(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Tc(w){return ca.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return jt()||L()||Tt()}};class Ai{constructor(p){this.factorId=p}_process(p,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,I);case"signin":return this._finalizeSignIn(p,_.credential);default:return tt("unexpected MultiFactorSessionType")}}}class Kr extends Ai{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Kr(p)}_finalizeEnroll(p,_,I){return function na(w,p){return pt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Pe(w,p))}(p,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function To(w,p){return pt(w,"POST","/v2/accounts/mfaSignIn:finalize",Pe(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pl=(()=>{class w{constructor(){}static assertion(_){return Kr._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var mu="@firebase/auth";class fa{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(I=>{p(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,G.Pz)("authIdTokenMaxAge"),function Hf(w){(0,O._registerComponent)(new ae.wA("auth",(p,{options:_})=>{const I=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),k=p.getProvider("app-check-internal"),{apiKey:ee,authDomain:ce}=I.options;se(ee&&!ee.includes(":"),"invalid-api-key",{appName:I.name});const Ve={apiKey:ee,authDomain:ce,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vs(w)},Ye=new An(I,x,k,Ve);return function ho(w,p){const _=p?.persistence||[],I=(Array.isArray(_)?_:[_]).map(Zn);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(I,p?.popupRedirectResolver)}(Ye,_),Ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,I)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ae.wA("auth-internal",p=>{const _=gn(p.getProvider("auth").getImmediate());return new fa(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(mu,"0.23.2",function _l(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,O.registerVersion)(mu,"0.23.2","esm2017")}("Browser")},2090:(It,Se,B)=>{B.d(Se,{$s:()=>Zn,BH:()=>Me,DV:()=>ki,Dv:()=>Pn,GJ:()=>zn,L:()=>ve,LL:()=>Tn,P0:()=>Be,Pz:()=>Ce,Sg:()=>$e,UG:()=>tt,UI:()=>Ln,US:()=>ae,Wj:()=>lr,Wl:()=>hn,Yr:()=>ye,ZB:()=>te,ZR:()=>pt,aH:()=>De,b$:()=>Wt,cI:()=>tn,dS:()=>Di,eu:()=>ze,g5:()=>O,gK:()=>Qr,gQ:()=>an,h$:()=>me,hl:()=>Re,hu:()=>G,jU:()=>St,lb:()=>Kt,m9:()=>Jr,ne:()=>qt,p$:()=>q,pd:()=>Yr,r3:()=>di,ru:()=>it,tV:()=>K,uI:()=>se,ug:()=>Jt,vZ:()=>gt,w1:()=>Os,w9:()=>xr,xO:()=>Wn,xb:()=>co,z$:()=>Oe,zI:()=>Ue,zd:()=>Hr});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},G=function(z,H){if(!z)throw O(H)},O=function(z){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+z)},ne=function(z){const H=[];let F=0;for(let L=0;L<z.length;L++){let N=z.charCodeAt(L);N<128?H[F++]=N:N<2048?(H[F++]=N>>6|192,H[F++]=63&N|128):55296==(64512&N)&&L+1<z.length&&56320==(64512&z.charCodeAt(L+1))?(N=65536+((1023&N)<<10)+(1023&z.charCodeAt(++L)),H[F++]=N>>18|240,H[F++]=N>>12&63|128,H[F++]=N>>6&63|128,H[F++]=63&N|128):(H[F++]=N>>12|224,H[F++]=N>>6&63|128,H[F++]=63&N|128)}return H},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,L=[];for(let N=0;N<z.length;N+=3){const Y=z[N],Ee=N+1<z.length,nt=Ee?z[N+1]:0,Rt=N+2<z.length,Tt=Rt?z[N+2]:0;let Cn=(15&nt)<<2|Tt>>6,jt=63&Tt;Rt||(jt=64,Ee||(Cn=64)),L.push(F[Y>>2],F[(3&Y)<<4|nt>>4],F[Cn],F[jt])}return L.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(ne(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let F=0,L=0;for(;F<z.length;){const N=z[F++];if(N<128)H[L++]=String.fromCharCode(N);else if(N>191&&N<224){const Y=z[F++];H[L++]=String.fromCharCode((31&N)<<6|63&Y)}else if(N>239&&N<365){const Rt=((7&N)<<18|(63&z[F++])<<12|(63&z[F++])<<6|63&z[F++])-65536;H[L++]=String.fromCharCode(55296+(Rt>>10)),H[L++]=String.fromCharCode(56320+(1023&Rt))}else{const Y=z[F++],Ee=z[F++];H[L++]=String.fromCharCode((15&N)<<12|(63&Y)<<6|63&Ee)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const F=H?this.charToByteMapWebSafe_:this.charToByteMap_,L=[];for(let N=0;N<z.length;){const Y=F[z.charAt(N++)],nt=N<z.length?F[z.charAt(N)]:0;++N;const Tt=N<z.length?F[z.charAt(N)]:64;++N;const Pt=N<z.length?F[z.charAt(N)]:64;if(++N,null==Y||null==nt||null==Tt||null==Pt)throw new we;L.push(Y<<2|nt>>4),64!==Tt&&(L.push(nt<<4&240|Tt>>2),64!==Pt&&L.push(Tt<<6&192|Pt))}return L},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const me=function(z){const H=ne(z);return ae.encodeByteArray(H,!0)},ve=function(z){return me(z).replace(/\./g,"")},K=function(z){try{return ae.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function q(z){return te(void 0,z)}function te(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const F in H)!H.hasOwnProperty(F)||!je(F)||(z[F]=te(z[F],H[F]));return z}function je(z){return"__proto__"!==z}const Ae=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=z&&K(z[1]);return H&&JSON.parse(H)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},Be=z=>{const H=(z=>{var H,F;return null===(F=null===(H=Ae())||void 0===H?void 0:H.emulatorHosts)||void 0===F?void 0:F[z]})(z);if(!H)return;const F=H.lastIndexOf(":");if(F<=0||F+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const L=parseInt(H.substring(F+1),10);return"["===H[0]?[H.substring(1,F-1),L]:[H.substring(0,F),L]},De=()=>{var z;return null===(z=Ae())||void 0===z?void 0:z.config},Ce=z=>{var H;return null===(H=Ae())||void 0===H?void 0:H[`_${z}`]};class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,F)=>{this.resolve=H,this.reject=F})}wrapCallback(H){return(F,L)=>{F?this.reject(F):this.resolve(L),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(F):H(F,L))}}}function $e(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const L=H||"demo-project",N=z.iat||0,Y=z.sub||z.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ee=Object.assign({iss:`https://securetoken.google.com/${L}`,aud:L,iat:N,exp:N+3600,auth_time:N,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},z);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(Ee)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function tt(){var z;const H=null===(z=Ae())||void 0===z?void 0:z.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function St(){return"object"==typeof self&&self.self===self}function it(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Wt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Os(){const z=Oe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function ye(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function ze(){return new Promise((z,H)=>{try{let F=!0;const L="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(L);N.onsuccess=()=>{N.result.close(),F||self.indexedDB.deleteDatabase(L),z(!0)},N.onupgradeneeded=()=>{F=!1},N.onerror=()=>{var Y;H((null===(Y=N.error)||void 0===Y?void 0:Y.message)||"")}}catch(F){H(F)}})}function Ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pt extends Error{constructor(H,F,L){super(F),this.code=H,this.customData=L,this.name="FirebaseError",Object.setPrototypeOf(this,pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}}class Tn{constructor(H,F,L){this.service=H,this.serviceName=F,this.errors=L}create(H,...F){const L=F[0]||{},N=`${this.service}/${H}`,Y=this.errors[H],Ee=Y?function ut(z,H){return z.replace(vt,(F,L)=>{const N=H[L];return null!=N?String(N):`<${L}?>`})}(Y,L):"Error";return new pt(N,`${this.serviceName}: ${Ee} (${N}).`,L)}}const vt=/\{\$([^}]+)}/g;function tn(z){return JSON.parse(z)}function hn(z){return JSON.stringify(z)}const In=function(z){let H={},F={},L={},N="";try{const Y=z.split(".");H=tn(K(Y[0])||""),F=tn(K(Y[1])||""),N=Y[2],L=F.d||{},delete F.d}catch{}return{header:H,claims:F,data:L,signature:N}},xr=function(z){const F=In(z).claims;return!!F&&"object"==typeof F&&F.hasOwnProperty("iat")},zn=function(z){const H=In(z).claims;return"object"==typeof H&&!0===H.admin};function di(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function ki(z,H){if(Object.prototype.hasOwnProperty.call(z,H))return z[H]}function co(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function Ln(z,H,F){const L={};for(const N in z)Object.prototype.hasOwnProperty.call(z,N)&&(L[N]=H.call(F,z[N],N,z));return L}function gt(z,H){if(z===H)return!0;const F=Object.keys(z),L=Object.keys(H);for(const N of F){if(!L.includes(N))return!1;const Y=z[N],Ee=H[N];if(Un(Y)&&Un(Ee)){if(!gt(Y,Ee))return!1}else if(Y!==Ee)return!1}for(const N of L)if(!F.includes(N))return!1;return!0}function Un(z){return null!==z&&"object"==typeof z}function Wn(z){const H=[];for(const[F,L]of Object.entries(z))Array.isArray(L)?L.forEach(N=>{H.push(encodeURIComponent(F)+"="+encodeURIComponent(N))}):H.push(encodeURIComponent(F)+"="+encodeURIComponent(L));return H.length?"&"+H.join("&"):""}function Hr(z){const H={};return z.replace(/^\?/,"").split("&").forEach(L=>{if(L){const[N,Y]=L.split("=");H[decodeURIComponent(N)]=decodeURIComponent(Y)}}),H}function Yr(z){const H=z.indexOf("?");if(!H)return"";const F=z.indexOf("#",H);return z.substring(H,F>0?F:void 0)}class an{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,F){F||(F=0);const L=this.W_;if("string"==typeof H)for(let Pt=0;Pt<16;Pt++)L[Pt]=H.charCodeAt(F)<<24|H.charCodeAt(F+1)<<16|H.charCodeAt(F+2)<<8|H.charCodeAt(F+3),F+=4;else for(let Pt=0;Pt<16;Pt++)L[Pt]=H[F]<<24|H[F+1]<<16|H[F+2]<<8|H[F+3],F+=4;for(let Pt=16;Pt<80;Pt++){const Cn=L[Pt-3]^L[Pt-8]^L[Pt-14]^L[Pt-16];L[Pt]=4294967295&(Cn<<1|Cn>>>31)}let Tt,Zt,N=this.chain_[0],Y=this.chain_[1],Ee=this.chain_[2],nt=this.chain_[3],Rt=this.chain_[4];for(let Pt=0;Pt<80;Pt++){Pt<40?Pt<20?(Tt=nt^Y&(Ee^nt),Zt=1518500249):(Tt=Y^Ee^nt,Zt=1859775393):Pt<60?(Tt=Y&Ee|nt&(Y|Ee),Zt=2400959708):(Tt=Y^Ee^nt,Zt=3395469782);const Cn=(N<<5|N>>>27)+Tt+Rt+Zt+L[Pt]&4294967295;Rt=nt,nt=Ee,Ee=4294967295&(Y<<30|Y>>>2),Y=N,N=Cn}this.chain_[0]=this.chain_[0]+N&4294967295,this.chain_[1]=this.chain_[1]+Y&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+nt&4294967295,this.chain_[4]=this.chain_[4]+Rt&4294967295}update(H,F){if(null==H)return;void 0===F&&(F=H.length);const L=F-this.blockSize;let N=0;const Y=this.buf_;let Ee=this.inbuf_;for(;N<F;){if(0===Ee)for(;N<=L;)this.compress_(H,N),N+=this.blockSize;if("string"==typeof H){for(;N<F;)if(Y[Ee]=H.charCodeAt(N),++Ee,++N,Ee===this.blockSize){this.compress_(Y),Ee=0;break}}else for(;N<F;)if(Y[Ee]=H[N],++Ee,++N,Ee===this.blockSize){this.compress_(Y),Ee=0;break}}this.inbuf_=Ee,this.total_+=F}digest(){const H=[];let F=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let N=this.blockSize-1;N>=56;N--)this.buf_[N]=255&F,F/=256;this.compress_(this.buf_);let L=0;for(let N=0;N<5;N++)for(let Y=24;Y>=0;Y-=8)H[L]=this.chain_[N]>>Y&255,++L;return H}}function qt(z,H){const F=new ht(z,H);return F.subscribe.bind(F)}class ht{constructor(H,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{H(this)}).catch(L=>{this.error(L)})}next(H){this.forEachObserver(F=>{F.next(H)})}error(H){this.forEachObserver(F=>{F.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,F,L){let N;if(void 0===H&&void 0===F&&void 0===L)throw new Error("Missing Observer.");N=function qn(z,H){if("object"!=typeof z||null===z)return!1;for(const F of H)if(F in z&&"function"==typeof z[F])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:F,complete:L},void 0===N.next&&(N.next=Mr),void 0===N.error&&(N.error=Mr),void 0===N.complete&&(N.complete=Mr);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,H)}sendOne(H,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{F(this.observers[H])}catch(L){typeof console<"u"&&console.error&&console.error(L)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mr(){}const Pn=function(z,H,F,L){let N;if(L<H?N="at least "+H:L>F&&(N=0===F?"none":"no more than "+F),N)throw new Error(z+" failed: Was called with "+L+(1===L?" argument.":" arguments.")+" Expects "+N+".")};function Qr(z,H){return`${z} failed: ${H} argument `}function lr(z,H,F,L){if((!L||F)&&"function"!=typeof F)throw new Error(Qr(z,H)+"must be a valid function.")}function Kt(z,H,F,L){if((!L||F)&&("object"!=typeof F||null===F))throw new Error(Qr(z,H)+"must be a valid context object.")}const Di=function(z){const H=[];let F=0;for(let L=0;L<z.length;L++){let N=z.charCodeAt(L);if(N>=55296&&N<=56319){const Y=N-55296;L++,G(L<z.length,"Surrogate pair missing trail surrogate."),N=65536+(Y<<10)+(z.charCodeAt(L)-56320)}N<128?H[F++]=N:N<2048?(H[F++]=N>>6|192,H[F++]=63&N|128):N<65536?(H[F++]=N>>12|224,H[F++]=N>>6&63|128,H[F++]=63&N|128):(H[F++]=N>>18|240,H[F++]=N>>12&63|128,H[F++]=N>>6&63|128,H[F++]=63&N|128)}return H},Jt=function(z){let H=0;for(let F=0;F<z.length;F++){const L=z.charCodeAt(F);L<128?H++:L<2048?H+=2:L>=55296&&L<=56319?(H+=4,F++):H+=3}return H},Bt=1e3,Kn=2,kn=144e5,Nr=.5;function Zn(z,H=Bt,F=Kn){const L=H*Math.pow(F,z),N=Math.round(Nr*L*(Math.random()-.5)*2);return Math.min(kn,L+N)}function Jr(z){return z&&z._delegate?z._delegate:z}},2846:(It,Se,B)=>{var f=B(4650);let G=null;function O(){return G}class oe{}const ae=new f.OlP("DocumentToken");let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function me(){return(0,f.LFG)(K)}()},providedIn:"platform"}),n})();const ve=new f.OlP("Location Initialized");let K=(()=>{class n extends we{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function te(){return new K((0,f.LFG)(ae))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ke(n){return n&&"?"!==n[0]?"?"+n:n}let at=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Ae)},providedIn:"root"}),n})();const _e=new f.OlP("appBaseHref");let Ae=(()=>{class n extends at{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ke(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+Ke(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+Ke(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ke=(()=>{class n extends at{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+Ke(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+Ke(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we),f.LFG(_e,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Te(Me(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ke(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Me(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ke(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ke,n.joinWithSlash=je,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(f.LFG(at))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function De(){return new Be((0,f.LFG)(at))}()},providedIn:"root"}),n})();function Me(n){return n.replace(/\/index.html$/,"")}function Fs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class Er{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ho=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Er(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,l),Bn(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Bn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Bn(n,e){n.context.$implicit=e.item}let as=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split("."),l=-1===i.indexOf("-")?void 0:f.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),qo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();let Gu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Rf((0,f.LFG)(ae),window)}),n})();class Rf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Kl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$s(this.window.history)||$s(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function $s(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _d{}class Pd extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class el extends Pd{static makeCurrent(){!function ne(n){G||(G=n)}(new el)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Qa(){return ta=ta||document.querySelector("base"),ta?ta.getAttribute("href"):null}();return null==t?null:function Gg(n){Cs=Cs||document.createElement("a"),Cs.setAttribute("href",n);const e=Cs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fs(document.cookie,e)}}let Cs,ta=null;const Nf=new f.OlP("TRANSITION_ID"),kd=[{provide:f.ip1,useFactory:function tl(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Nf,ae,f.zs3],multi:!0}];let ic=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=new f.OlP("EventManagerPlugins");let nl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const l=i[o];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xa),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class na{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Od=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let o=i.get(t)??0;return o+=r,o>0?i.set(t,o):i.delete(t),o}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ws=(()=>{class n extends Od{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(o=>o.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Io={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ra=/%COMP%/g,tu=new f.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function rl(n,e){return e.flat(100).map(t=>t.replace(ra,n))}function ac(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gi=(()=>{class n{constructor(t,r,i,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new Fd(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof il?i.applyToHost(t):i instanceof qs&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const l=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestory;switch(r.encapsulation){case f.ifc.Emulated:o=new il(l,h,r,this.appId,m);break;case f.ifc.ShadowDom:return new Xn(l,h,t,r);default:o=new qs(l,h,r,m)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(nl),f.LFG(Ws),f.LFG(f.AFp),f.LFG(tu))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Fd{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Io[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ld(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ld(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Io[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Io[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ac(r)):this.eventManager.addEventListener(e,t,ac(r))}}function Ld(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Xn extends Fd{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=rl(i.id,i.styles);for(const l of o){const h=document.createElement("style");h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class qs extends Fd{constructor(e,t,r,i,o=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=rl(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class il extends qs{constructor(e,t,r,i,o){const l=i+"-"+r.id;super(e,t,r,o,l),this.contentAttr=function Pf(n){return"_ngcontent-%COMP%".replace(ra,n)}(l),this.hostAttr=function oc(n){return"_nghost-%COMP%".replace(ra,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ud=(()=>{class n extends na{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nu=["alt","control","meta","shift"],Vd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let hr=(()=>{class n extends na{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),nu.forEach(v=>{const D=r.indexOf(v);D>-1&&(r.splice(D,1),l+=v+".")}),l+=o,0!=r.length||0===o.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=Vd[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),nu.forEach(l=>{l!==i&&(0,sl[l])(t)&&(o+=l+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Of=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function oa(){el.makeCurrent()},multi:!0},{provide:ae,useFactory:function cc(){return(0,f.RDi)(document),document},deps:[]}]),Do=new f.OlP(""),ru=[{provide:f.rWj,useClass:class Ds{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const h=function(m){l=l||m,o--,0==o&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],bo=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function lc(){return new f.qLn},deps:[]},{provide:Xa,useClass:Ud,multi:!0,deps:[ae,f.R0b,f.Lbi]},{provide:Xa,useClass:hr,multi:!0,deps:[ae]},{provide:gi,useClass:gi,deps:[nl,Ws,f.AFp,tu]},{provide:f.FYo,useExisting:gi},{provide:Od,useExisting:Ws},{provide:Ws,useClass:Ws,deps:[ae]},{provide:nl,useClass:nl,deps:[Xa,f.R0b]},{provide:_d,useClass:ic,deps:[]},[]];let aa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Nf,useExisting:f.AFp},kd]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Do,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...bo,...ru],imports:[qo,f.hGG]}),n})(),Ff=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function To(){return new Ff((0,f.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var mn=B(8996),Yi=B(7669);function lt(...n){const e=(0,Yi.yG)(n);return(0,mn.D)(n,e)}var Qi=B(7579);class nr extends Qi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const su=(0,B(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Fr=B(9751);const{isArray:vc}=Array,{getPrototypeOf:zd,prototype:Vi,keys:Qs}=Object;function wc(n){if(1===n.length){const e=n[0];if(vc(e))return{args:e,keys:null};if(function Ao(n){return n&&"object"==typeof n&&zd(n)===Vi}(e)){const t=Qs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ou=B(4671),Mt=B(4004);const{isArray:Ec}=Array;function Bi(n){return(0,Mt.U)(e=>function Wd(n,e){return Ec(e)?n(...e):n(e)}(n,e))}function dl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ni=B(5403),au=B(9672);function Ic(...n){const e=(0,Yi.yG)(n),t=(0,Yi.jO)(n),{args:r,keys:i}=wc(n);if(0===r.length)return(0,mn.D)([],e);const o=new Fr.y(function Ro(n,e,t=ou.y){return r=>{uu(e,()=>{const{length:i}=n,o=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)uu(e,()=>{const v=(0,mn.D)(n[m],e);let D=!1;v.subscribe((0,ni.x)(r,S=>{o[m]=S,D||(D=!0,h--),h||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>dl(i,l):ou.y));return t?o.pipe(Bi(t)):o}function uu(n,e,t){n?(0,au.f)(t,n,e):e()}var lu=B(8189);function hl(...n){return function Vf(){return(0,lu.J)(1)}()((0,mn.D)(n,(0,Yi.yG)(n)))}var cu=B(8421);function qd(n){return new Fr.y(e=>{(0,cu.Xf)(n()).subscribe(e)})}var Cc=B(9635),Dc=B(576);function du(n,e){const t=(0,Dc.m)(n)?n:()=>n,r=i=>i.error(t());return new Fr.y(e?i=>e.schedule(r,0,i):r)}var Si=B(515),bc=B(727),mi=B(4482);function hu(){return(0,mi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ni.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Bf extends Fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,mi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ni.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bc.w0.EMPTY)}return e}refCount(){return hu()(this)}}function xn(n,e){return(0,mi.e)((t,r)=>{let i=null,o=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,ni.x)(r,m=>{i?.unsubscribe();let v=0;const D=o++;(0,cu.Xf)(n(m,D)).subscribe(i=(0,ni.x)(r,S=>r.next(e?e(m,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function xo(n){return n<=0?()=>Si.E:(0,mi.e)((e,t)=>{let r=0;e.subscribe((0,ni.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ji(n,e){return(0,mi.e)((t,r)=>{let i=0;t.subscribe((0,ni.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var pr=B(5577);function pu(n){return(0,mi.e)((e,t)=>{let r=!1;e.subscribe((0,ni.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fl(n=la){return(0,mi.e)((e,t)=>{let r=!1;e.subscribe((0,ni.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function la(){return new su}function Xi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ji((i,o)=>n(i,o,r)):ou.y,xo(1),t?pu(e):fl(()=>new su))}function bs(n,e){return(0,Dc.m)(e)?(0,pr.z)(n,e,1):(0,pr.z)(n,1)}var gr=B(8505);function Ji(n){return(0,mi.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,ni.x)(t,void 0,void 0,l=>{o=(0,cu.Xf)(n(l,Ji(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function jf(n,e){return(0,mi.e)(function yy(n,e,t,r,i){return(o,l)=>{let h=t,m=e,v=0;o.subscribe((0,ni.x)(l,D=>{const S=v++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Tc(n){return n<=0?()=>Si.E:(0,mi.e)((e,t)=>{let r=[];e.subscribe((0,ni.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ca(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ji((i,o)=>n(i,o,r)):ou.y,Tc(1),t?pu(e):fl(()=>new su))}function da(n){return(0,mi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const At="primary",Xs=Symbol("RouteTitle");class No{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ha(n){return new No(n)}function Js(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],h=n[o];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ts(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Ac(n[i],e[i]))return!1;return!0}function Ac(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Zd(n){return Array.prototype.concat.apply([],n)}function Rc(n){return n.length>0?n[n.length-1]:null}function E(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function b(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,mn.D)(Promise.resolve(n)):lt(n)}const R=!1,V={exact:function Ze(n,e,t){if(!$i(n.segments,e.segments)||!Nt(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ze(n.children[r],e.children[r],t))return!1;return!0},subset:ft},Z={exact:function de(n,e){return Ts(n,e)},subset:function Ge(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ac(n[t],e[t]))},ignored:()=>!0};function J(n,e,t){return V[t.paths](n.root,e.root,t.matrixParams)&&Z[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ft(n,e,t){return Ot(n,e,e.segments,t)}function Ot(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!$i(i,t)||e.hasChildren()||!Nt(i,t,r))}if(n.segments.length===t.length){if(!$i(n.segments,t)||!Nt(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ft(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!($i(n.segments,i)&&Nt(n.segments,i,r)&&n.children[At])&&Ot(n.children[At],e,o,r)}}function Nt(n,e,t){return e.every((r,i)=>Z[t](n[i].parameters,r.parameters))}class jn{constructor(e=new bt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ha(this.queryParams)),this._queryParamMap}toString(){return Qd.serialize(this)}}class bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,E(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gl(this)}}class es{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ha(this.parameters)),this._parameterMap}toString(){return zg(this)}}function $i(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new pl},providedIn:"root"}),n})();class pl{parse(e){const t=new x(e);return new jn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ml(e.root,!0)}`,r=function Wg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${mu(t)}=${mu(i)}`).join("&"):`${mu(t)}=${mu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function $f(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qd=new pl;function gl(n){return n.segments.map(e=>zg(e)).join("/")}function ml(n,e){if(!n.hasChildren())return gl(n);if(e){const t=n.children[At]?ml(n.children[At],!1):"",r=[];return E(n.children,(i,o)=>{o!==At&&r.push(`${o}:${ml(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ai(n,e){let t=[];return E(n.children,(r,i)=>{i===At&&(t=t.concat(e(r,i)))}),E(n.children,(r,i)=>{i!==At&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===At?[ml(n.children[At],!1)]:[`${i}:${ml(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${gl(n)}/${t[0]}`:`${gl(n)}/(${t.join("//")})`}}function gu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mu(n){return gu(n).replace(/%3B/gi,";")}function fa(n){return gu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _l(n){return decodeURIComponent(n)}function Hf(n){return _l(n.replace(/\+/g,"%20"))}function zg(n){return`${fa(n.path)}${function Gf(n){return Object.keys(n).map(e=>`;${fa(e)}=${fa(n[e])}`).join("")}(n.parameters)}`}const vy=/^[^\/()?;=#]+/;function zf(n){const e=n.match(vy);return e?e[0]:""}const w=/^[^=?&#]+/,_=/^[^&#]+/;class x{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bt([],{}):new bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[At]=new bt(e,t)),r}parseSegment(){const e=zf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,R);return this.capture(e),new es(_l(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zf(this.remaining);i&&(r=i,this.capture(r))}e[_l(t)]=_l(r)}parseQueryParam(e){const t=function p(n){const e=n.match(w);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function I(n){const e=n.match(_);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Hf(t),o=Hf(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,R);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=At);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[At]:new bt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,R)}}function k(n){return n.segments.length>0?new bt([],{[At]:n}):n}function ee(n){const e={};for(const r of Object.keys(n.children)){const o=ee(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function ce(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new bt(n.segments.concat(e.segments),e.children)}return n}(new bt(n.segments,e))}function Ve(n){return n instanceof jn}const Ye=!1;function Po(n,e,t,r,i){if(0===t.length)return Ss(e.root,e.root,e.root,r,i);const o=function Nc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Xd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return E(o.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new Xd(t,e,r)}(t);return o.toRoot()?Ss(e.root,e.root,new bt([],{}),r,i):function l(m){const v=function eh(n,e,t,r){if(n.isAbsolute)return new ga(e.root,!0,0);if(-1===r)return new ga(t,t===e.root,0);return function yl(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new f.vHH(4005,Ye&&"Invalid number of '../'");i=r.segments.length}return new ga(r,!1,i-o)}(t,r+(pa(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,m),D=v.processChildren?ma(v.segmentGroup,v.index,o.commands):vl(v.segmentGroup,v.index,o.commands);return Ss(e.root,v.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function pa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Mc(n){return"object"==typeof n&&null!=n&&n.outlets}function Ss(n,e,t,r,i){let l,o={};r&&E(r,(m,v)=>{o[v]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),l=n===e?t:Wf(n,e,t);const h=k(ee(l));return new jn(h,o,i)}function Wf(n,e,t){const r={};return E(n.children,(i,o)=>{r[o]=i===e?t:Wf(i,e,t)}),new bt(n.segments,r)}class Xd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pa(r[0]))throw new f.vHH(4003,Ye&&"Root segment cannot have matrix parameters");const i=r.find(Mc);if(i&&i!==Rc(r))throw new f.vHH(4004,Ye&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ga{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vl(n,e,t){if(n||(n=new bt([],{})),0===n.segments.length&&n.hasChildren())return ma(n,e,t);const r=function wy(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],h=t[r];if(Mc(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Ey(m,v,l))return o;r+=2}else{if(!Ey(m,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new bt(n.segments.slice(0,r.pathIndex),{});return o.children[At]=new bt(n.segments.slice(r.pathIndex),n.children),ma(o,0,i)}return r.match&&0===i.length?new bt(n.segments,{}):r.match&&!n.hasChildren()?qf(n,e,t):r.match?ma(n,0,i):qf(n,e,t)}function ma(n,e,t){if(0===t.length)return new bt(n.segments,{});{const r=function th(n){return Mc(n[0])?n[0].outlets:{[At]:n}}(t),i={};if(!r[At]&&n.children[At]&&1===n.numberOfChildren&&0===n.children[At].segments.length){const o=ma(n.children[At],e,t);return new bt(n.segments,o.children)}return E(r,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[l]=vl(n.children[l],e,o))}),E(n.children,(o,l)=>{void 0===r[l]&&(i[l]=o)}),new bt(n.segments,i)}}function qf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Mc(o)){const m=Kf(o.outlets);return new bt(r,m)}if(0===i&&pa(t[0])){r.push(new es(n.segments[e].path,rE(t[0]))),i++;continue}const l=Mc(o)?o.outlets[At]:`${o}`,h=i<t.length-1?t[i+1]:null;l&&h&&pa(h)?(r.push(new es(l,rE(h))),i+=2):(r.push(new es(l,{})),i++)}return new bt(r,{})}function Kf(n){const e={};return E(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=qf(new bt([],{}),0,t))}),e}function rE(n){const e={};return E(n,(t,r)=>e[r]=`${t}`),e}function Ey(n,e,t){return n==t.path&&Ts(e,t.parameters)}const Zf="imperative";class _a{constructor(e,t){this.id=e,this.url=t}}class Iy extends _a{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wl extends _a{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yf extends _a{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pc extends _a{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Qf extends _a{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nh extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yT extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vT extends _a{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class HN extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wT extends _a{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ET{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dy{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class by{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let IT=(()=>{class n{createUrlTree(t,r,i,o,l,h){return Po(t||r.root,i,o,l,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),DT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return IT.\u0275fac(e)},providedIn:"root"}),n})();class uE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ty(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ty(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ya(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ya(e,this._root).map(t=>t.value)}}function Ty(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ty(n,t);if(r)return r}return null}function ya(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ya(n,t);if(r.length)return r.unshift(e),r}return[]}class As{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bT extends uE{constructor(e,t){super(e),this.snapshot=t,Sy(this,e)}toString(){return this.snapshot.toString()}}function TT(n,e){const t=function GN(n,e){const l=new Kg([],{},{},"",{},At,e,null,n.root,-1,{});return new cE("",new As(l,[]))}(n,e),r=new nr([new es("",{})]),i=new nr({}),o=new nr({}),l=new nr({}),h=new nr(""),m=new Xf(r,i,l,h,o,At,e,t.root);return m.snapshot=t.root,new bT(new As(m,[]),t)}class Xf{constructor(e,t,r,i,o,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,Mt.U)(v=>v[Xs]))??lt(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>ha(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>ha(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ST(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function lE(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Kg{get title(){return this.data?.[Xs]}constructor(e,t,r,i,o,l,h,m,v,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ha(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ha(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cE extends uE{constructor(e,t){super(t),this.url=e,Sy(this,t)}toString(){return dE(this._root)}}function Sy(n,e){e.value._routerState=n,e.children.forEach(t=>Sy(n,t))}function dE(n){const e=n.children.length>0?` { ${n.children.map(dE).join(", ")} } `:"";return`${n.value}${e}`}function Jf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ts(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ts(e.params,t.params)||n.params.next(t.params),function Sc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ts(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ts(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ko(n,e){const t=Ts(n.params,e.params)&&function xc(n,e){return $i(n,e)&&n.every((t,r)=>Ts(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ko(n.parent,e.parent))}function ih(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function hE(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ih(n,r,i);return ih(n,r)})}(n,e,t);return new As(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>ih(n,h)),l}}const r=function fE(n){return new Xf(new nr(n.url),new nr(n.params),new nr(n.queryParams),new nr(n.fragment),new nr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>ih(n,o));return new As(r,i)}}const pE="ngNavigationCancelingError";function AT(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ve(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=RT(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function RT(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pE]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Zg(n){return Yg(n)&&Ve(n.url)}function Yg(n){return n&&n[pE]}class zN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qg,this.attachRef=null}}let Qg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zN,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tp=!1;let Ay=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=At,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Qg),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,tp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,tp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,tp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,tp);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new xT(t,h,i.injector);if(r&&function MT(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class xT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xf?this.route:e===Qg?this.childContexts:this.parent.get(e,t)}}let Ry=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Ay],encapsulation:2}),n})();function xy(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xg(n){const e=n.children&&n.children.map(Xg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=Ry),t}function eo(n){return n.outlet||At}function _E(n,e){const t=n.filter(r=>eo(r)===e);return t.push(...n.filter(r=>eo(r)!==e)),t}function np(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yE{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rh(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),E(i,(o,l)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rh(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rh(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=rh(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new sE(o.value.snapshot))}),e.children.length&&this.forwardEvent(new qg(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Jf(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Jf(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=np(i.snapshot),m=h?.get(f._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class OT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ny{constructor(e,t){this.component=e,this.route=t}}function rp(n,e,t){const r=n._root;return sh(r,e?e._root:null,t,[r.value])}function kc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function sh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=rh(e);return n.children.forEach(l=>{(function vE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const m=function FT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!$i(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$i(n.url,e.url)||!Ts(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ko(n,e)||!Ts(n.queryParams,e.queryParams);default:return!ko(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new OT(r)):(o.data=l.data,o._resolvedData=l._resolvedData),sh(n,e,o.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Ny(h.outlet.component,l))}else l&&ip(e,h,i),i.canActivateChecks.push(new OT(r)),sh(n,null,o.component?h?h.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),E(o,(l,h)=>ip(l,t.getContext(h),i)),i}function ip(n,e,t){const r=rh(n),i=n.value;E(r,(o,l)=>{ip(o,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Ny(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function oh(n){return"function"==typeof n}function _u(n){return n instanceof su||"EmptyError"===n?.name}const Jg=Symbol("INITIAL_VALUE");function El(){return xn(n=>Ic(n.map(e=>e.pipe(xo(1),function fu(...n){const e=(0,Yi.yG)(n);return(0,mi.e)((t,r)=>{(e?hl(n,t,e):hl(n,t)).subscribe(r)})}(Jg)))).pipe((0,Mt.U)(e=>{for(const t of e)if(!0!==t){if(t===Jg)return Jg;if(!1===t||t instanceof jn)return t}return!0}),ji(e=>e!==Jg),xo(1)))}function Vy(n){return(0,Cc.z)((0,gr.b)(e=>{if(Ve(e))throw AT(0,e)}),(0,Mt.U)(e=>!0===e))}const By={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CE(n,e,t,r,i){const o=jy(n,e,t);return o.matched?function ah(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?lt(i.map(l=>{const h=kc(l,n);return b(function Fy(n){return n&&oh(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(El(),Vy()):lt(!0)}(r=xy(e,r),e,t).pipe((0,Mt.U)(l=>!0===l?o:{...By})):lt(o)}function jy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...By}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Js)(t,n,e);if(!i)return{...By};const o={};E(i.posParams,(h,m)=>{o[m]=h.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function uh(n,e,t,r){if(t.length>0&&function HT(n,e,t){return t.some(r=>$y(n,e,r)&&eo(r)!==At)}(n,t,r)){const o=new bt(e,function DE(n,e,t,r){const i={};i[At]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&eo(o)!==At){const l=new bt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[eo(o)]=l}return i}(n,e,r,new bt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function bE(n,e,t){return t.some(r=>$y(n,e,r))}(n,t,r)){const o=new bt(n.segments,function $T(n,e,t,r,i){const o={};for(const l of r)if($y(n,t,l)&&!i[eo(l)]){const h=new bt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[eo(l)]=h}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new bt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function $y(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function TE(n,e,t,r){return!!(eo(n)===r||r!==At&&$y(e,t,n))&&("**"===n.path||jy(e,n,t).matched)}function lh(n,e,t){return 0===e.length&&!n.children[t]}const nm=!1;class yu{constructor(e){this.segmentGroup=e||null}}class ch{constructor(e){this.urlTree=e}}function sp(n){return du(new yu(n))}function Hy(n){return du(new ch(n))}class SE{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=uh(this.urlTree.root,[],[],this.config).segmentGroup,t=new bt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,At).pipe((0,Mt.U)(o=>this.createUrlTree(ee(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ji(o=>{if(o instanceof ch)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof yu?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,At).pipe((0,Mt.U)(i=>this.createUrlTree(ee(i),e.queryParams,e.fragment))).pipe(Ji(i=>{throw i instanceof yu?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,nm)}createUrlTree(e,t,r){const i=k(e);return new jn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Mt.U)(o=>new bt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,mn.D)(i).pipe(bs(o=>{const l=r.children[o],h=_E(t,o);return this.expandSegmentGroup(e,h,l,o).pipe((0,Mt.U)(m=>({segment:m,outlet:o})))}),jf((o,l)=>(o[l.outlet]=l.segment,o),{}),ca())}expandSegment(e,t,r,i,o,l){return(0,mn.D)(r).pipe(bs(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,l).pipe(Ji(v=>{if(v instanceof yu)return lt(null);throw v}))),Xi(h=>!!h),Ji((h,m)=>{if(_u(h))return lh(t,i,o)?lt(new bt([],{})):sp(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,l,h){return TE(i,t,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l):sp(t):sp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Hy(o):this.lineralizeSegments(r,o).pipe((0,pr.z)(l=>{const h=new bt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=jy(t,i,o);if(!h)return sp(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?Hy(S):this.lineralizeSegments(i,S).pipe((0,pr.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=xy(r,e),r.loadChildren?(r._loadedRoutes?lt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Mt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new bt(i,{})))):lt(new bt(i,{}))):CE(t,r,i,e).pipe(xn(({matched:l,consumedSegments:h,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,pr.z)(D=>{const S=D.injector??e,P=D.routes,{segmentGroup:j,slicedSegments:W}=uh(t,h,m,P),ue=new bt(j.segments,j.children);if(0===W.length&&ue.hasChildren())return this.expandChildren(S,P,ue).pipe((0,Mt.U)(rt=>new bt(h,rt)));if(0===P.length&&0===W.length)return lt(new bt(h,{}));const fe=eo(r)===o;return this.expandSegment(S,ue,P,W,fe?At:o,!0).pipe((0,Mt.U)(ot=>new bt(h.concat(ot.segments),ot.children)))})):sp(t)))}getChildConfig(e,t,r){return t.children?lt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?lt({routes:t._loadedRoutes,injector:t._loadedInjector}):function jT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?lt(!0):lt(i.map(l=>{const h=kc(l,n);return b(function ky(n){return n&&oh(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(El(),Vy())}(e,t,r).pipe((0,pr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,gr.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function zT(n){return du(RT(nm,3))}())):lt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return lt(r);if(i.numberOfChildren>1||!i.children[At])return e.redirectTo,du(new f.vHH(4e3,nm));i=i.children[At]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new jn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return E(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return E(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new bt(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,nm);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Gy{}class op{constructor(e,t,r,i,o,l,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=uh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,At).pipe((0,Mt.U)(t=>{if(null===t)return null;const r=new Kg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new As(r,t),o=new cE(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=ST(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,mn.D)(Object.keys(r.children)).pipe(bs(i=>{const o=r.children[i],l=_E(t,i);return this.processSegmentGroup(e,l,o,i)}),jf((i,o)=>i&&o?(i.push(...o),i):null),function Kd(n,e=!1){return(0,mi.e)((t,r)=>{let i=0;t.subscribe((0,ni.x)(r,o=>{const l=n(o,i++);(l||e)&&r.next(o),!l&&r.complete()}))})}(i=>null!==i),pu(null),ca(),(0,Mt.U)(i=>{if(null===i)return null;const o=RE(i);return function KT(n){n.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,mn.D)(t).pipe(bs(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,o)),Xi(l=>!!l),Ji(l=>{if(_u(l))return lh(r,i,o)?lt([]):lt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!TE(t,r,i,o))return lt(null);let l;if("**"===t.path){const h=i.length>0?Rc(i).parameters:{},m=ME(r)+i.length;l=lt({snapshot:new Kg(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(t),eo(t),t.component??t._loadedComponent??null,t,xE(r),m,NE(t)),consumedSegments:[],remainingSegments:[]})}else l=CE(r,t,i,e).pipe((0,Mt.U)(({matched:h,consumedSegments:m,remainingSegments:v,parameters:D})=>{if(!h)return null;const S=ME(r)+m.length;return{snapshot:new Kg(m,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(t),eo(t),t.component??t._loadedComponent??null,t,xE(r),S,NE(t)),consumedSegments:m,remainingSegments:v}}));return l.pipe(xn(h=>{if(null===h)return lt(null);const{snapshot:m,consumedSegments:v,remainingSegments:D}=h;e=t._injector??e;const S=t._loadedInjector??e,P=function ZT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:j,slicedSegments:W}=uh(r,v,D,P.filter(fe=>void 0===fe.redirectTo));if(0===W.length&&j.hasChildren())return this.processChildren(S,P,j).pipe((0,Mt.U)(fe=>null===fe?null:[new As(m,fe)]));if(0===P.length&&0===W.length)return lt([new As(m,[])]);const ue=eo(t)===o;return this.processSegment(S,P,j,W,ue?At:o).pipe((0,Mt.U)(fe=>null===fe?null:[new As(m,fe)]))}))}}function YT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function RE(n){const e=[],t=new Set;for(const r of n){if(!YT(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=RE(r.children);e.push(new As(r.value,i))}return e.filter(r=>!t.has(r))}function xE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ME(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function va(n){return n.data||{}}function NE(n){return n.resolve||{}}function Wy(n){return"string"==typeof n.title||null===n.title}function qy(n){return xn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,Mt.U)(()=>e)):lt(e)})}const dh=new f.OlP("ROUTES");let Zy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return lt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=b(t.loadComponent()).pipe((0,Mt.U)(OE),(0,gr.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),da(()=>{this.componentLoaders.delete(t)})),i=new Bf(r,()=>new Qi.x).pipe(hu());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return lt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Mt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,D=!1;Array.isArray(h)?v=h:(m=h.create(t).injector,v=Zd(m.get(dh,[],f.XFs.Self|f.XFs.Optional)));return{routes:v.map(Xg),injector:m}}),da(()=>{this.childrenLoaders.delete(r)})),l=new Bf(o,()=>new Qi.x).pipe(hu());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return b(t()).pipe((0,Mt.U)(OE),(0,pr.z)(r=>r instanceof f.YKP||Array.isArray(r)?lt(r):(0,mn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function OE(n){return function Oo(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let im=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qi.x,this.configLoader=(0,f.f3M)(Zy),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Kr),this.rootContexts=(0,f.f3M)(Qg),this.navigationId=0,this.afterPreactivation=()=>lt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new ET(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Cy(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new nr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Zf,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ji(r=>0!==r.id),(0,Mt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),xn(r=>{let i=!1,o=!1;return lt(r).pipe((0,gr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xn(l=>{const h=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new Pc(l.id,t.serializeUrl(r.rawUrl),D,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Si.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return FE(l.source)&&(t.browserUrlTree=l.extractedUrl),lt(l).pipe(xn(D=>{const S=this.transitions?.getValue();return this.events.next(new Iy(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),S!==this.transitions?.getValue()?Si.E:Promise.resolve(D)}),function AE(n,e,t,r){return xn(i=>function WT(n,e,t,r,i){return new SE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Mt.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,gr.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},r.urlAfterRedirects=D.urlAfterRedirects}),function XT(n,e,t,r,i){return(0,pr.z)(o=>function zy(n,e,t,r,i,o,l="emptyOnly"){return new op(n,e,t,r,i,l,o).recognize().pipe(xn(h=>null===h?function qT(n){return new Fr.y(e=>e.error(n))}(new Gy):lt(h)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe((0,Mt.U)(l=>({...o,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,gr.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(P,D)}t.browserUrlTree=D.urlAfterRedirects}const S=new nh(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:S,source:P,restoredState:j,extras:W}=l,ue=new Iy(D,this.urlSerializer.serialize(S),P,j);this.events.next(ue);const fe=TT(S,this.rootComponentType).snapshot;return lt(r={...l,targetSnapshot:fe,urlAfterRedirects:S,extras:{...W,skipLocationChange:!1,replaceUrl:!1}})}{const D="";return this.events.next(new Pc(l.id,t.serializeUrl(r.extractedUrl),D,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Si.E}}),(0,gr.b)(l=>{const h=new yT(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,Mt.U)(l=>r={...l,guards:rp(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function em(n,e){return(0,pr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?lt({...t,guardsResult:!0}):function VT(n,e,t,r){return(0,mn.D)(n).pipe((0,pr.z)(i=>function BT(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?lt(o.map(h=>{const m=np(e)??i,v=kc(h,m);return b(function LT(n){return n&&oh(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(Xi())})).pipe(El()):lt(!0)}(i.component,i.route,t,e,r)),Xi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,pr.z)(h=>h&&function wE(n){return"boolean"==typeof n}(h)?function Ly(n,e,t,r){return(0,mn.D)(e).pipe(bs(i=>hl(function Oc(n,e){return null!==n&&e&&e(new iE(n)),lt(!0)}(i.route.parent,r),function tm(n,e){return null!==n&&e&&e(new Dy(n)),lt(!0)}(i.route,r),function Uy(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function Py(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>qd(()=>lt(l.guards.map(m=>{const v=np(l.node)??t,D=kc(m,v);return b(function Oy(n){return n&&oh(n.canActivateChild)}(D)?D.canActivateChild(r,n):v.runInContext(()=>D(r,n))).pipe(Xi())})).pipe(El())));return lt(o).pipe(El())}(n,i.path,t),function IE(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const i=r.map(o=>qd(()=>{const l=np(e)??t,h=kc(o,l);return b(function KN(n){return n&&oh(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Xi())}));return lt(i).pipe(El())}(n,i.route,t))),Xi(i=>!0!==i,!0))}(r,o,n,e):lt(h)),(0,Mt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,gr.b)(l=>{if(r.guardsResult=l.guardsResult,Ve(l.guardsResult))throw AT(0,l.guardsResult);const h=new vT(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),ji(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),qy(l=>{if(l.guards.canActivateChecks.length)return lt(l).pipe((0,gr.b)(h=>{const m=new HN(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),xn(h=>{let m=!1;return lt(h).pipe(function ZN(n,e){return(0,pr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return lt(t);let o=0;return(0,mn.D)(i).pipe(bs(l=>function YN(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!Wy(i)&&(o[Xs]=i.title),function PE(n,e,t,r){const i=function QN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return lt({});const o={};return(0,mn.D)(i).pipe((0,pr.z)(l=>function kE(n,e,t,r){const i=np(e)??r,o=kc(n,i);return b(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[l],e,t,r).pipe(Xi(),(0,gr.b)(h=>{o[l]=h}))),Tc(1),function Mo(n){return(0,Mt.U)(()=>n)}(o),Ji(l=>_u(l)?Si.E:du(l)))}(o,n,e,r).pipe((0,Mt.U)(l=>(n._resolvedData=l,n.data=ST(n,t).resolve,i&&Wy(i)&&(n.data[Xs]=i.title),null)))}(l.route,r,n,e)),(0,gr.b)(()=>o++),Tc(1),(0,pr.z)(l=>o===i.length?lt(t):Si.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,gr.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,gr.b)(h=>{const m=new wT(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),qy(l=>{const h=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,gr.b)(D=>{m.component=D}),(0,Mt.U)(()=>{})));for(const D of m.children)v.push(...h(D));return v};return Ic(h(l.targetSnapshot.root)).pipe(pu(),xo(1))}),qy(()=>this.afterPreactivation()),(0,Mt.U)(l=>{const h=function ep(n,e,t){const r=ih(n,e._root,t?t._root:void 0);return new bT(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,gr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,Mt.U)(r=>(new yE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),xo(1),(0,gr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new wl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),da(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ji(l=>{if(o=!0,Yg(l)){Zg(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new Yf(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),Zg(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||FE(r.source)};t.scheduleNavigation(m,Zf,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Qf(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return Si.E}))}))}cancelNavigationTransition(t,r,i){const o=new Yf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FE(n){return n!==Zf}let LE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===At);return r}getResolvedTitleForRoute(t){return t.data[Xs]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(JT)},providedIn:"root"}),n})(),JT=(()=>{class n extends LE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ff))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(tS)},providedIn:"root"}),n})();class eS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let tS=(()=>{class n extends eS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $t=new f.OlP("",{providedIn:"root",factory:()=>({})});let VE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(BE)},providedIn:"root"}),n})(),BE=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rS(n){throw n}function iS(n,e,t){return e.parse("/")}const jE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ri=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)($t,{optional:!0})||{},this.errorHandler=this.options.errorHandler||rS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iS,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(VE),this.routeReuseStrategy=(0,f.f3M)(UE),this.urlCreationStrategy=(0,f.f3M)(DT),this.titleStrategy=(0,f.f3M)(LE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Zd((0,f.f3M)(dh,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(im),this.urlSerializer=(0,f.f3M)(Kr),this.location=(0,f.f3M)(Be),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=TT(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Zf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Xg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:l;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...o};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=o||null}return null!==D&&(D=this.removeEmptyProps(D)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,D,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ve(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Zf,null,r)}navigate(t,r={skipLocationChange:!1}){return function oS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...jE}:!1===r?{...sS}:r,Ve(t))return J(this.currentUrlTree,t,i);const o=this.parseUrl(t);return J(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let h,m,v,D;return l?(h=l.resolve,m=l.reject,v=l.promise):v=new Promise((S,P)=>{h=S,m=P}),D="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lp=(()=>{class n{constructor(t,r,i,o,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Qi.x;const m=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof wl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ri),f.Y36(Xf),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(at))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&f.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&f.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),aS=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,l){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new f.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof wl&&this.update()})}ngAfterContentInit(){lt(this.links.changes,lt(null)).pipe((0,lu.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,mn.D)(t).pipe((0,lu.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function $E(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ri),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(lp,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&f.Suo(i,lp,5),2&t){let o;f.iGM(o=f.CRH())&&(r.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[f.TTD]}),n})();class Yy{}let Qy=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ji(t=>t instanceof wl),bs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,f.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,h=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,mn.D)(i).pipe((0,lu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):lt(null);const o=i.pipe((0,pr.z)(l=>null===l?lt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,mn.D)([o,l]).pipe((0,lu.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ri),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Yy),f.LFG(Zy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cp=new f.OlP("");let HE=(()=>{class n{constructor(t,r,i,o,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Iy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof wl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof by&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new by(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var to=(()=>((to=to||{})[to.COMPLETE=0]="COMPLETE",to[to.FAILED=1]="FAILED",to[to.REDIRECTING=2]="REDIRECTING",to))();const dp=!1;function Fc(n,e){return{\u0275kind:n,\u0275providers:e}}const Jy=new f.OlP("",{providedIn:"root",factory:()=>!1});function hp(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Ri),i=n.get(GE);1===n.get(om)&&r.initialNavigation(),n.get(zE,null,f.XFs.Optional)?.setUpPreloading(),n.get(cp,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const GE=new f.OlP(dp?"bootstrap done indicator":"",{factory:()=>new Qi.x}),om=new f.OlP(dp?"initial navigation":"",{providedIn:"root",factory:()=>1});function dS(){let n=[];return n=dp?[{provide:f.Xts,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Ri);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function oE(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Fc(1,n)}const zE=new f.OlP(dp?"router preloader":"");function hS(n){return Fc(0,[{provide:zE,useExisting:Qy},{provide:Yy,useExisting:n}])}const ph=!1,gS=new f.OlP(ph?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ev=[Be,{provide:Kr,useClass:pl},Ri,Qg,{provide:Xf,useFactory:function Xy(n){return n.routerState.root},deps:[Ri]},Zy,ph?{provide:Jy,useValue:!0}:[]];function mS(){return new f.PXZ("Router",Ri)}let qE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ev,ph&&r?.enableTracing?dS().\u0275providers:[],{provide:dh,multi:!0,useValue:t},{provide:gS,useFactory:ZE,deps:[[Ri,new f.FiY,new f.tp0]]},{provide:$t,useValue:r||{}},r?.useHash?{provide:at,useClass:ke}:{provide:at,useClass:Ae},{provide:cp,useFactory:()=>{const n=(0,f.f3M)(Gu),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)($t),r=(0,f.f3M)(im),i=(0,f.f3M)(Kr);return t.scrollOffset&&n.setOffset(t.scrollOffset),new HE(i,r,n,e,t)}},r?.preloadingStrategy?hS(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:mS},r?.initialNavigation?yS(r):[],[{provide:YE,useFactory:hp},{provide:f.tb,multi:!0,useExisting:YE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:dh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gS,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ry]}),n})();function ZE(n){if(ph&&n)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function yS(n){return["disabled"===n.initialNavigation?Fc(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Ri);return()=>{e.setUpLocationChangeListener()}}},{provide:om,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fc(2,[{provide:om,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(ve,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ri),o=e.get(GE);(function JN(n,e){n.events.pipe(ji(t=>t instanceof wl||t instanceof Yf||t instanceof Qf||t instanceof Pc),(0,Mt.U)(t=>t instanceof wl||t instanceof Pc?to.COMPLETE:t instanceof Yf&&(0===t.code||1===t.code)?to.REDIRECTING:to.FAILED),ji(t=>t!==to.REDIRECTING),xo(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(im).afterPreactivation=()=>(r(!0),o.closed?lt(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const YE=new f.OlP(ph?"Router Initializer":""),tv=[];let pp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[qE.forRoot(tv),qE]}),n})(),um=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Ay]}),n})(),lm=(()=>{class n{constructor(){this.title="firebaseApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:0,consts:[["id","nav_bar"],["routerLinkActive","active","routerLink","auth"],["routerLink","main"],["routerLink","products"],["id","content"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"ul")(2,"li")(3,"a",1),f._uU(4,"Login/SignIn"),f.qZA()(),f.TgZ(5,"li")(6,"a",2),f._uU(7,"Main"),f.qZA()(),f.TgZ(8,"li")(9,"a",3),f._uU(10,"Products"),f.qZA()()()(),f.TgZ(11,"div",4),f._UZ(12,"app-home"),f.qZA())},dependencies:[lp,aS,um],styles:["#nav_bar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between;list-style-type:none}#nav_bar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#content[_ngcontent-%COMP%]{border:double 1px blueviolet;height:300px;margin:3% 10%}"]}),n})(),QE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-auth"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"auth works!"),f.qZA())}}),n})();var qe=B(5861),$n=B(4976),vu=B(259);class Lc{constructor(e){return e}}class cm{constructor(){return(0,vu.C6)()}}const dm=new f.OlP("angularfire2._apps"),wS={provide:Lc,useFactory:function vS(n){return n&&1===n.length?n[0]:new Lc((0,vu.Mq)())},deps:[[new f.FiY,dm]]},XE={provide:cm,deps:[[new f.FiY,dm]]};function JE(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Lc(r)}}let ES=(()=>{class n{constructor(t){(0,vu.KN)("angularfire",$n.q4.full,"core"),(0,vu.KN)("angularfire",$n.q4.full,"app"),(0,vu.KN)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[wS,XE]}),n})();function IS(n,...e){return{ngModule:ES,providers:[{provide:dm,useFactory:JE(n),multi:!0,deps:[f.R0b,f.zs3,$n.HU,...e]}]}}const oP=(0,$n.u3)(vu.ZF,!0);B(1389);var U=B(2090),yi=B(6881),wa=B(1877),Ea=B(4859);class tI{constructor(){return(0,$n.vb)("auth")}}const cv=new Map,uI={activated:!1,tokenObservers:[]},dv={initialized:!1,enabled:!1};function Dr(n){return cv.get(n)||Object.assign({},uI)}function Cl(){return dv}const vi="https://content-firebaseappcheck.googleapis.com/v1",ro="exchangeDebugToken",mm={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class _h{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,qe.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function yh(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const br=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gp(n,e){return _m.apply(this,arguments)}function _m(){return(_m=(0,qe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,o)}catch(S){throw br.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw br.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw br.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+v,issuedAtTimeMillis:D}})).apply(this,arguments)}const dI="firebase-app-check-database",hI=1,wh="firebase-app-check-store";let ym=null;function vm(n,e){return gv.apply(this,arguments)}function gv(){return(gv=(0,qe.Z)(function*(n,e){const r=(yield function fI(){return ym||(ym=new Promise((n,e)=>{try{const t=indexedDB.open(dI,hI);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(br.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(wh,{keyPath:"compositeKey"})}}catch(t){e(br.create("storage-open",{originalErrorMessage:t?.message}))}}),ym)}()).transaction(wh,"readwrite"),o=r.objectStore(wh).put({compositeKey:n,value:e});return new Promise((l,h)=>{o.onsuccess=m=>{l()},r.onerror=m=>{var v;h(br.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const _p=new wa.Yd("@firebase/app-check");function Em(n,e){return(0,U.hl)()?function LS(n,e){return vm(function wm(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_p.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Cm(){return wp.apply(this,arguments)}function wp(){return(wp=(0,qe.Z)(function*(){const n=Cl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const US={error:"UNKNOWN_ERROR"};function yI(n){return U.US.encodeString(JSON.stringify(n),!1)}function Ep(n){return Dm.apply(this,arguments)}function Dm(){return(Dm=(0,qe.Z)(function*(n,e=!1){const t=n.app;!function Dl(n){if(!Dr(n).activated)throw br.create("use-before-activation",{appName:n.name})}(t);const r=Dr(t);let o,i=r.token;if(i&&!Vc(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Vc(m)?i=m:yield Em(t,void 0))}if(!e&&i&&Vc(i))return{token:i.token};let h,l=!1;if(function Im(){return Cl().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gp(function hv(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${vi}/projects/${t}/apps/${r}:${ro}?key=${i}`,body:{debug_token:e}}}(t,yield Cm()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Em(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Dr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?_p.warn(m.message):_p.error(m),o=m}return i?o?h=Vc(i)?{token:i.token,internalError:o}:Iv(o):(h={token:i.token},r.token=i,yield Em(t,i)):h=Iv(o),l&&function Ev(n,e){const t=Dr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function vv(n,e){const t=Dr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function bm(n){const{app:e}=n,t=Dr(e);let r=t.tokenRefresher;r||(r=function wv(n){const{app:e}=n;return new _h((0,qe.Z)(function*(){let r;if(r=Dr(e).token?yield Ep(n,!0):yield Ep(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Dr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},mm.RETRIAL_MIN_WAIT,mm.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Vc(n){return n.expireTimeMillis-Date.now()>0}function Iv(n){return{token:yI(US),error:n}}class wI{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Dr(this.app);for(const t of e)vv(this.app,t.next);return Promise.resolve()}}const AI="app-check-internal";!function WS(){(0,yi._registerComponent)(new Ea.wA("app-check",n=>function EI(n,e){return new wI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AI).initialize()})),(0,yi._registerComponent)(new Ea.wA(AI,n=>function II(n){return{getToken:e=>Ep(n,e),addTokenListener:e=>function yv(n,e,t,r){const{app:i}=n,o=Dr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Vc(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),bm(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>bm(n))}(n,"INTERNAL",e),removeTokenListener:e=>vv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yi.registerVersion)("@firebase/app-check","0.7.0")}();class Ip{constructor(){return(0,$n.vb)("app-check")}}typeof window<"u"&&window;var st,Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ts={},Rm=Rm||{},Qt=Rv||self;function xm(){}function Cp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Dh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var xv="closure_uid_"+(1e9*Math.random()>>>0),MI=0;function NI(n,e,t){return n.call.apply(n.bind,arguments)}function Mv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ri(n,e,t){return(ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?NI:Mv).apply(null,arguments)}function Dp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ii(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Iu(){this.s=this.s,this.o=this.o}Iu.prototype.s=!1,Iu.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function Mm(n){Object.prototype.hasOwnProperty.call(n,xv)&&n[xv]||(n[xv]=++MI)}(this)},Iu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Nm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Pv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Cp(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let l=0;l<o;l++)n[i+l]=r[l]}else n.push(r)}}function xi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}xi.prototype.h=function(){this.defaultPrevented=!0};var ZS=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",xm,e),Qt.removeEventListener("test",xm,e)}catch{}return n}();function Pm(n){return/^[\s\xa0]*$/.test(n)}var kI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function kv(n,e){return n<e?-1:n>e?1:0}function km(){var n=Qt.navigator;return n&&(n=n.userAgent)?n:""}function Aa(n){return-1!=km().indexOf(n)}function Ov(n){return Ov[" "](n),n}function OI(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}Ov[" "]=xm;var Om,n,YS=Aa("Opera"),bh=Aa("Trident")||Aa("MSIE"),FI=Aa("Edge"),Fv=FI||bh,LI=Aa("Gecko")&&!(-1!=km().toLowerCase().indexOf("webkit")&&!Aa("Edge"))&&!(Aa("Trident")||Aa("MSIE"))&&!Aa("Edge"),QS=-1!=km().toLowerCase().indexOf("webkit")&&!Aa("Edge");function UI(){var n=Qt.document;return n?n.documentMode:void 0}e:{var Lv="",Uv=(n=km(),LI?/rv:([^\);]+)(\)|;)/.exec(n):FI?/Edge\/([\d\.]+)/.exec(n):bh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):QS?/WebKit\/(\S+)/.exec(n):YS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Uv&&(Lv=Uv?Uv[1]:""),bh){var Fm=UI();if(null!=Fm&&Fm>parseFloat(Lv)){Om=String(Fm);break e}}Om=Lv}var VI={},jI=Qt.document&&bh&&(UI()||parseInt(Om,10))||void 0;function Th(n,e){if(xi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(LI){e:{try{Ov(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:$I[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Th.$.h.call(this)}}ii(Th,xi);var $I={2:"touch",3:"pen",4:"mouse"};Th.prototype.h=function(){Th.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sh="closure_listenable_"+(1e6*Math.random()|0),HI=0;function GI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++HI,this.fa=this.ia=!1}function Ra(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Bv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zI(n){const e={};for(const t in n)e[t]=n[t];return e}const Bc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XS(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Bc.length;o++)t=Bc[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ah(n){this.src=n,this.g={},this.h=0}function WI(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Nv(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Ra(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Um(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}Ah.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=Um(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new GI(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var Vm="closure_lm_"+(1e6*Math.random()|0),qI={};function kt(n,e,t,r,i){if(r&&r.once)return ZI(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kt(n,e[o],t,r,i);return null}return t=jm(t),n&&n[Sh]?n.O(e,t,Dh(r)?!!r.capture:!!r,i):KI(n,e,t,!1,r,i)}function KI(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=Dh(i)?!!i.capture:!!i,h=rr(n);if(h||(n[Vm]=h=new Ah(n)),(t=h.add(e,t,r,l,o)).proxy)return t;if(r=function JS(){const e=Bm;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ZS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bp(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ZI(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ZI(n,e[o],t,r,i);return null}return t=jm(t),n&&n[Sh]?n.P(e,t,Dh(r)?!!r.capture:!!r,i):KI(n,e,t,!0,r,i)}function jc(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)jc(n,e[o],t,r,i);else r=Dh(r)?!!r.capture:!!r,t=jm(t),n&&n[Sh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Um(o=n.g[e],t,r,i))&&(Ra(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=rr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Um(e,t,r,i)),(t=-1<n?e[n]:null)&&jv(t))}function jv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Sh])WI(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bp(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rr(e))?(WI(t,n),0==t.h&&(t.src=null,e[Vm]=null)):Ra(n)}}}function bp(n){return n in qI?qI[n]:qI[n]="on"+n}function Bm(n,e){if(n.fa)n=!0;else{e=new Th(e,this);var t=n.listener,r=n.la||n.src;n.ia&&jv(n),n=t.call(r,e)}return n}function rr(n){return(n=n[Vm])instanceof Ah?n:null}var YI="__closure_events_fn_"+(1e9*Math.random()>>>0);function jm(n){return"function"==typeof n?n:(n[YI]||(n[YI]=function(e){return n.handleEvent(e)}),n[YI])}function si(){Iu.call(this),this.i=new Ah(this),this.S=this,this.J=null}function Mi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new xi(e,n);else if(e instanceof xi)e.target=e.target||n;else{var i=e;XS(e=new xi(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=Tp(l,r,!0,e)&&i}if(i=Tp(l=e.g=n,r,!0,e)&&i,i=Tp(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Tp(l=e.g=t[o],r,!1,e)&&i}function Tp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.fa&&l.capture==t){var h=l.listener,m=l.la||l.src;l.ia&&WI(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}ii(si,Iu),si.prototype[Sh]=!0,si.prototype.removeEventListener=function(n,e,t,r){jc(this,n,e,t,r)},si.prototype.N=function(){if(si.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ra(t[r]);delete n.g[e],n.h--}}this.J=null},si.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},si.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $m=Qt.JSON.stringify;function QI(){var n=Sp;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $v,JI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new eA,n=>n.reset());class eA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tA(n){Qt.setTimeout(()=>{throw n},0)}function Rh(n,e){$v||function nA(){var n=Qt.Promise.resolve(void 0);$v=function(){n.then(eC)}}(),Hv||($v(),Hv=!0),Sp.add(n,e)}var Hv=!1,Sp=new class XI{constructor(){this.h=this.g=null}add(e,t){const r=JI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function eC(){for(var n;n=QI();){try{n.h.call(n.g)}catch(t){tA(t)}var e=JI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Hv=!1}function Ap(n,e){si.call(this),this.h=n||1,this.g=e||Qt,this.j=ri(this.qb,this),this.l=Date.now()}function Hm(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Gv(n,e,t){if("function"==typeof n)t&&(n=ri(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ri(n.handleEvent,n)}return 2147483647<Number(e)?-1:Qt.setTimeout(n,e||0)}function xh(n){n.g=Gv(()=>{n.g=null,n.i&&(n.i=!1,xh(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ii(Ap,si),(st=Ap.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Mi(this,"tick"),this.ga&&(Hm(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){Ap.$.N.call(this),Hm(this),delete this.g};class Rp extends Iu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xh(this)}N(){super.N(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xp(n){Iu.call(this),this.h=n,this.g={}}ii(xp,Iu);var tC=[];function nC(n,e,t,r){Array.isArray(t)||(t&&(tC[0]=t.toString()),t=tC);for(var i=0;i<t.length;i++){var o=kt(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function zv(n){Bv(n.g,function(e,t){this.g.hasOwnProperty(t)&&jv(e)},n),n.g={}}function Mp(){this.g=!0}function $c(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function sA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return $m(t)}catch{return e}}(n,t)+(r?" "+r:"")})}xp.prototype.N=function(){xp.$.N.call(this),zv(this)},xp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mp.prototype.Ea=function(){this.g=!1},Mp.prototype.info=function(){};var Mh={},oA=null;function Wv(){return oA=oA||new si}function aA(n){xi.call(this,Mh.Ta,n)}function Nh(n){const e=Wv();Mi(e,new aA(e))}function Np(n,e){xi.call(this,Mh.STAT_EVENT,n),this.stat=e}function ns(n){const e=Wv();Mi(e,new Np(e,n))}function iC(n,e){xi.call(this,Mh.Ua,n),this.size=e}function Ph(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},e)}Mh.Ta="serverreachability",ii(aA,xi),Mh.STAT_EVENT="statevent",ii(Np,xi),Mh.Ua="timingevent",ii(iC,xi);var Al={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qv(){}function aC(){}qv.prototype.h=null;var Zv,Gm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Kv(){xi.call(this,"d")}function zm(){xi.call(this,"c")}function Wm(){}function Cu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new xp(this),this.P=lC,this.V=new Ap(n=Fv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new uC}function uC(){this.i=null,this.g="",this.h=!1}ii(Kv,xi),ii(zm,xi),ii(Wm,qv),Wm.prototype.g=function(){return new XMLHttpRequest},Wm.prototype.i=function(){return{}},Zv=new Wm;var lC=45e3,Yv={},Pp={};function Qv(n,e,t){n.L=1,n.v=Fp(Du(e)),n.s=t,n.S=!0,Xv(n,null)}function Xv(n,e){n.G=Date.now(),kh(n),n.A=Du(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Qm(t.i,"t",r),n.C=0,t=n.l.I,n.h=new uC,n.g=OC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Rp(ri(n.Pa,n,n.g),n.O)),nC(n.U,n.g,"readystatechange",n.nb),e=n.I?zI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Nh(),function rC(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",h=o.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function cC(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function qm(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=uA(n,t),i==Pp){4==e&&(n.o=4,ns(14),r=!1),$c(n.j,n.m,null,"[Incomplete Response]");break}if(i==Yv){n.o=4,ns(15),$c(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$c(n.j,n.m,i,null),Op(n,i)}cC(n)&&i!=Pp&&i!=Yv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ns(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),hw(e),e.L=!0,ns(11))):($c(n.j,n.m,t,"[Invalid Chunked Response]"),Hc(n),kp(n))}function uA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Pp:(t=Number(e.substring(t,r)),isNaN(t)?Yv:(r+=1)+t>e.length?Pp:(e=e.substr(r,t),n.C=r+t,e))}function kh(n){n.Y=Date.now()+n.P,Jv(n,n.P)}function Jv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ph(ri(n.lb,n),e)}function Km(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}function kp(n){0==n.l.H||n.J||kC(n.l,n)}function Hc(n){Km(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,Hm(n.V),zv(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function Op(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Vp(t.h,n)))if(!n.K&&Vp(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;n_(t),Hp(t)}dw(t),ns(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=Ph(ri(t.ib,t),6e3));if(1>=rw(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Wc(t,11)}else if((n.K||t.g==n)&&n_(t),!Pm(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.J=v[1],t.oa=v[2];const D=v[3];null!=D&&(t.qa=D,t.j.info("VER="+t.qa));const S=v[4];null!=S&&(t.Ga=S,t.j.info("SVER="+t.Ga));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const W=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var o=r.h;o.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(iw(o,o.h),o.h=null))}if(r.F){const ue=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.Da=ue,Jn(r.G,r.F,ue))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Fo(r,r.I?r.oa:null,r.Y),l.K){Xm(r.h,l);var h=l,m=r.K;m&&h.setTimeout(m),h.B&&(Km(h),kh(h)),r.g=l}else _A(r);0<t.i.length&&Gp(t)}else"stop"!=v[0]&&"close"!=v[0]||Wc(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Wc(t,7):zc(t):"noop"!=v[0]&&t.l&&t.l.Aa(v),t.A=0)}Nh()}catch{}}function hC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Cp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function dC(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Cp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function lA(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Cp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(st=Cu.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==bu(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const D=bu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||Fv||this.g&&(this.h.h||this.g.ja()||AC(this.g)))){this.J||4!=D||7==e||Nh(),Km(this);var t=this.g.da();this.aa=t;t:if(cC(this)){var r=AC(this.g);n="";var i=r.length,o=4==bu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hc(this),kp(this);var l="";break t}this.h.i=new Qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function rA(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pm(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,ns(12),Hc(this),kp(this);break e}$c(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Op(this,t)}this.S?(qm(this,D,l),Fv&&this.i&&3==D&&(nC(this.U,this.V,"tick",this.mb),this.V.start())):($c(this.j,this.m,l,null),Op(this,l)),4==D&&Hc(this),this.i&&!this.J&&(4==D?kC(this.l,this):(this.i=!1,kh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ns(12)):(this.o=0,ns(13)),Hc(this),kp(this)}}}catch{}},st.mb=function(){if(this.g){var n=bu(this.g),e=this.g.ja();this.C<e.length&&(Km(this),qm(this,n,e),this.i&&4!=n&&kh(this))}},st.cancel=function(){this.J=!0,Hc(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function iA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Nh(),ns(17)),Hc(this),this.o=2,kp(this)):Jv(this,this.Y-n)};var fC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Gc){this.h=void 0!==e?e:n.h,Zm(this,n.j),this.s=n.s,this.g=n.g,Ym(this,n.m),this.l=n.l,e=n.i;var t=new Oh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),pC(this,t),this.o=n.o}else n&&(t=String(n).match(fC))?(this.h=!!e,Zm(this,t[1]||"",!0),this.s=Lp(t[2]||""),this.g=Lp(t[3]||"",!0),Ym(this,t[4]),this.l=Lp(t[5]||"",!0),pC(this,t[6]||"",!0),this.o=Lp(t[7]||"")):(this.h=!!e,this.i=new Oh(null,this.h))}function Du(n){return new Gc(n)}function Zm(n,e,t){n.j=t?Lp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ym(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function pC(n,e,t){e instanceof Oh?(n.i=e,function vC(n,e){e&&!n.j&&(xa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(_C(this,r),Qm(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Up(e,ew)),n.i=new Oh(e,n.h))}function Jn(n,e,t){n.i.set(e,t)}function Fp(n){return Jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Up(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Up(e,mC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Up(e,mC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Up(t,"/"==t.charAt(0)?hA:dA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Up(t,tw)),n.join("")};var mC=/[#\/\?@]/g,dA=/[#\?:]/g,hA=/[#\?]/g,ew=/[#\?@]/g,tw=/#/g;function Oh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xa(n){n.g||(n.g=new Map,n.h=0,n.i&&function cA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _C(n,e){xa(n),e=Fh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function yC(n,e){return xa(n),e=Fh(n,e),n.g.has(e)}function Qm(n,e,t){_C(n,e),0<t.length&&(n.i=null,n.g.set(Fh(n,e),Nm(t)),n.h+=t.length)}function Fh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nw(n){this.l=n||fA,n=Qt.PerformanceNavigationTiming?0<(n=Qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qt.g&&Qt.g.Ka&&Qt.g.Ka()&&Qt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=Oh.prototype).add=function(n,e){xa(this),this.i=null,n=Fh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){xa(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.sa=function(){xa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},st.Z=function(n){xa(this);let e=[];if("string"==typeof n)yC(this,n)&&(e=e.concat(this.g.get(Fh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return xa(this),this.i=null,yC(this,n=Fh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var fA=10;function pA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rw(n){return n.h?1:n.g?n.g.size:0}function Vp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function iw(n,e){n.g?n.g.add(e):n.h=e}function Xm(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function wC(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Nm(n.i)}function Jm(){}function sw(){this.g=new Jm}function EC(n,e,t){const r=t||"";try{hC(n,function(i,o){let l=i;Dh(i)&&(l=$m(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Uh(n){this.l=n.fc||null,this.j=n.ob||!1}function e_(n,e){si.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ow,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nw.prototype.cancel=function(){if(this.i=wC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Jm.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)},Jm.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)},ii(Uh,qv),Uh.prototype.g=function(){return new e_(this.l,this.j)},Uh.prototype.i=function(n){return function(){return n}}({}),ii(e_,si);var ow=0;function CC(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function jp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vh(n)}function Vh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=e_.prototype).open=function(n,e){if(this.readyState!=ow)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vh(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Qt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jp(this)),this.readyState=ow},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vh(this)),this.g&&(this.readyState=3,Vh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;CC(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jp(this):Vh(this),3==this.readyState&&CC(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,jp(this))},st.Ya=function(n){this.g&&(this.response=n,jp(this))},st.ka=function(){this.g&&jp(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(e_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GP=Qt.JSON.parse;function mr(n){si.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=DC,this.L=this.M=!1}ii(mr,si);var DC="",gA=/^https?$/i,zP=["POST","PUT"];function bC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aw(n),t_(n)}function aw(n){n.F||(n.F=!0,Mi(n,"complete"),Mi(n,"error"))}function TC(n){if(n.h&&typeof Rm<"u"&&(!n.C[1]||4!=bu(n)||2!=n.da()))if(n.v&&4==bu(n))Gv(n.La,0,n);else if(Mi(n,"readystatechange"),4==bu(n)){n.h=!1;try{const h=n.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.I).match(fC)[1]||null;if(!i&&Qt.self&&Qt.self.location){var o=Qt.self.location.protocol;i=o.substr(0,o.length-1)}r=!gA.test(i?i.toLowerCase():"")}t=r}if(t)Mi(n,"complete"),Mi(n,"success");else{n.m=6;try{var l=2<bu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",aw(n)}}finally{t_(n)}}}function t_(n,e){if(n.g){SC(n);const t=n.g,r=n.C[0]?xm:null;n.g=null,n.C=null,e||Mi(n,"ready");try{t.onreadystatechange=r}catch{}}}function SC(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function bu(n){return n.g?n.g.readyState:0}function AC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case DC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function RC(n){let e="";return Bv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function uw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=RC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Jn(n,e,t))}function $p(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xC(n){this.Ga=0,this.i=[],this.j=new Mp,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$p("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$p("baseRetryDelayMs",5e3,n),this.hb=$p("retryDelaySeedMs",1e4,n),this.eb=$p("forwardChannelMaxRetries",2,n),this.xa=$p("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new nw(n&&n.concurrentRequestLimit),this.Ja=new sw,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function zc(n){if(lw(n),3==n.H){var e=n.W++,t=Du(n.G);Jn(t,"SID",n.J),Jn(t,"RID",e),Jn(t,"TYPE","terminate"),zp(n,t),(e=new Cu(n,n.j,e,void 0)).L=2,e.v=Fp(Du(t)),t=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(t=Qt.navigator.sendBeacon(e.v.toString(),"")),!t&&Qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=OC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),kh(e)}r_(n)}function Hp(n){n.g&&(hw(n),n.g.cancel(),n.g=null)}function lw(n){Hp(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),n_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Qt.clearTimeout(n.m),n.m=null)}function Gp(n){pA(n.h)||n.m||(n.m=!0,Rh(n.Na,n),n.C=0)}function cw(n,e){var t;t=e?e.m:n.W++;const r=Du(n.G);Jn(r,"SID",n.J),Jn(r,"RID",t),Jn(r,"AID",n.V),zp(n,r),n.o&&n.s&&uw(r,n.o,n.s),t=new Cu(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=NC(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),iw(n.h,t),Qv(t,r,e)}function zp(n,e){n.ma&&Bv(n.ma,function(t,r){Jn(e,r,t)}),n.l&&hC({},function(t,r){Jn(e,r,t)})}function NC(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ri(n.l.Va,n.l,n):null;e:{var i=n.i;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let h=!0;for(let m=0;m<t;m++){let v=i[m].h;const D=i[m].g;if(v-=o,0>v)o=Math.max(0,i[m].h-100),h=!1;else try{EC(D,l,"req"+v+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function _A(n){n.g||n.u||(n.ba=1,Rh(n.Ma,n),n.A=0)}function dw(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Ph(ri(n.Ma,n),Bh(n,n.A)),n.A++,0))}function hw(n){null!=n.B&&(Qt.clearTimeout(n.B),n.B=null)}function PC(n){n.g=new Cu(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Du(n.wa);Jn(e,"RID","rpc"),Jn(e,"SID",n.J),Jn(e,"CI",n.M?"0":"1"),Jn(e,"AID",n.V),Jn(e,"TYPE","xmlhttp"),zp(n,e),n.o&&n.s&&uw(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=Fp(Du(e)),t.s=null,t.S=!0,Xv(t,n)}function n_(n){null!=n.v&&(Qt.clearTimeout(n.v),n.v=null)}function kC(n,e){var t=null;if(n.g==e){n_(n),hw(n),n.g=null;var r=2}else{if(!Vp(n.h,e))return;t=e.F,Xm(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Mi(r=Wv(),new iC(r,t)),Gp(n)}else _A(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function MC(n,e){return!(rw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Ph(ri(n.Na,n,e),Bh(n,n.C)),n.C++,0)))}(n,e)||2==r&&dw(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Wc(n,5);break;case 4:Wc(n,10);break;case 3:Wc(n,6);break;default:Wc(n,2)}}function Bh(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Wc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ri(n.pb,n);t||(t=new Gc("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||Zm(t,"https"),Fp(t)),function IC(n,e){const t=new Mp;if(Qt.Image){const r=new Image;r.onload=Dp(Bp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Dp(Bp,t,r,"TestLoadImage: error",!1,e),r.onabort=Dp(Bp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dp(Bp,t,r,"TestLoadImage: timeout",!1,e),Qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ns(2);n.H=0,n.l&&n.l.za(e),r_(n),lw(n)}function r_(n){if(n.H=0,n.pa=[],n.l){const e=wC(n.h);(0!=e.length||0!=n.i.length)&&(Pv(n.pa,e),Pv(n.pa,n.i),n.h.i.length=0,Nm(n.i),n.i.length=0),n.l.ya()}}function Fo(n,e,t){var r=t instanceof Gc?Du(t):new Gc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Ym(r,r.m);else{var i=Qt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Gc(null,void 0);r&&Zm(o,r),e&&(o.g=e),i&&Ym(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&Jn(r,t,e),Jn(r,"VER",n.qa),zp(n,r),r}function OC(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Ha&&!n.va?new Uh({ob:!0}):n.va)).Oa(n.I),e}function i_(){}function Rl(){if(bh&&!(10<=Number(jI)))throw Error("Environmental error: no available transport.")}function Rs(n,e){si.call(this),this.g=new xC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Pm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pm(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Tu(this)}function FC(n){Kv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function LC(){zm.call(this),this.status=1}function Tu(n){this.g=n}function Lo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function fw(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],l=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;l=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(l<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((o=(e=t+((l=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=o+((l=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function Dn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(st=mr.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zv.g(),this.C=function oC(n){return n.h||(n.h=n.i())}(this.u?this.u:Zv),this.g.onreadystatechange=ri(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void bC(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Qt.FormData&&n instanceof Qt.FormData,!(0<=Nv(zP,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of t)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{SC(this),0<this.B&&((this.L=function mA(n){return bh&&function BI(){return OI(VI,9,function(){let n=0;const e=kI(String(Om)).split("."),t=kI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",o=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=kv(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||kv(0==i[2].length,0==o[2].length)||kv(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.ua,this)):this.A=Gv(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){bC(this,o)}},st.ua=function(){typeof Rm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Mi(this,"complete"),Mi(this,"abort"),t_(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),t_(this,!0)),mr.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?TC(this):this.kb())},st.kb=function(){TC(this)},st.da=function(){try{return 2<bu(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),GP(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=xC.prototype).qa=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Cu(this,this.j,n,void 0);let o=this.s;if(this.U&&(o?(o=zI(o),XS(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=NC(this,i,e),Jn(t=Du(this.G),"RID",n),Jn(t,"CVER",22),this.F&&Jn(t,"X-HTTP-Session-Id",this.F),zp(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(RC(o)))+"&"+e:this.o&&uw(t,this.o,o)),iw(this.h,i),this.bb&&Jn(t,"TYPE","init"),this.P?(Jn(t,"$req",e),Jn(t,"SID","null"),i.ba=!0,Qv(i,t,null)):Qv(i,t,e),this.H=2}}else 3==this.H&&(n?cw(this,n):0==this.i.length||pA(this.h)||cw(this))},st.Ma=function(){if(this.u=null,PC(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=Ph(ri(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,ns(10),Hp(this),PC(this))},st.ib=function(){null!=this.v&&(this.v=null,Hp(this),dw(this),ns(19))},st.pb=function(n){n?(this.j.info("Successfully pinged google.com"),ns(2)):(this.j.info("Failed to ping google.com"),ns(1))},(st=i_.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.Va=function(){},Rl.prototype.g=function(n,e){return new Rs(n,e)},ii(Rs,si),Rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;ns(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=Fo(n,null,n.Y),Gp(n)},Rs.prototype.close=function(){zc(this.g)},Rs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=$m(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&Gp(e)},Rs.prototype.N=function(){this.g.l=null,delete this.j,zc(this.g),delete this.g,Rs.$.N.call(this)},ii(FC,Kv),ii(LC,zm),ii(Tu,i_),Tu.prototype.Ba=function(){Mi(this.g,"a")},Tu.prototype.Aa=function(n){Mi(this.g,new FC(n))},Tu.prototype.za=function(n){Mi(this.g,new LC)},Tu.prototype.ya=function(){Mi(this.g,"b")},ii(Lo,function s_(){this.blockSize=-1}),Lo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Lo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)fw(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){fw(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){fw(this,r),i=0;break}}this.h=i,this.i+=e},Lo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var UC={};function Wp(n){return-128<=n&&128>n?OI(UC,n,function(e){return new Dn([0|e],0>e?-1:0)}):new Dn([0|n],0>n?-1:0)}function Uo(n){if(isNaN(n)||!isFinite(n))return qc;if(0>n)return Ni(Uo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=qp;return new Dn(e,0)}var qp=4294967296,qc=Wp(0),Kp=Wp(1),a_=Wp(16777216);function Su(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function io(n){return-1==n.h}function Ni(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Dn(t,~n.h).add(Kp)}function u_(n,e){return n.add(Ni(e))}function Zp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Kc(n,e){this.g=n,this.h=e}function Yp(n,e){if(Su(e))throw Error("division by zero");if(Su(n))return new Kc(qc,qc);if(io(n))return e=Yp(Ni(n),e),new Kc(Ni(e.g),Ni(e.h));if(io(e))return e=Yp(n,Ni(e)),new Kc(Ni(e.g),e.h);if(30<n.g.length){if(io(n)||io(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Kp,r=e;0>=r.X(n);)t=VC(t),r=VC(r);var i=Zc(t,1),o=Zc(r,1);for(r=Zc(r,2),t=Zc(t,2);!Su(r);){var l=o.add(r);0>=l.X(n)&&(i=i.add(t),o=l),r=Zc(r,1),t=Zc(t,1)}return e=u_(n,i.R(e)),new Kc(i,e)}for(i=qc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(o=Uo(t)).R(e);io(l)||0<l.X(n);)l=(o=Uo(t-=r)).R(e);Su(o)&&(o=Kp),i=i.add(o),n=u_(n,l)}return new Kc(i,n)}function VC(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Dn(t,n.h)}function Zc(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Dn(i,n.h)}(st=Dn.prototype).ea=function(){if(io(this))return-Ni(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:qp+r)*e,e*=qp}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Su(this))return"0";if(io(this))return"-"+Ni(this).toString(n);for(var e=Uo(Math.pow(n,6)),t=this,r="";;){var i=Yp(t,e).g,o=((0<(t=u_(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Su(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return io(n=u_(this,n))?-1:Su(n)?0:1},st.abs=function(){return io(this)?Ni(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),l=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(o&=65535)}return new Dn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(Su(this)||Su(n))return qc;if(io(this))return io(n)?Ni(this).R(Ni(n)):Ni(Ni(this).R(n));if(io(n))return Ni(this.R(Ni(n)));if(0>this.X(a_)&&0>n.X(a_))return Uo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=l*m,Zp(t,2*r+2*i),t[2*r+2*i+1]+=o*m,Zp(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,Zp(t,2*r+2*i+1),t[2*r+2*i+2]+=o*h,Zp(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Dn(t,0)},st.gb=function(n){return Yp(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Dn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Dn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Dn(t,this.h^n.h)},Rl.prototype.createWebChannel=Rl.prototype.g,Rs.prototype.send=Rs.prototype.u,Rs.prototype.open=Rs.prototype.m,Rs.prototype.close=Rs.prototype.close,Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,sC.COMPLETE="complete",aC.EventType=Gm,Gm.OPEN="a",Gm.CLOSE="b",Gm.ERROR="c",Gm.MESSAGE="d",si.prototype.listen=si.prototype.O,mr.prototype.listenOnce=mr.prototype.P,mr.prototype.getLastError=mr.prototype.Sa,mr.prototype.getLastErrorCode=mr.prototype.Ia,mr.prototype.getStatus=mr.prototype.da,mr.prototype.getResponseJson=mr.prototype.Wa,mr.prototype.getResponseText=mr.prototype.ja,mr.prototype.send=mr.prototype.ha,mr.prototype.setWithCredentials=mr.prototype.Oa,Lo.prototype.digest=Lo.prototype.l,Lo.prototype.reset=Lo.prototype.reset,Lo.prototype.update=Lo.prototype.j,Dn.prototype.add=Dn.prototype.add,Dn.prototype.multiply=Dn.prototype.R,Dn.prototype.modulo=Dn.prototype.gb,Dn.prototype.compare=Dn.prototype.X,Dn.prototype.toNumber=Dn.prototype.ea,Dn.prototype.toString=Dn.prototype.toString,Dn.prototype.getBits=Dn.prototype.D,Dn.fromNumber=Uo,Dn.fromString=function o_(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ni(o_(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Uo(Math.pow(e,8)),r=qc,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+o),e);8>o?(o=Uo(Math.pow(e,o)),r=r.R(o).add(Uo(l))):r=(r=r.R(t)).add(Uo(l))}return r};var BC=ts.createWebChannelTransport=function(){return new Rl},yA=ts.getStatEventTarget=function(){return Wv()},l_=ts.ErrorCode=Al,jC=ts.EventType=sC,vA=ts.Event=Mh,pw=ts.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wA=ts.FetchXmlHttpFactory=Uh,wi=ts.WebChannel=aC,jh=ts.XhrIo=mr,EA=ts.Md5=Lo,$h=ts.Integer=Dn;const IA="@firebase/firestore";class Pi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");let Yc="9.22.0";const Ma=new wa.Yd("@firebase/firestore");function Qc(){return Ma.logLevel}function Le(n,...e){if(Ma.logLevel<=wa.in.DEBUG){const t=e.map(gw);Ma.debug(`Firestore (${Yc}): ${n}`,...t)}}function Lr(n,...e){if(Ma.logLevel<=wa.in.ERROR){const t=e.map(gw);Ma.error(`Firestore (${Yc}): ${n}`,...t)}}function so(n,...e){if(Ma.logLevel<=wa.in.WARN){const t=e.map(gw);Ma.warn(`Firestore (${Yc}): ${n}`,...t)}}function gw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Yc}) INTERNAL ASSERTION FAILED: `+n;throw Lr(e),new Error(e)}function Ct(n,e){n||ct()}function Qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class CA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pi.UNAUTHENTICATED))}shutdown(){}}class DA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GC{constructor(e){this.t=e,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ur,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,qe.Z)(function*(){yield v.promise,yield o(r.currentUser)}))},m=v=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ur)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new CA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Pi(e)}}class Hh{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class bA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Hh(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _w{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.T;return this.T=o.token,Le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new mw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function TA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class SA{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function Gh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new ir(0,0))}static max(){return new Dt(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qp{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _n extends Qp{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Qp{construct(e,t,r){return new Vr(e,t,r)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(t)}static emptyPath(){return new Vr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(_n.fromString(e))}static fromName(e){return new Xe(_n.fromString(e).popFirst(5))}static empty(){return new Xe(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new _n(e.slice()))}}function AA(n){return new hs(n.readTime,n.key,-1)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(Dt.min(),Xe.empty(),-1)}static max(){return new hs(Dt.max(),Xe.empty(),-1)}}function YC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xc(n){return QC.apply(this,arguments)}function QC(){return QC=(0,qe.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==RA)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),QC.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,o=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&t()},m=>r(m))}),l=!0,o===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const o=e.length,l=new Array(o);let h=0;for(let m=0;m<o;m++){const v=m;t(e[v]).next(D=>{l[v]=D,++h,h===o&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ie((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}function Au(n){return"IndexedDbTransactionError"===n.name}let xs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function f_(n){return null==n}function p_(n){return 0===n&&1/n==-1/0}function Sw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Aw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hn{constructor(e,t){this.comparator=e,this.root=t||er.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??er.RED,this.left=i??er.EMPTY,this.right=o??er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new er(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1,er.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new er(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rw(this.data.getIterator())}getIteratorFrom(e){return new Rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class Rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rs{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new rs([])}unionWith(e){let t=new vn(Vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class aD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aD("Invalid base64 string: "+i):i}}(e);return new ai(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const UA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kl(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=UA.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tr(n.seconds),nanos:Tr(n.nanos)}}function Tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pa(n){return"string"==typeof n?ai.fromBase64String(n):ai.fromUint8Array(n)}function xw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tg(n){const e=n.mapValue.fields.__previous_value__;return xw(e)?tg(e):e}function ng(n){const e=kl(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class uD{constructor(e,t,r,i,o,l,h,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=v}}class Wh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wh&&e.projectId===this.projectId&&e.database===this.database}}const ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xw(n)?4:cD(n)?9007199254740991:10:ct()}function Bo(n,e){if(n===e)return!0;const t=xu(n);if(t!==xu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ng(n).isEqual(ng(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=kl(r.timestampValue),l=kl(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Pa(n.bytesValue).isEqual(Pa(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Tr(r.geoPointValue.latitude)===Tr(i.geoPointValue.latitude)&&Tr(r.geoPointValue.longitude)===Tr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tr(r.integerValue)===Tr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Tr(r.doubleValue),l=Tr(i.doubleValue);return o===l?p_(o)===p_(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Gh(n.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Sw(o)!==Sw(l))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===l[h]||!Bo(o[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function qh(n,e){return void 0!==(n.values||[]).find(t=>Bo(t,e))}function Mu(n,e){if(n===e)return 0;const t=xu(n),r=xu(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Tr(i.integerValue||i.doubleValue),h=Tr(o.integerValue||o.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return ig(n.timestampValue,e.timestampValue);case 4:return ig(ng(n),ng(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,o){const l=Pa(i),h=Pa(o);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),h=o.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=zt(l[m],h[m]);if(0!==v)return v}return zt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=zt(Tr(i.latitude),Tr(o.latitude));return 0!==l?l:zt(Tr(i.longitude),Tr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],h=o.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=Mu(l[m],h[m]);if(v)return v}return zt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ka.mapValue&&o===ka.mapValue)return 0;if(i===ka.mapValue)return 1;if(o===ka.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=o.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=zt(h[D],v[D]);if(0!==S)return S;const P=Mu(l[h[D]],m[v[D]]);if(0!==P)return P}return zt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ct()}}function ig(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=kl(n),r=kl(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function Nu(n){return __(n)}function __(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=kl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pa(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=__(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${__(r.fields[h])}`;return o+"}"}(n.mapValue):ct();var e}function Jc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lD(n){return!!n&&"integerValue"in n}function v_(n){return!!n&&"arrayValue"in n}function VA(n){return!!n&&"nullValue"in n}function Mw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function w_(n){return!!n&&"mapValue"in n}function sg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Nl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!w_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sg(t)}setAll(e){let t=Vr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=sg(l):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());w_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];w_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Nl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Gi(sg(this.value))}}function dD(n){const e=[];return Nl(n.fields,(t,r)=>{const i=new Vr([t]);if(w_(r)){const o=dD(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new rs(e)}class Mn{constructor(e,t,r,i,o,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Mn(e,0,Dt.min(),Dt.min(),Dt.min(),Gi.empty(),0)}static newFoundDocument(e,t,r,i){return new Mn(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new Mn(e,2,t,Dt.min(),Dt.min(),Gi.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,Dt.min(),Dt.min(),Gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ol{constructor(e,t){this.position=e,this.inclusive=t}}function hD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):Mu(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Nw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bo(n.position[t],e.position[t]))return!1;return!0}class ao{constructor(e,t="asc"){this.field=e,this.dir=t}}function fD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class E_{}class un extends E_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new zA(e,t,r):"array-contains"===t?new mD(e,r):"in"===t?new kw(e,r):"not-in"===t?new _D(e,r):"array-contains-any"===t?new KA(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new WA(e,r):new qA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mu(t,this.value)):null!==t&&xu(this.value)===xu(t)&&this.matchesComparison(Mu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Sn extends E_{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Sn(e,t)}matches(e){return Fl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Fl(n){return"and"===n.op}function Kh(n){return function $A(n){for(const e of n.filters)if(e instanceof Sn)return!1;return!0}(n)&&Fl(n)}function pD(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+Nu(n.value);if(Kh(n))return n.filters.map(e=>pD(e)).join(",");{const e=n.filters.map(t=>pD(t)).join(",");return`${n.op}(${e})`}}function HA(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&Bo(t.value,r.value)):n instanceof Sn?function(t,r){return r instanceof Sn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,l)=>i&&HA(o,r.filters[l]),!0)}(n,e):void ct();var t,r}function Pw(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${Nu(e.value)}`:n instanceof Sn?function(e){return e.op.toString()+" {"+e.getFilters().map(Pw).join(" ,")+"}"}(n):"Filter";var e}class zA extends un{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class WA extends un{constructor(e,t){super(e,"in",t),this.keys=gD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qA extends un{constructor(e,t){super(e,"not-in",t),this.keys=gD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class mD extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return v_(t)&&qh(t.arrayValue,this.value)}}class kw extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qh(this.value.arrayValue,t)}}class _D extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qh(this.value.arrayValue,t)}}class KA extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!v_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qh(this.value.arrayValue,r))}}class ZA{constructor(e,t=null,r=[],i=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.dt=null}}function I_(n,e=null,t=[],r=[],i=null,o=null,l=null){return new ZA(n,e,t,r,i,o,l)}function Pu(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),f_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nu(r)).join(",")),e.dt=t}return e.dt}function C_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nw(n.startAt,e.startAt)&&Nw(n.endAt,e.endAt)}function ag(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ll{constructor(e,t=null,r=[],i=[],o=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function Yh(n){return new Ll(n)}function wD(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ow(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Fw(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ED(n){return null!==n.collectionGroup}function Qh(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=Fw(e),r=Ow(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ao(t)),e.wt.push(new ao(Vr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ao(Vr.keyField(),o))}}}return e.wt}function fs(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=I_(e.path,e.collectionGroup,Qh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Qh(e))t.push(new ao(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Ol(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ol(e.startAt.position,e.startAt.inclusive):null;e._t=I_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Lw(n,e){e.getFirstInequalityField(),Fw(n);const t=n.filters.concat([e]);return new Ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uw(n,e,t){return new Ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function D_(n,e){return C_(fs(n),fs(e))&&n.limitType===e.limitType}function QA(n){return`${Pu(fs(n))}|lt:${n.limitType}`}function ID(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Pw(r)).join(", ")}]`),f_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nu(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nu(r)).join(",")),`Target(${t})`}(fs(n))}; limitType=${n.limitType})`}function b_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Qh(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,l){const h=hD(i,o,l);return i.inclusive?h<=0:h<0}(t.startAt,Qh(t),r)||t.endAt&&!function(i,o,l){const h=hD(i,o,l);return i.inclusive?h>=0:h>0}(t.endAt,Qh(t),r)));var t,r}function s(n){return(e,t)=>{let r=!1;for(const i of Qh(n)){const o=a(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function a(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,o,l){const h=o.data.field(i),m=l.data.field(i);return null!==h&&null!==m?Mu(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}class u{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Aw(this.inner)}size(){return this.innerSize}}const c=new Hn(Xe.comparator);function d(){return c}const g=new Hn(Xe.comparator);function y(...n){let e=g;for(const t of n)e=e.insert(t.key,t);return e}function C(n){let e=g;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function T(){return M()}function A(){return M()}function M(){return new u(n=>n.toString(),(n,e)=>n.isEqual(e))}const $=new Hn(Xe.comparator),X=new vn(Xe.comparator);function Q(...n){let e=X;for(const t of n)e=e.add(t);return e}const Ie=new vn(zt);function Je(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:p_(e)?"-0":e}}function mt(n){return{integerValue:""+n}}function Ft(n,e){return function eD(n){return"number"==typeof n&&Number.isInteger(n)&&!p_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?mt(e):Je(n,e)}class Ne{constructor(){this._=void 0}}function Xt(n,e,t){return n instanceof ug?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&xw(i)&&(i=tg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof lg?JP(n,e):n instanceof cg?ek(n,e):function(r,i){const o=Sr(r,i),l=tk(o)+tk(r.gt);return lD(o)&&lD(r.gt)?mt(l):Je(r.serializer,l)}(n,e)}function sr(n,e,t){return n instanceof lg?JP(n,e):n instanceof cg?ek(n,e):t}function Sr(n,e){return n instanceof T_?lD(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ug extends Ne{}class lg extends Ne{constructor(e){super(),this.elements=e}}function JP(n,e){const t=nk(e);for(const r of n.elements)t.some(i=>Bo(i,r))||t.push(r);return{arrayValue:{values:t}}}class cg extends Ne{constructor(e){super(),this.elements=e}}function ek(n,e){let t=nk(e);for(const r of n.elements)t=t.filter(i=>!Bo(i,r));return{arrayValue:{values:t}}}class T_ extends Ne{constructor(e,t){super(),this.serializer=e,this.gt=t}}function tk(n){return Tr(n.integerValue||n.doubleValue)}function nk(n){return v_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class rV{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function CD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class DD{}function rk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new A_(n.key,Ar.none()):new S_(n.key,n.data,Ar.none());{const t=n.data,r=Gi.empty();let i=new vn(Vr.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new ed(n.key,r,new rs(i.toArray()),Ar.none())}}function iV(n,e,t){n instanceof S_?function(r,i,o){const l=r.value.clone(),h=ok(r.fieldTransforms,i,o.transformResults);l.setAll(h),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ed?function(r,i,o){if(!CD(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ok(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(sk(r)),h.setAll(l),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bw(n,e,t,r){return n instanceof S_?function(i,o,l,h){if(!CD(i.precondition,o))return l;const m=i.value.clone(),v=ak(i.fieldTransforms,h,o);return m.setAll(v),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ed?function(i,o,l,h){if(!CD(i.precondition,o))return l;const m=ak(i.fieldTransforms,h,o),v=o.data;return v.setAll(sk(i)),v.setAll(m),o.convertToFoundDocument(o.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,CD(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function sV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Sr(r.transform,i||null);null!=o&&(null===t&&(t=Gi.empty()),t.set(r.field,o))}return t||null}function ik(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gh(t,r,(i,o)=>function nV(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lg&&r instanceof lg||t instanceof cg&&r instanceof cg?Gh(t.elements,r.elements,Bo):t instanceof T_&&r instanceof T_?Bo(t.gt,r.gt):t instanceof ug&&r instanceof ug);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class S_ extends DD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ed extends DD{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function sk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ok(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,h=e.data.field(o.field);r.set(o.field,sr(l,h,t[i]))}return r}function ak(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,Xt(o,l,e))}return r}class A_ extends DD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JA extends DD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&iV(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=A();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=t.has(i.key)?null:h;const m=rk(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Q())}isEqual(e){return this.batchId===e.batchId&&Gh(this.mutations,e.mutations,(t,r)=>ik(t,r))&&Gh(this.baseMutations,e.baseMutations,(t,r)=>ik(t,r))}}class tR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=$;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new tR(e,t,r,i)}}class nR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oV{constructor(e,t,r){this.alias=e,this.yt=t,this.fieldPath=r}}class aV{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ei,wn;function uk(n){switch(n){default:return ct();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function lk(n){if(void 0===n)return Lr("GRPC error has no .code"),le.UNKNOWN;switch(n){case Ei.OK:return le.OK;case Ei.CANCELLED:return le.CANCELLED;case Ei.UNKNOWN:return le.UNKNOWN;case Ei.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Ei.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Ei.INTERNAL:return le.INTERNAL;case Ei.UNAVAILABLE:return le.UNAVAILABLE;case Ei.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Ei.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Ei.NOT_FOUND:return le.NOT_FOUND;case Ei.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Ei.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Ei.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Ei.ABORTED:return le.ABORTED;case Ei.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Ei.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Ei.DATA_LOSS:return le.DATA_LOSS;default:return ct()}}(wn=Ei||(Ei={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";class rR{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return bD}static getOrCreateInstance(){return null===bD&&(bD=new rR),bD}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let bD=null;const uV=new $h([4294967295,4294967295],0);function dk(n){const e=function ck(){return new TextEncoder}().encode(n),t=new EA;return t.update(e),new Uint8Array(t.digest())}function hk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $h([t,r],0),new $h([i,o],0)]}class iR{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new jw(`Invalid padding: ${t}`);if(r<0)throw new jw(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new jw(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new jw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=$h.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply($h.fromNumber(r)));return 1===i.compare(uV)&&(i=new $h([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=dk(e),[r,i]=hk(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new iR(o,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=dk(e),[r,i]=hk(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class jw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $w{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Hw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $w(Dt.min(),i,new Hn(zt),d(),Q())}}class Hw{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Hw(r,t,Q(),Q(),Q())}}class TD{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class fk{constructor(e,t){this.targetId=e,this.Vt=t}}class pk{constructor(e,t,r=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class gk{constructor(){this.St=0,this.Dt=_k(),this.Ct=ai.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Q(),t=Q(),r=Q();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new Hw(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=_k()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class lV{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=d(),this.zt=mk(),this.Wt=new Hn(zt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const l=o.target;if(ag(l))if(0===i){const h=new Xe(l.path);this.Yt(r,h,Mn.newNoDocument(h,Dt.min()))}else Ct(1===i);else{const h=this.ie(r);if(h!==i){const m=this.re(e,h);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=rR.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,D,S){var P,j,W,ue,fe,We;const ot={localCacheCount:D,existenceFilterCount:S.count},rt=S.unchangedNames;return rt&&(ot.bloomFilter={applied:0===v,hashCount:null!==(P=rt?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(ue=null===(W=null===(j=rt?.bits)||void 0===j?void 0:j.bitmap)||void 0===W?void 0:W.length)&&void 0!==ue?ue:0,padding:null!==(We=null===(fe=rt?.bits)||void 0===fe?void 0:fe.padding)&&void 0!==We?We:0}),ot}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:l=0},hashCount:h=0}=r;let m,v;try{m=Pa(o).toUint8Array()}catch(D){if(D instanceof aD)return so("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{v=new iR(m,l,h)}catch(D){return so(D instanceof jw?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.vt(h)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,l)=>{const h=this.se(l);if(h){if(o.current&&ag(h.target)){const m=new Xe(h.target.path);null!==this.jt.get(m)||this.ae(l,m)||this.Yt(l,m,Mn.newNoDocument(m,e))}o.Mt&&(t.set(l,o.Ot()),o.Ft())}});let r=Q();this.zt.forEach((o,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.jt.forEach((o,l)=>l.setReadTime(e));const i=new $w(e,t,this.Wt,this.jt,r);return this.jt=d(),this.zt=mk(),this.Wt=new Hn(zt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new gk,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new vn(zt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new gk),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function mk(){return new Hn(Xe.comparator)}function _k(){return new Hn(Xe.comparator)}const cV={asc:"ASCENDING",desc:"DESCENDING"},dV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hV={and:"AND",or:"OR"};class fV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sR(n,e){return n.useProto3Json||f_(e)?e:{value:e}}function R_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pV(n,e){return R_(n,e.toTimestamp())}function ui(n){return Ct(!!n),Dt.fromTimestamp(function(e){const t=kl(e);return new ir(t.seconds,t.nanos)}(n))}function oR(n,e){return(t=n,new _n(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vk(n){const e=_n.fromString(n);return Ct(Ak(e)),e}function Gw(n,e){return oR(n.databaseId,e.path)}function Ul(n,e){const t=vk(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(Ek(t))}function aR(n,e){return oR(n.databaseId,e)}function zw(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ek(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ik(n,e,t){return{name:Gw(n,e),fields:t.value.mapValue.fields}}function Ww(n,e){let t;if(e instanceof S_)t={update:Ik(n,e.key,e.value)};else if(e instanceof A_)t={delete:Gw(n,e.key)};else if(e instanceof ed)t={update:Ik(n,e.key,e.data),updateMask:IV(e.fieldMask)};else{if(!(e instanceof JA))return ct();t={verify:Gw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ug)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof lg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof cg)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof T_)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:pV(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function Dk(n,e){return{documents:[aR(n,e.path)]}}function lR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=aR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=aR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return Sk(Sn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(m){if(0!==m.length)return m.map(v=>{return{field:Xh((D=v).field),direction:vV(D.dir)};var D})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=sR(n,e.limit);var h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function bk(n){let e=function wk(n){const e=vk(n);return 4===e.length?_n.emptyPath():Ek(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let o=[];t.where&&(o=function(D){const S=Tk(D);return S instanceof Sn&&Kh(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new ao(x_((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,f_(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new Ol((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new Ol(D.values||[],!D.before)}(t.endAt)),function YA(n,e,t,r,i,o,l,h){return new Ll(n,e,t,r,i,o,l,h)}(e,i,l,o,h,"F",m,v)}function Tk(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=x_(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=x_(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=x_(e.unaryFilter.field);return un.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=x_(e.unaryFilter.field);return un.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?un.create(x_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Sn.create(e.compositeFilter.filters.map(t=>Tk(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function vV(n){return cV[n]}function wV(n){return dV[n]}function EV(n){return hV[n]}function Xh(n){return{fieldPath:n.canonicalString()}}function x_(n){return Vr.fromServerFormat(n.fieldPath)}function Sk(n){return n instanceof un?function(e){if("=="===e.op){if(Mw(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NAN"}};if(VA(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mw(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NAN"}};if(VA(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xh(e.field),op:wV(e.op),value:e.value}}}(n):n instanceof Sn?function(e){const t=e.getFilters().map(r=>Sk(r));return 1===t.length?t[0]:{compositeFilter:{op:EV(e.op),filters:t}}}(n):ct()}function IV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ak(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class td{constructor(e,t,r,i,o=Dt.min(),l=Dt.min(),h=ai.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new td(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new td(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new td(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new td(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Rk{constructor(e){this.fe=e}}function cR(n){const e=bk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Uw(e,e.limit,"L"):e}class pg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Tr(e.integerValue));else if("doubleValue"in e){const r=Tr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),p_(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Pa(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?cD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ct()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Xe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}pg.Ve=new pg;class MV{constructor(){this.rn=new mR}addToCollectionParentIndex(e,t){return this.rn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(hs.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class mR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(_n.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(_n.comparator)).toArray()}}new Uint8Array(0);class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class mg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new mg(0)}static Mn(){return new mg(-1)}}class LV{constructor(){this.changes=new u(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tO{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Bw(r.mutation,i,rs.empty(),ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Q()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Q()){const i=T();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=y();return o.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=T();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Q()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let o=d();const l=M(),h=M();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof ed)?o=o.insert(v.key,v):void 0!==D?(l.set(v.key,D.mutation.getFieldMask()),Bw(D.mutation,v,D.mutation.getFieldMask(),ir.now())):l.set(v.key,rs.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((v,D)=>l.set(v,D)),t.forEach((v,D)=>{var S;return h.set(v,new BV(D,null!==(S=l.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=M();let i=new Hn((l,h)=>l-h),o=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||rs.empty();D=h.applyToLocalView(v,D),r.set(m,D);const S=(i.get(h.batchId)||Q()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),v=m.key,D=m.value,S=A();D.forEach(P=>{if(!o.has(P)){const j=rk(t.get(P),r.get(P));null!==j&&S.set(P,j),o=o.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ED(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ie.resolve(T());let h=-1,m=o;return l.next(v=>ie.forEach(v,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),o.get(D)?ie.resolve():this.remoteDocumentCache.getEntry(e,D).next(P=>{m=m.insert(D,P)}))).next(()=>this.populateOverlays(e,v,o)).next(()=>this.computeViews(e,m,v,Q())).next(D=>({batchId:h,changes:C(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=y();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=y();return this.indexManager.getCollectionParents(e,i).next(l=>ie.forEach(l,h=>{const m=(v=t,D=h.child(i),new Ll(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,S)=>{o=o.insert(D,S)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((h,m)=>{const v=m.getKey();null===o.get(v)&&(o=o.insert(v,Mn.newInvalidDocument(v)))});let l=y();return o.forEach((h,m)=>{const v=i.get(h);void 0!==v&&Bw(v.mutation,m,rs.empty(),ir.now()),b_(t,m)&&(l=l.insert(h,m))}),l})}}class jV{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ie.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:ui(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:cR(r.bundledQuery),readTime:ui(r.readTime)}),ie.resolve();var r}}class $V{constructor(){this.overlays=new Hn(Xe.comparator),this.ls=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=T();return ie.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=T(),o=t.length+1,l=new Xe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Hn((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=o.get(v.largestBatchId);null===D&&(D=T(),o=o.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=T(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return ie.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new nR(t,r));let o=this.ls.get(t);void 0===o&&(o=Q(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class _R{constructor(){this.fs=new vn(zi.ds),this.ws=new vn(zi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new zi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new zi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Xe(new _n([])),r=new zi(t,e),i=new zi(t,e+1),o=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),o.push(l.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Xe(new _n([])),r=new zi(t,e),i=new zi(t,e+1);let o=Q();return this.ws.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new zi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class zi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Xe.comparator(e.key,t.key)||zt(e.As,t.As)}static _s(e,t){return zt(e.As,t.As)||Xe.comparator(e.key,t.key)}}class HV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new vn(zi.ds)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const l=new eR(o,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new zi(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zi(t,0),i=new zi(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);o.push(h)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(zt);return t.forEach(i=>{const o=new zi(i,0),l=new zi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,l],h=>{r=r.add(h.As)})}),ie.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Xe.isDocumentKey(o)||(o=o.child(""));const l=new zi(new Xe(o),0);let h=new vn(zt);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m.As)),!0)},l),ie.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ie.forEach(t.mutations,i=>{const o=new zi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new zi(t,0),i=this.Rs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GV{constructor(e){this.Ds=e,this.docs=new Hn(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=d();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Mn.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=d();const l=t.path,h=new Xe(l.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:v,value:{document:D}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||YC(AA(D),r)<=0||(i.has(D.key)||b_(t,D))&&(o=o.insert(D.key,D.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ct()}Cs(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zV(this)}getSize(e){return ie.resolve(this.size)}}class zV extends LV{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class WV{constructor(e){this.persistence=e,this.xs=new u(t=>Pu(t),C_),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new _R,this.targetCount=0,this.Ms=mg.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ie.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new mg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Fn(t),ie.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ie.waitFor(o).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.ks.containsKey(t))}}class yR{constructor(e,t){this.$s={},this.overlays={},this.Os=new xs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new WV(this),this.indexManager=new MV,this.remoteDocumentCache=new GV(r=>this.referenceDelegate.Ls(r)),this.serializer=new Rk(t),this.qs=new jV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $V,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new HV(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new qV(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return ie.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class qV extends qP{constructor(e){super(),this.currentSequenceNumber=e}}class OD{constructor(e){this.persistence=e,this.Qs=new _R,this.js=null}static zs(e){return new OD(e)}get Ws(){if(this.js)return this.js;throw ct()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ws,r=>{const i=Xe.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ie.or([()=>ie.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class IR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Q(),i=Q();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new IR(e,t.fromCache,r,i)}}class rO{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(wD(t))return ie.resolve(null);let r=fs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Uw(t,null,"F"),r=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Q(...o);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,h);return this.zi(t,v,l,m.readTime)?this.Ki(e,Uw(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return wD(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const l=this.ji(t,o);return this.zi(t,l,r,i)?this.Qi(e,t):(Qc()<=wa.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ID(t)),this.Wi(e,l,t,function ZC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new hs(i,Xe.empty(),e)}(i,-1)))})}ji(e,t){let r=new vn(s(e));return t.forEach((i,o)=>{b_(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return Qc()<=wa.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",ID(t)),this.Ui.getDocumentsMatchingQuery(e,t,hs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class ZV{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Hn(zt),this.Yi=new u(o=>Pu(o),C_),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function sO(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,qe.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let m=Q();for(const v of i){l.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of o){h.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:l,addedBatchIds:h}))})})}),CR.apply(this,arguments)}function oO(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function XV(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function k_(n,e,t){return DR.apply(this,arguments)}function DR(){return DR=(0,qe.Z)(function*(n,e,t){const r=Qe(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Au(l))throw l;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),DR.apply(this,arguments)}function UD(n,e,t){const r=Qe(n);let i=Dt.min(),o=Q();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const D=Qe(h),S=D.Yi.get(v);return void 0!==S?ie.resolve(D.Ji.get(S)):D.Bs.getTargetData(m,v)}(r,l,fs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{o=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?o:Q())).next(h=>(function cO(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}(r,function XA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),h),{documents:h,ir:o})))}class RR{constructor(){this.activeTargetIds=function He(){return Ie}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fO{constructor(){this.Hr=new RR,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new RR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tB{Yr(e){}shutdown(){}}class pO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let jD=null;function MR(){return null===jD?jD=268435456+Math.round(2147483648*Math.random()):jD++,"0x"+jD.toString(16)}const nB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rB{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const gs="WebChannelConnection";class iB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const l=MR(),h=this.To(e,t);Le("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const m={};return this.Eo(m,i,o),this.Ao(e,h,m,r).then(v=>(Le("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw so("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v})}vo(e,t,r,i,o,l){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${nB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=MR();return new Promise((l,h)=>{const m=new jh;m.setWithCredentials(!0),m.listenOnce(jC.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case l_.NO_ERROR:const D=m.getResponseJson();Le(gs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(D)),l(D);break;case l_.TIMEOUT:Le(gs,`RPC '${e}' ${o} timed out`),h(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case l_.HTTP_ERROR:const S=m.getStatus();if(Le(gs,`RPC '${e}' ${o} failed with status:`,S,"response text:",m.getResponseText()),S>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const j=P?.error;if(j&&j.status&&j.message){const W=function(ue){const fe=ue.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(fe)>=0?fe:le.UNKNOWN}(j.status);h(new xe(W,j.message))}else h(new xe(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new xe(le.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Le(gs,`RPC '${e}' ${o} completed.`)}});const v=JSON.stringify(i);Le(gs,`RPC '${e}' ${o} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=MR(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=BC(),h=yA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new wA({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const D=o.join("");Le(gs,`Creating RPC '${e}' stream ${i}: ${D}`,m);const S=l.createWebChannel(D,m);let P=!1,j=!1;const W=new rB({ro:fe=>{j?Le(gs,`Not sending because RPC '${e}' stream ${i} is closed:`,fe):(P||(Le(gs,`Opening RPC '${e}' stream ${i} transport.`),S.open(),P=!0),Le(gs,`RPC '${e}' stream ${i} sending:`,fe),S.send(fe))},oo:()=>S.close()}),ue=(fe,We,ot)=>{fe.listen(We,rt=>{try{ot(rt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return ue(S,wi.EventType.OPEN,()=>{j||Le(gs,`RPC '${e}' stream ${i} transport opened.`)}),ue(S,wi.EventType.CLOSE,()=>{j||(j=!0,Le(gs,`RPC '${e}' stream ${i} transport closed`),W.wo())}),ue(S,wi.EventType.ERROR,fe=>{j||(j=!0,so(gs,`RPC '${e}' stream ${i} transport errored:`,fe),W.wo(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),ue(S,wi.EventType.MESSAGE,fe=>{var We;if(!j){const ot=fe.data[0];Ct(!!ot);const _t=ot.error||(null===(We=ot[0])||void 0===We?void 0:We.error);if(_t){Le(gs,`RPC '${e}' stream ${i} received error:`,_t);const nn=_t.status;let ln=function(Go){const py=Ei[Go];if(void 0!==py)return lk(py)}(nn),Ki=_t.message;void 0===ln&&(ln=le.INTERNAL,Ki="Unknown error status: "+nn+" with message "+_t.message),j=!0,W.wo(new xe(ln,Ki)),S.close()}else Le(gs,`RPC '${e}' stream ${i} received:`,ot),W._o(ot)}}),ue(h,vA.STAT_EVENT,fe=>{fe.stat===pw.PROXY?Le(gs,`RPC '${e}' stream ${i} detected buffering proxy`):fe.stat===pw.NOPROXY&&Le(gs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{W.fo()},0),W}}function $D(){return typeof document<"u"?document:null}function t0(n){return new fV(n,!0)}class NR{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class mO{constructor(e,t,r,i,o,l,h,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new NR(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,qe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,qe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,qe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,qe.Z)(function*(){e.state=0,e.start()}))}tu(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sB extends mO{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function mV(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(Ct(void 0===v||"string"==typeof v),ai.fromBase64String(v||"")):(Ct(void 0===v||v instanceof Uint8Array),ai.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?le.UNKNOWN:lk(m.code);return new xe(v,m.message||"")}(l);t=new pk(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ul(n,r.document.name),o=ui(r.document.updateTime),l=r.document.createTime?ui(r.document.createTime):Dt.min(),h=new Gi({mapValue:{fields:r.document.fields}}),m=Mn.newFoundDocument(i,o,l,h);t=new TD(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Ul(n,r.document),o=r.readTime?ui(r.readTime):Dt.min(),l=Mn.newNoDocument(i,o);t=new TD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ul(n,r.document);t=new TD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,{count:i=0,unchangedNames:o}=r,l=new aV(i,o);t=new fk(r.targetId,l)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?ui(o.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=zw(this.serializer),t.addTarget=function(i,o){let l;const h=o.target;if(l=ag(h)?{documents:Dk(i,h)}:{query:lR(i,h)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=yk(i,o.resumeToken);const m=sR(i,o.expectedCount);null!==m&&(l.expectedCount=m)}else if(o.snapshotVersion.compareTo(Dt.min())>0){l.readTime=R_(i,o.snapshotVersion.toTimestamp());const m=sR(i,o.expectedCount);null!==m&&(l.expectedCount=m)}return l}(this.serializer,e);const r=function yV(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=zw(this.serializer),t.removeTarget=e,this.Wo(t)}}class oB extends mO{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function _V(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let o=ui(r.updateTime?r.updateTime:i);return o.isEqual(Dt.min())&&(o=ui(i)),new rV(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.cu(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=zw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ww(this.serializer,r))};this.Wo(t)}}class aB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(le.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(e,t,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}function PR(){return PR=(0,qe.Z)(function*(n,e,t){var r;const i=Qe(n),{request:o,du:l}=function(D,S,P){const j=lR(D,S),W={},ue=[];let fe=0;return P.forEach(We=>{const ot="aggregate_"+fe++;W[ot]=We.alias,"count"===We.yt?ue.push({alias:ot,count:{}}):"avg"===We.yt?ue.push({alias:ot,avg:{field:Xh(We.fieldPath)}}):"sum"===We.yt&&ue.push({alias:ot,sum:{field:Xh(We.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:ue,structuredQuery:j.structuredQuery},parent:j.parent},du:W}}(i.serializer,fs(e),t),h=o.parent;i.connection.po||delete o.parent;const m=(yield i.vo("RunAggregationQuery",h,o,1)).filter(D=>!!D.result);Ct(1===m.length);const v=null===(r=m[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(v).reduce((D,S)=>(D[l[S]]=v[S],D),{})}),PR.apply(this,arguments)}class lB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Lr(t),this.mu=!1):Le("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class cB{constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(h=>{r.enqueueAndForget((0,qe.Z)(function*(){var m;nf(l)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,qe.Z)(function*(v){const D=Qe(v);D.vu.add(4),yield O_(D),D.bu.set("Unknown"),D.vu.delete(4),yield n0(D)}),function(v){return m.apply(this,arguments)})(l))}))}),this.bu=new lB(r,i)}}function n0(n){return kR.apply(this,arguments)}function kR(){return kR=(0,qe.Z)(function*(n){if(nf(n))for(const e of n.Ru)yield e(!0)}),kR.apply(this,arguments)}function O_(n){return OR.apply(this,arguments)}function OR(){return OR=(0,qe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),OR.apply(this,arguments)}function HD(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),UR(t)?LR(t):L_(t).Ko()&&FR(t,e))}function r0(n,e){const t=Qe(n),r=L_(t);t.Au.delete(e),r.Ko()&&_O(t,e),0===t.Au.size&&(r.Ko()?r.jo():nf(t)&&t.bu.set("Unknown"))}function FR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}L_(n).su(e)}function _O(n,e){n.Vu.qt(e),L_(n).iu(e)}function LR(n){n.Vu=new lV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),L_(n).start(),n.bu.gu()}function UR(n){return nf(n)&&!L_(n).Uo()&&n.Au.size>0}function nf(n){return 0===Qe(n).vu.size}function yO(n){n.Vu=void 0}function dB(n){return VR.apply(this,arguments)}function VR(){return VR=(0,qe.Z)(function*(n){n.Au.forEach((e,t)=>{FR(n,e)})}),VR.apply(this,arguments)}function hB(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,qe.Z)(function*(n,e){yO(n),UR(n)?(n.bu.Iu(e),LR(n)):n.bu.set("Unknown")}),BR.apply(this,arguments)}function fB(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,qe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof pk&&2===e.state&&e.cause)try{yield(r=(0,qe.Z)(function*(i,o){const l=o.cause;for(const h of o.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield GD(n,r)}else if(e instanceof TD?n.Vu.Ht(e):e instanceof fk?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield oO(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.Vu.ce(o);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(h.resumeToken,o))}}),l.targetMismatches.forEach((h,m)=>{const v=i.Au.get(h);if(!v)return;i.Au.set(h,v.withResumeToken(ai.EMPTY_BYTE_STRING,v.snapshotVersion)),_O(i,h);const D=new td(v.target,h,m,v.sequenceNumber);FR(i,D)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield GD(n,r)}var r}),jR.apply(this,arguments)}function GD(n,e,t){return $R.apply(this,arguments)}function $R(){return $R=(0,qe.Z)(function*(n,e,t){if(!Au(e))throw e;n.vu.add(1),yield O_(n),n.bu.set("Offline"),t||(t=()=>oO(n.localStore)),n.asyncQueue.enqueueRetryable((0,qe.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield n0(n)}))}),$R.apply(this,arguments)}function vO(n,e){return e().catch(t=>GD(n,t,e))}function F_(n){return HR.apply(this,arguments)}function HR(){return HR=(0,qe.Z)(function*(n){const e=Qe(n),t=rf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;pB(e);)try{const i=yield XV(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,gB(e,i)}catch(i){yield GD(e,i)}wO(e)&&EO(e)}),HR.apply(this,arguments)}function pB(n){return nf(n)&&n.Eu.length<10}function gB(n,e){n.Eu.push(e);const t=rf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function wO(n){return nf(n)&&!rf(n).Uo()&&n.Eu.length>0}function EO(n){rf(n).start()}function mB(n){return GR.apply(this,arguments)}function GR(){return GR=(0,qe.Z)(function*(n){rf(n).hu()}),GR.apply(this,arguments)}function _B(n){return zR.apply(this,arguments)}function zR(){return zR=(0,qe.Z)(function*(n){const e=rf(n);for(const t of n.Eu)e.uu(t.mutations)}),zR.apply(this,arguments)}function yB(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,qe.Z)(function*(n,e,t){const r=n.Eu.shift(),i=tR.from(r,e,t);yield vO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield F_(n)}),WR.apply(this,arguments)}function vB(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,qe.Z)(function*(n,e){var t;e&&rf(n).ou&&(yield(t=(0,qe.Z)(function*(r,i){if(uk(o=i.code)&&o!==le.ABORTED){const l=r.Eu.shift();rf(r).Qo(),yield vO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield F_(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),wO(n)&&EO(n)}),qR.apply(this,arguments)}function IO(n,e){return KR.apply(this,arguments)}function KR(){return KR=(0,qe.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=nf(t);t.vu.add(3),yield O_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield n0(t)}),KR.apply(this,arguments)}function YR(){return YR=(0,qe.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield n0(t)):e||(t.vu.add(2),yield O_(t),t.bu.set("Unknown"))}),YR.apply(this,arguments)}function L_(n){return n.Su||(n.Su=function(e,t,r){const i=Qe(e);return i.fu(),new sB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:dB.bind(null,n),ao:hB.bind(null,n),nu:fB.bind(null,n)}),n.Ru.push(function(){var e=(0,qe.Z)(function*(t){t?(n.Su.Qo(),UR(n)?LR(n):n.bu.set("Unknown")):(yield n.Su.stop(),yO(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function rf(n){return n.Du||(n.Du=function(e,t,r){const i=Qe(e);return i.fu(),new oB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:mB.bind(null,n),ao:vB.bind(null,n),au:_B.bind(null,n),cu:yB.bind(null,n)}),n.Ru.push(function(){var e=(0,qe.Z)(function*(t){t?(n.Du.Qo(),yield F_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class QR{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,h=new QR(e,t,l,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U_(n,e){if(Lr("AsyncQueue",`${e}: ${n}`),Au(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class V_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=y(),this.sortedSet=new Hn(this.comparator)}static emptySet(e){return new V_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof V_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new V_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CO{constructor(){this.Cu=new Hn(Xe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ct():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class B_{constructor(e,t,r,i,o,l,h,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new B_(e,t,V_.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&D_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class wB{constructor(){this.Nu=void 0,this.listeners=[]}}class EB{constructor(){this.queries=new u(e=>QA(e),D_),this.onlineState="Unknown",this.ku=new Set}}function XR(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,qe.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new wB),i)try{o.Nu=yield t.onListen(r)}catch(l){const h=U_(l,`Initialization of query '${ID(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&nx(t)}),JR.apply(this,arguments)}function ex(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,qe.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),tx.apply(this,arguments)}function IB(n,e){const t=Qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&nx(t)}function CB(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function nx(n){n.ku.forEach(e=>{e.next()})}class rx{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new B_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=B_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class TO{constructor(e){this.key=e}}class SO{constructor(e){this.key=e}}class AO{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Q(),this.mutatedKeys=Q(),this.tc=s(e),this.ec=new V_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new CO,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),j=b_(this.query,S)?S:null,W=!!P&&this.mutatedKeys.has(P.key),ue=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let fe=!1;P&&j?P.data.isEqual(j.data)?W!==ue&&(r.track({type:3,doc:j}),fe=!0):this.rc(P,j)||(r.track({type:2,doc:j}),fe=!0,(m&&this.tc(j,m)>0||v&&this.tc(j,v)<0)&&(h=!0)):!P&&j?(r.track({type:0,doc:j}),fe=!0):P&&!j&&(r.track({type:1,doc:P}),fe=!0,(m||v)&&(h=!0)),fe&&(j?(l=l.add(j),o=ue?o.add(D):o.delete(D)):(l=l.delete(D),o=o.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),o=o.delete(D.key),r.track({type:1,doc:D})}return{ec:l,ic:r,zi:h,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((v,D)=>function(S,P){const j=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return j(S)-j(P)}(v.type,D.type)||this.tc(v.doc,D.doc)),this.oc(r);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==o.length||m?{snapshot:new B_(this.query,e.ec,i,o,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new CO,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Q(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new SO(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new TO(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Q();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return B_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class TB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class SB{constructor(e){this.key=e,this.fc=!1}}class AB{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new u(h=>QA(h),D_),this._c=new Map,this.mc=new Set,this.gc=new Hn(Xe.comparator),this.yc=new Map,this.Ic=new _R,this.Tc={},this.Ec=new Map,this.Ac=mg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function RB(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,qe.Z)(function*(n,e){const t=function Sx(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NB.bind(null,e),e.dc.nu=IB.bind(null,e.eventManager),e.dc.Pc=CB.bind(null,e.eventManager),e}(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const l=yield function P_(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,ie.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new td(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,fs(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield function sx(n,e,t,r,i){return ox.apply(this,arguments)}(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&HD(t.remoteStore,l)}return i}),ix.apply(this,arguments)}function ox(){return ox=(0,qe.Z)(function*(n,e,t,r,i){n.Rc=(S,P,j)=>{return(W=(0,qe.Z)(function*(ue,fe,We,ot){let rt=fe.view.sc(We);rt.zi&&(rt=yield UD(ue.localStore,fe.query,!1).then(({documents:ln})=>fe.view.sc(ln,rt)));const _t=ot&&ot.targetChanges.get(fe.targetId),nn=fe.view.applyChanges(rt,ue.isPrimaryClient,_t);return mx(ue,fe.targetId,nn.cc),nn.snapshot}),function(ue,fe,We,ot){return W.apply(this,arguments)})(n,S,P,j);var W};const o=yield UD(n.localStore,e,!0),l=new AO(e,o.ir),h=l.sc(o.documents),m=Hw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(h,n.isPrimaryClient,m);mx(n,t,v.cc);const D=new TB(e,t,l);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),ox.apply(this,arguments)}function xB(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,qe.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!D_(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield k_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),r0(t.remoteStore,r.targetId),j_(t,r.targetId)}).catch(Xc))):(j_(t,r.targetId),yield k_(t.localStore,r.targetId,!0))}),ax.apply(this,arguments)}function ux(){return ux=(0,qe.Z)(function*(n,e,t){const r=function Ax(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kB.bind(null,e),e}(n);try{const i=yield function(o,l){const h=Qe(o),m=ir.now(),v=l.reduce((P,j)=>P.add(j.key),Q());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let j=d(),W=Q();return h.Zi.getEntries(P,v).next(ue=>{j=ue,j.forEach((fe,We)=>{We.isValidDocument()||(W=W.add(fe))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,j)).next(ue=>{D=ue;const fe=[];for(const We of l){const ot=sV(We,D.get(We.key).overlayedDocument);null!=ot&&fe.push(new ed(We.key,ot,dD(ot.value.mapValue),Ar.exists(!0)))}return h.mutationQueue.addMutationBatch(P,m,fe,l)}).next(ue=>{S=ue;const fe=ue.applyToLocalDocumentSet(D,W);return h.documentOverlayCache.saveOverlays(P,ue.batchId,fe)})}).then(()=>({batchId:S.batchId,changes:C(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,h){let m=o.Tc[o.currentUser.toKey()];m||(m=new Hn(zt)),m=m.insert(l,h),o.Tc[o.currentUser.toKey()]=m}(r,i.batchId,t),yield nd(r,i.changes),yield F_(r.remoteStore)}catch(i){const o=U_(i,"Failed to persist write");t.reject(o)}}),ux.apply(this,arguments)}function RO(n,e){return lx.apply(this,arguments)}function lx(){return lx=(0,qe.Z)(function*(n,e){const t=Qe(n);try{const r=yield function QV(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((D,S)=>{const P=i.get(S);if(!P)return;h.push(t.Bs.removeMatchingKeys(o,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(o,D.addedDocuments,S)));let j=P.withSequenceNumber(o.currentSequenceNumber);var W,ue,fe;null!==e.targetMismatches.get(S)?j=j.withResumeToken(ai.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):D.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(D.resumeToken,r)),i=i.insert(S,j),ue=j,fe=D,(0===(W=P).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(o,j))});let m=d(),v=Q();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,D))}),h.push(function aO(n,e,t){let r=Q(),i=Q();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=d();return t.forEach((h,m)=>{const v=o.get(h);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Dt.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Le("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",m.version)}),{nr:l,sr:i}})}(o,l,e.documentUpdates).next(D=>{m=D.nr,v=D.sr})),!r.isEqual(Dt.min())){const D=t.Bs.getLastRemoteSnapshotVersion(o).next(S=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(D)}return ie.waitFor(h).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,v)).next(()=>m)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.yc.get(o);l&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?Ct(l.fc):i.removedDocuments.size>0&&(Ct(l.fc),l.fc=!1))}),yield nd(t,r,e)}catch(r){yield Xc(r)}}),lx.apply(this,arguments)}function xO(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(o,l){const h=Qe(o);h.onlineState=l;let m=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.Mu(l)&&(m=!0)}),m&&nx(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function NB(n,e,t){return cx.apply(this,arguments)}function cx(){return cx=(0,qe.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let l=new Hn(Xe.comparator);l=l.insert(o,Mn.newNoDocument(o,Dt.min()));const h=Q().add(o),m=new $w(Dt.min(),new Map,new Hn(zt),l,h);yield RO(r,m),r.gc=r.gc.remove(o),r.yc.delete(e),_x(r)}else yield k_(r.localStore,e,!1).then(()=>j_(r,e,t)).catch(Xc)}),cx.apply(this,arguments)}function PB(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,qe.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield function YV(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const D=m.batch,S=D.keys();let P=ie.resolve();return S.forEach(j=>{P=P.next(()=>v.getEntry(h,j)).next(W=>{const ue=m.docVersions.get(j);Ct(null!==ue),W.version.compareTo(ue)<0&&(D.applyToRemoteDocument(W,m),W.isValidDocument()&&(W.setReadTime(m.commitVersion),v.addEntry(W)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Q();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);gx(t,r,null),px(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nd(t,i)}catch(i){yield Xc(i)}}),dx.apply(this,arguments)}function kB(n,e,t){return hx.apply(this,arguments)}function hx(){return hx=(0,qe.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(o,l){const h=Qe(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.mutationQueue.lookupMutationBatch(m,l).next(D=>(Ct(null!==D),v=D.keys(),h.mutationQueue.removeMutationBatch(m,D))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>h.localDocuments.getDocuments(m,v))})}(r.localStore,e);gx(r,e,t),px(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nd(r,i)}catch(i){yield Xc(i)}}),hx.apply(this,arguments)}function px(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function gx(n,e,t){const r=Qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function j_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||MO(n,r)})}function MO(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(r0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),_x(n))}function mx(n,e,t){for(const r of t)r instanceof TO?(n.Ic.addReference(r.key,e),FB(n,r)):r instanceof SO?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||MO(n,r.key)):ct()}function FB(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.mc.add(r),_x(n))}function _x(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Xe(_n.fromString(e)),r=n.Ac.next();n.yc.set(r,new SB(t)),n.gc=n.gc.insert(t,r),HD(n.remoteStore,new td(fs(Yh(t.path)),r,"TargetPurposeLimboResolution",xs.ct))}}function nd(n,e,t){return yx.apply(this,arguments)}function yx(){return yx=(0,qe.Z)(function*(n,e,t){const r=Qe(n),i=[],o=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,m)=>{l.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const D=IR.Li(m.targetId,v);o.push(D)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,qe.Z)(function*(m,v){const D=Qe(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ie.forEach(v,P=>ie.forEach(P.Fi,j=>D.persistence.referenceDelegate.addReference(S,P.targetId,j)).next(()=>ie.forEach(P.Bi,j=>D.persistence.referenceDelegate.removeReference(S,P.targetId,j)))))}catch(S){if(!Au(S))throw S;Le("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const j=D.Ji.get(P),ue=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.Ji=D.Ji.insert(P,ue)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,o))}),yx.apply(this,arguments)}function LB(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,qe.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield sO(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nd(t,r.er)}var i}),vx.apply(this,arguments)}function UB(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return Q().add(r.key);{let i=Q();const o=t._c.get(e);if(!o)return i;for(const l of o){const h=t.wc.get(l);i=i.unionWith(h.view.nc)}return i}}class zD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,qe.Z)(function*(){t.serializer=t0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function iO(n,e,t,r){return new ZV(n,e,t,r)}(this.persistence,new rO,e.initialUser,this.serializer)}createPersistence(e){return new yR(OD.zs,this.serializer)}createSharedClientState(e){return new fO}terminate(){var e=this;return(0,qe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $_{initialize(e,t){var r=this;return(0,qe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>xO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=LB.bind(null,r.syncEngine),yield function ZR(n,e){return YR.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new EB}createDatastore(e){const t=t0(e.databaseInfo.databaseId),r=new iB(e.databaseInfo);return new aB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>xO(this.syncEngine,h,0),l=pO.D()?new pO:new tB,new cB(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,h,m,v){const D=new AB(r,i,o,l,h,m);return v&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,qe.Z)(function*(t){const r=Qe(t);Le("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield O_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class WD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ZB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,qe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,qe.Z)(function*(o,l){const h=Qe(o),m=zw(h.serializer)+"/documents",v={documents:l.map(j=>Gw(h.serializer,j))},D=yield h.vo("BatchGetDocuments",m,v,l.length),S=new Map;D.forEach(j=>{const W=function gV(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Ul(t,r.found.name),o=ui(r.found.updateTime),l=r.found.createTime?ui(r.found.createTime):Dt.min(),h=new Gi({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(i,o,l,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Ul(t,r.missing),o=ui(r.readTime);return Mn.newNoDocument(i,o)}(n,e):ct()}(h.serializer,j);S.set(W.key.toString(),W)});const P=[];return l.forEach(j=>{const W=S.get(j.toString());Ct(!!W),P.push(W)}),P}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new A_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,qe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Xe.fromPath(i);e.mutations.push(new JA(o,e.precondition(o)))}),yield(r=(0,qe.Z)(function*(i,o){const l=Qe(i),h=zw(l.serializer)+"/documents",m={writes:o.map(v=>Ww(l.serializer,v))};yield l.Io("Commit",h,m)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Ar.exists(!1):Ar.updateTime(t):Ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ar.updateTime(t)}return Ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class YB{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new NR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,qe.Z)(function*(){const t=new ZB(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!f_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uk(t)}return!1}}class QB{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pi.UNAUTHENTICATED,this.clientId=SA.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,qe.Z)(function*(h){Le("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Le("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,qe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,qe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=U_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function qD(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,qe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,qe.Z)(function*(o){r.isEqual(o)||(yield sO(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Rx.apply(this,arguments)}function xx(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,qe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function Nx(n){return Px.apply(this,arguments)}(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>IO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>IO(e.remoteStore,o)),n._onlineComponents=e}),Mx.apply(this,arguments)}function Px(){return Px=(0,qe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function LO(n){return"FirebaseError"===n.name?n.code===le.FAILED_PRECONDITION||n.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;so("Error using user provided cache. Falling back to memory cache: "+t),yield qD(n,new zD)}}else Le("FirestoreClient","Using default OfflineComponentProvider"),yield qD(n,new zD);return n._offlineComponents}),Px.apply(this,arguments)}function KD(n){return kx.apply(this,arguments)}function kx(){return kx=(0,qe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le("FirestoreClient","Using user provided OnlineComponentProvider"),yield xx(n,n._uninitializedComponentsProvider._online)):(Le("FirestoreClient","Using default OnlineComponentProvider"),yield xx(n,new $_))),n._onlineComponents}),kx.apply(this,arguments)}function BO(n){return KD(n).then(e=>e.datastore)}function H_(n){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,qe.Z)(function*(n){const e=yield KD(n),t=e.eventManager;return t.onListen=RB.bind(null,e.syncEngine),t.onUnlisten=xB.bind(null,e.syncEngine),t}),Fx.apply(this,arguments)}function HO(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const GO=new Map;function Lx(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zO(n){if(!Xe.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WO(n){if(Xe.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=YD(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class KO{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function oj(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=HO(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class s0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new HC;switch(t.type){case"firstParty":return new bA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GO.get(e);t&&(Le("ComponentProvider","Removing Datastore"),GO.delete(e),t.terminate())}(this),Promise.resolve()}}class li{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new li(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Vl extends is{constructor(e,t,r){super(e,t,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new li(this.firestore,null,new Xe(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function ZO(n,e,...t){if(n=(0,U.m9)(n),Lx("collection","path",e),n instanceof s0){const r=_n.fromString(e,...t);return WO(r),new Vl(n,null,r)}{if(!(n instanceof li||n instanceof Vl))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return WO(r),new Vl(n.firestore,null,r)}}function YO(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=SA.A()),Lx("doc","path",e),n instanceof s0){const r=_n.fromString(e,...t);return zO(r),new li(n,null,new Xe(r))}{if(!(n instanceof li||n instanceof Vl))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return zO(r),new li(n.firestore,n instanceof Vl?n.converter:null,new Xe(r))}}class uj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new NR(this,"async_queue_retry"),this.Xc=()=>{const t=$D();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=$D();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=$D();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ur;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,qe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Au(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Lr("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=QR.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&ct()}verifyOperationInProgress(){}sa(){var e=this;return(0,qe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Ux(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class _r extends s0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XO(this),this._firestoreClient.terminate()}}function QD(n,e){const t="object"==typeof n?n:(0,yi.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,yi._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,U.P0)("firestore");o&&function aj(n,e,t,r={}){var i;const o=(n=yn(n,s0))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&so("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Pi.MOCK_USER;else{l=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Pi(m)}n._authCredentials=new DA(new CA(l,h))}}(i,...o)}return i}function Ii(n){return n._firestoreClient||XO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function XO(n){var e,t,r;const i=n._freezeSettings(),o=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new uD(n._databaseId,h,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,HO(v.experimentalLongPollingOptions),v.useFetchStreams));var h,v;n._firestoreClient=new QB(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class o0{constructor(e="count",t){this._aggregateType=e,this._internalFieldPath=t,this.type="AggregateField"}}class cj{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class yg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yg(ai.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yg(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vg{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vx{constructor(e){this._methodName=e}}class Bx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const dj=/^__.*__$/;class hj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ed(e,this.data,this.fieldMask,t,this.fieldTransforms):new S_(e,this.data,t,this.fieldTransforms)}}class t1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ed(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function n1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class XD{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new XD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return tb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(n1(this.ca)&&dj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class fj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||t0(e)}ya(e,t,r,i=!1){return new XD({ca:e,methodName:t,ga:r,path:Vr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wg(n){const e=n._freezeSettings(),t=t0(n._databaseId);return new fj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JD(n,e,t,r,i,o={}){const l=n.ya(o.merge||o.mergeFields?2:0,e,t,i);Gx("Data must be an object, but it was:",l,r);const h=o1(r,l);let m,v;if(o.merge)m=new rs(l.fieldMask),v=l.fieldTransforms;else if(o.mergeFields){const D=[];for(const S of o.mergeFields){const P=u0(e,S,t);if(!l.contains(P))throw new xe(le.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);u1(D,P)||D.push(P)}m=new rs(D),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new hj(new Gi(h),m,v)}class a0 extends Vx{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a0}}function $x(n,e,t,r){const i=n.ya(1,e,t);Gx("Data must be an object, but it was:",i,r);const o=[],l=Gi.empty();Nl(r,(m,v)=>{const D=eb(e,m,t);v=(0,U.m9)(v);const S=i.da(D);if(v instanceof a0)o.push(D);else{const P=Eg(v,S);null!=P&&(o.push(D),l.set(D,P))}});const h=new rs(o);return new t1(l,h,i.fieldTransforms)}function Hx(n,e,t,r,i,o){const l=n.ya(1,e,t),h=[u0(e,r,t)],m=[i];if(o.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<o.length;P+=2)h.push(u0(e,o[P])),m.push(o[P+1]);const v=[],D=Gi.empty();for(let P=h.length-1;P>=0;--P)if(!u1(v,h[P])){const j=h[P];let W=m[P];W=(0,U.m9)(W);const ue=l.da(j);if(W instanceof a0)v.push(j);else{const fe=Eg(W,ue);null!=fe&&(v.push(j),D.set(j,fe))}}const S=new rs(v);return new t1(D,S,l.fieldTransforms)}function s1(n,e,t,r=!1){return Eg(t,n.ya(r?4:3,e))}function Eg(n,e){if(a1(n=(0,U.m9)(n)))return Gx("Unsupported field value:",e,n),o1(n,e);if(n instanceof Vx)return function(t,r){if(!n1(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let h=Eg(l,r.wa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ft(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ir.fromDate(t);return{timestampValue:R_(r.serializer,i)}}if(t instanceof ir){const i=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:R_(r.serializer,i)}}if(t instanceof Bx)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yg)return{bytesValue:yk(r.serializer,t._byteString)};if(t instanceof li){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:oR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${YD(t)}`)}(n,e)}function o1(n,e){const t={};return Aw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nl(n,(r,i)=>{const o=Eg(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function a1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof Bx||n instanceof yg||n instanceof li||n instanceof Vx)}function Gx(n,e,t){if(!a1(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=YD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function u0(n,e,t){if((e=(0,U.m9)(e))instanceof vg)return e._internalPath;if("string"==typeof e)return eb(n,e);throw tb("Field path arguments must be of type string or ",n,!1,void 0,t)}const _j=new RegExp("[~\\*/\\[\\]]");function eb(n,e,t){if(e.search(_j)>=0)throw tb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vg(...e.split("."))._internalPath}catch{throw tb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tb(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||l)&&(m+=" (found",o&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new xe(le.INVALID_ARGUMENT,h+n+m)}function u1(n,e){return n.some(t=>t.isEqual(e))}class l0{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new li(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yj extends l0{data(){return super.data()}}function nb(n,e){return"string"==typeof e?eb(n,e):e instanceof vg?e._internalPath:e._delegate._internalPath}function l1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zx{}class rb extends zx{}function ib(n,e,...t){let r=[];e instanceof zx&&r.push(e),r=r.concat(t),function(i){const o=i.filter(h=>h instanceof G_).length,l=i.filter(h=>h instanceof c0).length;if(o>1||o>0&&l>0)throw new xe(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class c0 extends rb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new c0(e,t,r)}_apply(e){const t=this._parse(e);return f1(e._query,t),new is(e.firestore,e.converter,Lw(e._query,t))}_parse(e){const t=wg(e.firestore);return function(i,o,l,h,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){h1(D,v);const P=[];for(const j of D)P.push(d1(h,i,j));S={arrayValue:{values:P}}}else S=d1(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||h1(D,v),S=s1(l,"where",D,"in"===v||"not-in"===v);return un.create(m,v,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function Wx(n,e,t){const r=e,i=nb("where",n);return c0._create(i,r,t)}class G_ extends zx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new G_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const h of l)f1(o,h),o=Lw(o,h)}(e._query,t),new is(e.firestore,e.converter,Lw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qx extends rb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qx(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ao(i,o);return function(h,m){if(null===Ow(h)){const v=Fw(h);null!==v&&p1(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Ll(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class sb extends rb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sb(e,t,r)}_apply(e){return new is(e.firestore,e.converter,Uw(e._query,this._limit,this._limitType))}}class ob extends rb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ob(e,t,r)}_apply(e){const t=function c1(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof l0)return function(i,o,l,h,m){if(!h)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Qh(i))if(D.field.isKeyField())v.push(Jc(o,h.key));else{const S=h.data.field(D.field);if(xw(S))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new Ol(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=wg(n.firestore);return function(o,l,h,m,v,D){const S=o.explicitOrderBy;if(v.length>S.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let j=0;j<v.length;j++){const W=v[j];if(S[j].field.isKeyField()){if("string"!=typeof W)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof W}`);if(!ED(o)&&-1!==W.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${W}' contains a slash.`);const ue=o.path.child(_n.fromString(W));if(!Xe.isDocumentKey(ue))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const fe=new Xe(ue);P.push(Jc(l,fe))}else{const ue=s1(h,m,W);P.push(ue)}}return new Ol(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}(e,this.type,this._docOrFields,this._inclusive);return new is(e.firestore,e.converter,(i=t,new Ll((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}function d1(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ED(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_n.fromString(t));if(!Xe.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jc(n,new Xe(r))}if(t instanceof li)return Jc(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YD(t)}.`)}function h1(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f1(n,e){if(e.isInequality()){const r=Fw(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=Ow(n);null!==o&&p1(0,i,o)}const t=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(le.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function p1(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class m1{convertValue(e,t="none"){switch(xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new Bx(Tr(e.latitude),Tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ng(e));default:return null}}convertTimestamp(e){const t=kl(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_n.fromString(e);Ct(Ak(r));const i=new Wh(r.get(1),r.get(3)),o=new Xe(r.popFirst(5));return i.isEqual(t)||Lr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function ub(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ij extends m1{constructor(e){super(),this.firestore=e}convertBytes(e){return new yg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new li(this.firestore,null,t)}}class Ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class z_ extends l0{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lb extends z_{data(e={}){return super.data(e)}}class W_{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ig(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lb(this._firestore,this._userDataWriter,r.key,r,new Ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new lb(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ig(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new lb(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ig(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),v=o.indexOf(l.doc.key)),{type:Dj(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Dj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}class sf extends m1{constructor(e){super(),this.firestore=e}convertBytes(e){return new yg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new li(this.firestore,null,t)}}function Kx(n,...e){var t,r,i;n=(0,U.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Ux(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges};if(Ux(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof li)v=yn(n.firestore,_r),D=Yh(n._key.path),m={next:S=>{e[l]&&e[l](function Zx(n,e,t){const r=t.docs.get(e._key),i=new sf(n);return new z_(n,i,e._key,r,new Ig(t.hasPendingWrites,t.fromCache),e.converter)}(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=yn(n,is);v=yn(S.firestore,_r),D=S._query;const P=new sf(v);m={next:j=>{e[l]&&e[l](new W_(v,P,S,j))},error:e[l+1],complete:e[l+2]},l1(n._query)}return function(S,P,j,W){const ue=new WD(W),fe=new rx(P,ue,j);return S.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return XR(yield H_(S),fe)})),()=>{ue.Dc(),S.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return ex(yield H_(S),fe)}))}}(Ii(v),D,h,m)}function d0(n,e){return function(t,r){const i=new Ur;return t.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function MB(n,e,t){return ux.apply(this,arguments)}(yield function Ox(n){return KD(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(Ii(n),e)}const Uj={maxAttempts:5};function af(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Bj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wg(e)}get(e){const t=af(e,this._firestore),r=new Ij(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const o=i[0];if(o.isFoundDocument())return new l0(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new l0(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=af(e,this._firestore),o=ub(i.converter,t,r),l=JD(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=af(e,this._firestore);let l;return l="string"==typeof(t=(0,U.m9)(t))||t instanceof vg?Hx(this._dataReader,"Transaction.update",o._key,t,r,i):$x(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=af(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=af(e,this._firestore),r=new sf(this._firestore);return super.get(e).then(i=>new z_(this._firestore,r,t._key,i._document,new Ig(!1,!1),t.converter))}}!function(n,e=!0){Yc=yi.SDK_VERSION,(0,yi._registerComponent)(new Ea.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new _r(new GC(t.getProvider("auth-internal")),new _w(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wh(h.options.projectId,m)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,yi.registerVersion)(IA,"3.12.0",n),(0,yi.registerVersion)(IA,"3.12.0","esm2017")}();var $j={includeMetadataChanges:!1};function Zj(n,e){return void 0===e&&(e={}),function Kj(n){return function Yx(n,e){return void 0===e&&(e=$j),new Fr.y(function(t){return{unsubscribe:Kx(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}(n,{includeMetadataChanges:!0}).pipe((0,Mt.U)(function(e){return e.docs}))}(n).pipe((0,Mt.U)(function(t){return t.map(function(r){return function y1(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class h0{constructor(e){return e}}const I1="firestore",Jx=new f.OlP("angularfire2.firestore-instances");function Xj(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new h0(r)}}const Jj={provide:class Yj{constructor(){return(0,$n.vb)(I1)}},deps:[[new f.FiY,Jx]]},e$={provide:h0,useFactory:function Qj(n,e){const t=(0,$n.JM)(I1,n,e);return t&&new h0(t)},deps:[[new f.FiY,Jx],Lc]};let t$=(()=>{class n{constructor(){(0,vu.KN)("angularfire",$n.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[e$,Jj]}),n})();function n$(n,...e){return{ngModule:t$,providers:[{provide:Jx,useFactory:Xj(n),multi:!0,deps:[f.R0b,f.zs3,$n.HU,cm,[new f.FiY,tI],[new f.FiY,Ip],...e]}]}}const f0=(0,$n.u3)(Zj,!0),ku=(0,$n.u3)(ZO,!0),cb=(0,$n.u3)(YO,!0),r$=(0,$n.u3)(QD,!0);let p0=(()=>{class n{constructor(t){this.db=t,this.oldDataToUpdate={courseId:"",courseName:"",courseDate:"",courseDescription:""}}ngOnInit(){this.deleteCoursesWithLessons()}getUsersDataByName(t){let r=ku(this.db,t);return f0(r)}observeReturen(){let t=ku(this.db,"courses");return f0(t)}getCourses(){let t=ku(this.db,"courses");return f0(t)}deleteCoursesWithLessons(){var t=this;QD(),ku(this.db,"courses"),function jj(n,e,t){n=yn(n,_r);const r=Object.assign(Object.assign({},Uj),t);return function(i){if(i.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const h=new Ur;return i.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){const m=yield BO(i);new YB(i.asyncQueue,m,l,o,h).run()})),h.promise}(Ii(n),i=>e(new Bj(n,i)),r)}(this.db,function(){var h=(0,qe.Z)(function*(m){console.log(m);const v=cb(t.db,"courses"),D=m.get(v);console.log(D)});return function(m){return h.apply(this,arguments)}}()).then(h=>{console.log(h)});let l=ku(this.db,"courses","","lessons");return f0(l).pipe((0,gr.b)(h=>{console.log(h)}))}createCourse(t,r){var i=this;return(0,qe.Z)(function*(){const o=ku(i.db,"courses");let h=(yield function Rj(n){return function xj(n,e){const t=yn(n.firestore,_r),r=Ii(t),i=function(o,l){const h=[];for(const m in o)Object.prototype.hasOwnProperty.call(o,m)&&h.push(l(o[m],m));return h}(e,(o,l)=>new oV(l,o._aggregateType,o._internalFieldPath));return function(o,l,h){const m=new Ur;return o.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){try{const v=yield BO(o);m.resolve(function uB(n,e,t){return PR.apply(this,arguments)}(v,l,h))}catch(v){m.reject(v)}})),m.promise}(r,n._query,i).then(o=>function(l,h,m){const v=new sf(l);return new cj(h,v,m)}(t,n,o))}(n,{count:new o0("count")})}(o)).data().count+1;const m=cb(ku(i.db,"id")).id;return t.courseId=m,t.id=h,function Aj(n,e){const t=yn(n.firestore,_r),r=YO(n),i=ub(n.converter,e);return d0(t,[JD(wg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ar.exists(!1))]).then(()=>r)}(ku(i.db,"courses"),t)})()}deleteCourse(t){let r,i=QD();Kx(ib(ku(i,"courses"),Wx("courseId","==",t.courseId)),h=>{h.docs.forEach(m=>{r=m.id}),null==r?alert("This document is not exist."):function Sj(n){return d0(yn(n.firestore,_r),[new A_(n._key,Ar.none())])}(cb(this.db,"courses",r)).then(()=>{console.log("delete is successful.")}).catch(m=>{console.log(m)})})}updateCourse(t,r){let i=r.courseId,o=QD();Kx(ib(ku(o,"courses"),Wx("courseId","==",i)),m=>{let v="";return m.docs.forEach(S=>{v=S.id}),function Tj(n,e,t,...r){n=yn(n,li);const i=yn(n.firestore,_r),o=wg(i);let l;return l="string"==typeof(e=(0,U.m9)(e))||e instanceof vg?Hx(o,"updateDoc",n._key,e,t,r):$x(o,"updateDoc",n._key,e),d0(i,[l.toMutation(n._key,Ar.exists(!0))])}(cb(this.db,"courses",v),t)})}getWithPagination(t){var r=this;return(0,qe.Z)(function*(){r.getCourses();const i=ku(r.db,"courses");null==t&&(t=0);const o=ib(i,function vj(n,e="asc"){const t=e,r=nb("orderBy",n);return qx._create(r,t)}("id","asc"),function Ej(...n){return ob._create("startAfter",n,!1)}(2*t),function wj(n){return function qO(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),sb._create("limit",n,"F")}(2));return yield function bj(n){n=yn(n,is);const e=yn(n.firestore,_r),t=Ii(e),r=new sf(e);return l1(n._query),function $O(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function(i,o,l,h,m){const v=new WD({next:S=>{o.enqueueAndForget(()=>ex(i,D)),S.fromCache&&"server"===h.source?m.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new rx(l,v,{includeMetadataChanges:!0,Ku:!0});return XR(i,D)}(yield H_(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new W_(e,r,n,i))}(o)})()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(h0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function i$(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li"),f._uU(1),f.TgZ(2,"div")(3,"button",4),f.NdJ("click",function(){const o=f.CHM(t).$implicit,l=f.oxw();return f.KtG(l.onDelete(o))}),f._uU(4,"Delete"),f.qZA(),f.TgZ(5,"button",5),f.NdJ("click",function(){const o=f.CHM(t).$implicit,l=f.oxw();return f.KtG(l.onUpdate(o))}),f._uU(6,"Update"),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(1),f.hij(" ",t.courseName+" -- "+t.courseDescrption+" ---"+t.courseDate," ")}}function s$(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li")(1,"button",6),f.NdJ("click",function(i){f.CHM(t);const o=f.oxw();return f.KtG(o.countOfList(i))}),f._uU(2),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t)}}let o$=(()=>{class n{constructor(t,r){this.serviceFirebase=t,this.router=r,this.arr=[],this.coursesCount=[]}ngOnInit(){this.getCoursesToDom(),this.getCoursesWithPage()}getCoursesToDom(){this.serviceFirebase.getCourses().subscribe(r=>{let i=0;i=r.length%2==0?r.length/2:Math.trunc(r.length/2+1),this.coursesCount=[];for(let o=1;o<i+1;o++)this.coursesCount.push(o)})}onDelete(t){this.serviceFirebase.deleteCourse(t),this.getCoursesToDom(),this.getCoursesWithPage()}onUpdate(t){this.serviceFirebase.oldDataToUpdate=t,localStorage.setItem("updatedata",JSON.stringify(t)),this.router.navigateByUrl("/update")}getCoursesWithPage(t){this.serviceFirebase.getWithPagination(t).then(i=>{this.arr=[],i.forEach(o=>{this.arr.push(o.data())})})}countOfList(t){this.getCoursesWithPage(t.target.innerText-1)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(p0),f.Y36(Ri))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products"]],decls:9,vars:2,consts:[["id","form"],["routerLink","/inputForm"],[4,"ngFor","ngForOf"],["id","lists"],[2,"background-color","rgb(208, 89, 89)","color","white",3,"click"],[2,"background-color","green","color","white","margin-left","5px",3,"click"],[3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"a",1),f._uU(2,"Add Data"),f.qZA(),f.TgZ(3,"div")(4,"ul"),f.YNc(5,i$,7,1,"li",2),f.qZA(),f.TgZ(6,"div",3)(7,"ul"),f.YNc(8,s$,3,1,"li",2),f.qZA()()()()),2&t&&(f.xp6(5),f.Q6J("ngForOf",r.arr),f.xp6(3),f.Q6J("ngForOf",r.coursesCount))},dependencies:[ho,lp],styles:["#form[_ngcontent-%COMP%]{margin:10px 50px}#form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{list-style-type:none;text-decoration:none}#lists[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;display:flex}#lists[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:3px}"]}),n})(),C1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Cg=(()=>{class n extends C1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Bl=new f.OlP("NgValueAccessor"),l$={provide:Bl,useExisting:(0,f.Gpc)(()=>q_),multi:!0},d$=new f.OlP("CompositionEventMode");let q_=(()=>{class n extends C1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function c$(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(d$,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[f._Bn([l$]),f.qOj]}),n})();const h$=!1;const ms=new f.OlP("NgValidators"),lf=new f.OlP("NgAsyncValidators");function A1(n){return function uf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function db(n){return null}function k1(n){return null!=n}function O1(n){const e=(0,f.QGY)(n)?(0,mn.D)(n):n;if(h$&&!(0,f.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,t)}return e}function F1(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function L1(n,e){return e.map(t=>t(n))}function U1(n){return n.map(e=>function p$(n){return!n.validate}(e)?e:t=>e.validate(t))}function eM(n){return null!=n?function V1(n){if(!n)return null;const e=n.filter(k1);return 0==e.length?null:function(t){return F1(L1(t,e))}}(U1(n)):null}function tM(n){return null!=n?function B1(n){if(!n)return null;const e=n.filter(k1);return 0==e.length?null:function(t){return function a$(...n){const e=(0,Yi.jO)(n),{args:t,keys:r}=wc(n),i=new Fr.y(o=>{const{length:l}=t;if(!l)return void o.complete();const h=new Array(l);let m=l,v=l;for(let D=0;D<l;D++){let S=!1;(0,cu.Xf)(t[D]).subscribe((0,ni.x)(o,P=>{S||(S=!0,v--),h[D]=P},()=>m--,void 0,()=>{(!m||!S)&&(v||o.next(r?dl(r,h):h),o.complete())}))}});return e?i.pipe(Bi(e)):i}(L1(t,e).map(O1)).pipe((0,Mt.U)(F1))}}(U1(n)):null}function j1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nM(n){return n?Array.isArray(n)?n:[n]:[]}function hb(n,e){return Array.isArray(n)?n.includes(e):n===e}function G1(n,e){const t=nM(e);return nM(n).forEach(i=>{hb(t,i)||t.push(i)}),t}function z1(n,e){return nM(e).filter(t=>!hb(n,t))}class W1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ms extends W1{get formDirective(){return null}get path(){return null}}class cf extends W1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class q1{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let fb=(()=>{class n extends q1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(cf,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),pb=(()=>{class n extends q1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ms,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();function K1(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const sM=!1,g0="VALID",mb="INVALID",K_="PENDING",m0="DISABLED";function oM(n){return(_b(n)?n.validators:n)||null}function aM(n,e){return(_b(e)?e.asyncValidators:n)||null}function _b(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Z1(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,sM?function y$(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new f.vHH(1001,sM?function v$(n,e){return`Cannot find form control ${K1(n,e)}`}(e,t):"")}function Y1(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,sM?function w$(n,e){return`Must supply a value for form control ${K1(n,e)}`}(e,i):"")})}class yb{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===g0}get invalid(){return this.status===mb}get pending(){return this.status==K_}get disabled(){return this.status===m0}get enabled(){return this.status!==m0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(G1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(G1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(z1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(z1(e,this._rawAsyncValidators))}hasValidator(e){return hb(this._rawValidators,e)}hasAsyncValidator(e){return hb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=K_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=m0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=g0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===g0||this.status===K_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?m0:g0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=K_,this._hasOwnPendingAsyncValidator=!0;const t=O1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?m0:this.errors?mb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(K_)?K_:this._anyControlsHaveStatus(mb)?mb:g0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_b(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function E$(n){return Array.isArray(n)?eM(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function I$(n){return Array.isArray(n)?tM(n):n||null}(this._rawAsyncValidators)}}class _0 extends yb{constructor(e,t,r){super(oM(t),aM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Y1(this,!0,e),Object.keys(e).forEach(r=>{Z1(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Q1 extends _0{}const Z_=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>vb}),vb="always";function y0(n,e,t=vb){uM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function D$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&X1(n,e)})}(n,e),function T$(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function b$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&X1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function C$(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ib(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uM(n,e){const t=function $1(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(j1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function H1(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(j1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ib(e._rawValidators,i),Ib(e._rawAsyncValidators,i)}function X1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const M$={provide:Ms,useExisting:(0,f.Gpc)(()=>Y_)},v0=(()=>Promise.resolve())();let Y_=(()=>{class n extends Ms{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new _0({},eM(t),tM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){v0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),y0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){v0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){v0.then(()=>{const r=this._findContainer(t.path),i=new _0({});(function J1(n,e){uM(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){v0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){v0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function eF(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ms,10),f.Y36(lf,10),f.Y36(Z_,8))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([M$]),f.qOj]}),n})();function tF(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function nF(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const w0=class extends yb{constructor(e=null,t,r){super(oM(t),aM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_b(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=nF(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){nF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},k$={provide:cf,useExisting:(0,f.Gpc)(()=>E0)},sF=(()=>Promise.resolve())();let E0=(()=>{class n extends cf{constructor(t,r,i,o,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new w0,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function dM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===q_?t=o:function R$(n){return Object.getPrototypeOf(n.constructor)===Cg}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function cM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){y0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);sF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function wb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ms,9),f.Y36(ms,10),f.Y36(lf,10),f.Y36(Bl,10),f.Y36(f.sBO,8),f.Y36(Z_,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([k$]),f.qOj,f.TTD]}),n})(),Db=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),aF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Dg=(()=>{class n{constructor(){this._validator=db}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):db,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const X$={provide:ms,useExisting:(0,f.Gpc)(()=>Q_),multi:!0};let Q_=(()=>{class n extends Dg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>A1}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([X$]),f.qOj]}),n})(),iH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[aF]}),n})();class bF extends yb{constructor(e,t,r){super(oM(t),aM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Y1(this,!1,e),e.forEach((r,i)=>{Z1(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function TF(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let sH=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return TF(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new _0(i,o)}record(t,r=null){const i=this._reduceControls(t);return new Q1(i,r)}control(t,r,i){let o={};return this.useNonNullable?(TF(r)?o=r:(o.validators=r,o.asyncValidators=i),new w0(t,{...o,nonNullable:!0})):new w0(t,r,i)}array(t,r,i){const o=t.map(l=>this._createControl(l));return new bF(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof w0||t instanceof yb?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Z_,useValue:t.callSetDisabledState??vb}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[iH]}),n})();function aH(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.xp6(1),f.Oqu(t.course+" - "+t.address+" - "+t.full_name)}}function uH(n,e){if(1&n&&(f.TgZ(0,"p"),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.xp6(1),f.Oqu("lesson about angular with "+t.lesson)}}const lH=function(){return{background:"gray"}},cH=function(){return{background:"green"}};let dH=(()=>{class n{constructor(t,r){this.fs=t,this.fService=r,this.userDatabase=[],this.lessonsArr=[],this.arr=[]}ngOnInit(){this.onLocalData()}onSubmitForm(t){console.log(t.value),t.reset()}onGetData(t){this.fService.getUsersDataByName(t).subscribe(r=>{console.log(r)})}onGetAngularLessons(){let r=ib(ZO(this.fs,"users/8D8jqYzGkqqJ3Asi2WVq/lessons"),Wx("lesson","==","routes"));return f0(r).subscribe(i=>{this.lessonsArr=[],this.arr=[],i.forEach(o=>{this.lessonsArr.push(o)}),console.log(i)})}onObserve(){const t=new Fr.y(r=>{r.next(()=>{console.log("start ..."),this.fService.observeReturen()})}).subscribe(r=>{console.log(r),this.fService.observeReturen()});console.log(t)}onLocalData(){}onAddData(){}onDeleteData(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(h0),f.Y36(p0))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-main"]],decls:31,vars:6,consts:[[3,"ngSubmit"],["f","ngForm"],["for","username"],["name","username","type","text","ngModel","","required",""],["for","password"],["name","password","type","text","ngModel","","required",""],["type","submit",2,"background-color","green","color","whitesmoke",3,"disabled","ngStyle"],[2,"background-color","brown","color","whitesmoke"],["type","text"],["inputData",""],[3,"click"],[4,"ngFor","ngForOf"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div")(1,"p"),f._uU(2,"data information"),f.qZA(),f.TgZ(3,"form",0,1),f.NdJ("ngSubmit",function(){f.CHM(i);const l=f.MAs(4);return f.KtG(r.onSubmitForm(l))}),f.TgZ(5,"label",2),f._uU(6,"User Name"),f.qZA(),f._UZ(7,"br")(8,"input",3)(9,"br"),f.TgZ(10,"label",4),f._uU(11,"Password"),f.qZA(),f._UZ(12,"br")(13,"input",5)(14,"br")(15,"hr"),f.TgZ(16,"button",6),f._uU(17," Adding user"),f.qZA(),f.TgZ(18,"button",7),f._uU(19,"Cancel"),f.qZA()(),f._UZ(20,"input",8,9),f.TgZ(22,"button",10),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(21);return f.KtG(r.onGetData(l.value))}),f._uU(23,"Get Data ..."),f.qZA(),f.TgZ(24,"button",10),f.NdJ("click",function(){return r.onGetAngularLessons()}),f._uU(25,"Angular lessons"),f.qZA(),f.TgZ(26,"button",10),f.NdJ("click",function(){return r.onObserve()}),f._uU(27,"obsService"),f.qZA(),f.YNc(28,aH,2,1,"p",11),f._UZ(29,"p"),f.YNc(30,uH,2,1,"p",11),f.qZA()}if(2&t){const i=f.MAs(4);f.xp6(16),f.Q6J("disabled",i.invalid)("ngStyle",i.invalid?f.DdM(4,lH):f.DdM(5,cH)),f.xp6(12),f.Q6J("ngForOf",r.arr),f.xp6(2),f.Q6J("ngForOf",r.lessonsArr)}},dependencies:[ho,as,Db,q_,fb,pb,Q_,E0,Y_],styles:["div[_ngcontent-%COMP%]{padding:10px}button[_ngcontent-%COMP%]{margin:0 10px 10px;width:150px}"]}),n})();class bb{}class _M{}class rd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(o=>o.toString()),i.length>0){const o=t.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(t,o)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof rd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new rd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof rd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===o.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class hH{encodeKey(e){return SF(e)}encodeValue(e){return SF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const pH=/%(\d[a-f0-9])/gi,gH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function SF(n){return encodeURIComponent(n).replace(pH,(e,t)=>gH[t]??e)}function Tb(n){return`${n}`}class df{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new hH,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function fH(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[l,h]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Tb):[Tb(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new df({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Tb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Tb(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class mH{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function AF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function RF(n){return typeof Blob<"u"&&n instanceof Blob}function xF(n){return typeof FormData<"u"&&n instanceof FormData}class I0{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function _H(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new rd),this.context||(this.context=new mH),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new df,this.urlWithParams=t}serializeBody(){return null===this.body?null:AF(this.body)||RF(this.body)||xF(this.body)||function yH(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof df?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xF(this.body)?null:RF(this.body)?this.body.type||null:AF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof df?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,P)=>S.set(P,e.setHeaders[P]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,P)=>S.set(P,e.setParams[P]),v)),new I0(t,r,o,{params:v,headers:m,context:D,reportProgress:h,responseType:i,withCredentials:l})}}var Ci=(()=>((Ci=Ci||{})[Ci.Sent=0]="Sent",Ci[Ci.UploadProgress=1]="UploadProgress",Ci[Ci.ResponseHeader=2]="ResponseHeader",Ci[Ci.DownloadProgress=3]="DownloadProgress",Ci[Ci.Response=4]="Response",Ci[Ci.User=5]="User",Ci))();class yM{constructor(e,t=200,r="OK"){this.headers=e.headers||new rd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class vM extends yM{constructor(e={}){super(e),this.type=Ci.ResponseHeader}clone(e={}){return new vM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Sb extends yM{constructor(e={}){super(e),this.type=Ci.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Sb({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class MF extends yM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function wM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let vH=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof I0)o=t;else{let m,v;m=i.headers instanceof rd?i.headers:new rd(i.headers),i.params&&(v=i.params instanceof df?i.params:new df({fromObject:i.params})),o=new I0(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=lt(o).pipe(bs(m=>this.handler.handle(m)));if(t instanceof I0||"events"===i.observe)return l;const h=l.pipe(ji(m=>m instanceof Sb));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,Mt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,Mt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,Mt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,Mt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new df).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,wM(i,r))}post(t,r,i={}){return this.request("POST",t,wM(i,r))}put(t,r,i={}){return this.request("PUT",t,wM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function NF(n,e){return e(n)}function wH(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const IH=new f.OlP("HTTP_INTERCEPTORS"),C0=new f.OlP("HTTP_INTERCEPTOR_FNS");function CH(){let n=null;return(e,t)=>(null===n&&(n=((0,f.f3M)(IH,{optional:!0})??[]).reduceRight(wH,NF)),n(e,t))}let PF=(()=>{class n extends bb{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(C0)));this.chain=r.reduceRight((i,o)=>function EH(n,e,t){return(r,i)=>t.runInContext(()=>e(r,o=>n(o,i)))}(i,o,this.injector),NF)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_M),f.LFG(f.lqb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const SH=/^\)\]\}',?\n/;let OF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Fr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((j,W)=>i.setRequestHeader(j,W.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const j=t.detectContentTypeHeader();null!==j&&i.setRequestHeader("Content-Type",j)}if(t.responseType){const j=t.responseType.toLowerCase();i.responseType="json"!==j?j:"text"}const o=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const j=i.statusText||"OK",W=new rd(i.getAllResponseHeaders()),ue=function AH(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new vM({headers:W,status:i.status,statusText:j,url:ue}),l},m=()=>{let{headers:j,status:W,statusText:ue,url:fe}=h(),We=null;204!==W&&(We=typeof i.response>"u"?i.responseText:i.response),0===W&&(W=We?200:0);let ot=W>=200&&W<300;if("json"===t.responseType&&"string"==typeof We){const rt=We;We=We.replace(SH,"");try{We=""!==We?JSON.parse(We):null}catch(_t){We=rt,ot&&(ot=!1,We={error:_t,text:We})}}ot?(r.next(new Sb({body:We,headers:j,status:W,statusText:ue,url:fe||void 0})),r.complete()):r.error(new MF({error:We,headers:j,status:W,statusText:ue,url:fe||void 0}))},v=j=>{const{url:W}=h(),ue=new MF({error:j,status:i.status||0,statusText:i.statusText||"Unknown Error",url:W||void 0});r.error(ue)};let D=!1;const S=j=>{D||(r.next(h()),D=!0);let W={type:Ci.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(W.total=j.total),"text"===t.responseType&&i.responseText&&(W.partialText=i.responseText),r.next(W)},P=j=>{let W={type:Ci.UploadProgress,loaded:j.loaded};j.lengthComputable&&(W.total=j.total),r.next(W)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==o&&i.upload&&i.upload.addEventListener("progress",P)),i.send(o),r.next({type:Ci.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==o&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_d))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const EM=new f.OlP("XSRF_ENABLED"),FF=new f.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),LF=new f.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class UF{}let MH=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae),f.LFG(f.Lbi),f.LFG(FF))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function NH(n,e){const t=n.url.toLowerCase();if(!(0,f.f3M)(EM)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,f.f3M)(UF).getToken(),i=(0,f.f3M)(LF);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var ci=(()=>((ci=ci||{})[ci.Interceptors=0]="Interceptors",ci[ci.LegacyInterceptors=1]="LegacyInterceptors",ci[ci.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ci[ci.NoXsrfProtection=3]="NoXsrfProtection",ci[ci.JsonpSupport=4]="JsonpSupport",ci[ci.RequestsMadeViaParent=5]="RequestsMadeViaParent",ci))();function X_(n,e){return{\u0275kind:n,\u0275providers:e}}function PH(...n){const e=[vH,OF,PF,{provide:bb,useExisting:PF},{provide:_M,useExisting:OF},{provide:C0,useValue:NH,multi:!0},{provide:EM,useValue:!0},{provide:UF,useClass:MH}];for(const t of n)e.push(...t.\u0275providers);return(0,f.MR2)(e)}const VF=new f.OlP("LEGACY_INTERCEPTOR_FN");let OH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[PH(X_(ci.LegacyInterceptors,[{provide:VF,useFactory:CH},{provide:C0,useExisting:VF,multi:!0}]))]}),n})();var Ou=B(2011),FH=B(4986),BF=B(3942);const jF="firebasestorage.googleapis.com",$F="storageBucket";class Br extends U.ZR{constructor(e,t,r=0){super(IM(e),`Firebase Storage: ${t} (${IM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return IM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var or=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(or||(or={})),or))();function IM(n){return"storage/"+n}function CM(){return new Br(or.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function HF(){return new Br(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GF(){return new Br(or.CANCELED,"User canceled the upload/download.")}function zF(){return new Br(or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function J_(n){return new Br(or.INVALID_ARGUMENT,n)}function WF(){return new Br(or.APP_DELETED,"The Firebase app was deleted.")}function qF(n){return new Br(or.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function D0(n,e){return new Br(or.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function b0(n){throw new Br(or.INTERNAL_ERROR,"Internal error: "+n)}class _s{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_s.makeFromUrl(e,t)}catch{return new _s(e,"")}if(""===r.path)return r;throw function qH(n){return new Br(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(_t){_t.path_=decodeURIComponent(_t.path)}const S=t.replace(/[.]/g,"\\."),rt=[{regex:h,indices:{bucket:1,path:3},postModify:function o(_t){"/"===_t.path.charAt(_t.path.length-1)&&(_t.path_=_t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===jF?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let _t=0;_t<rt.length;_t++){const nn=rt[_t],ln=nn.regex.exec(e);if(ln){let Go=ln[nn.indices.path];Go||(Go=""),r=new _s(ln[nn.indices.bucket],Go),nn.postModify(r);break}}if(null==r)throw function WH(n){return new Br(or.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class XH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Ab(n){return"string"==typeof n||n instanceof String}function KF(n){return DM()&&n instanceof Blob}function DM(){return typeof Blob<"u"&&!(0,U.UG)()}function bM(n,e,t,r){if(r<e)throw J_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw J_(`Invalid value for '${n}'. Expected ${t} or less.`)}function id(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ZF(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var hf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(hf||(hf={})),hf))();function YF(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class iG{constructor(e,t,r,i,o,l,h,m,v,D,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,W)=>{this.resolve_=j,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function tG(n){return void 0!==n}(m)?o():o(m)}catch(m){l(m)}else if(null!==h){const m=CM();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?WF():GF():HF())};this.canceled_?t(0,new Rb(!1,null,!0)):this.backoffId_=function JH(n,e,t){let r=1,i=null,o=null,l=!1,h=0;function m(){return 2===h}let v=!1;function D(...fe){v||(v=!0,e.apply(null,fe))}function S(fe){i=setTimeout(()=>{i=null,n(j,m())},fe)}function P(){o&&clearTimeout(o)}function j(fe,...We){if(v)return void P();if(fe)return P(),void D.call(null,fe,...We);if(m()||l)return P(),void D.call(null,fe,...We);let rt;r<64&&(r*=2),1===h?(h=2,rt=0):rt=1e3*(r+Math.random()),S(rt)}let W=!1;function ue(fe){W||(W=!0,P(),!v&&(null!==i?(fe||(h=2),clearTimeout(i),S(0)):fe||(h=1)))}return S(0),o=setTimeout(()=>{l=!0,ue(!0)},t),ue}((r,i)=>{if(i)return void r(!1,new Rb(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===hf.NO_ERROR,m=o.getStatus();if(!h||YF(m,this.additionalRetryCodes_)&&this.retry){const D=o.getErrorCode()===hf.ABORT;return void r(!1,new Rb(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new Rb(v,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function eG(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Rb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dG(...n){const e=function cG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(DM())return new Blob(n);throw new Br(or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const jo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class TM{constructor(e,t){this.data=e,this.contentType=t||null}}function SM(n,e){switch(n){case jo.RAW:return new TM(QF(e));case jo.BASE64:case jo.BASE64URL:return new TM(XF(n,e));case jo.DATA_URL:return new TM(function gG(n){const e=new JF(n);return e.base64?XF(jo.BASE64,e.rest):function pG(n){let e;try{e=decodeURIComponent(n)}catch{throw D0(jo.DATA_URL,"Malformed data URL.")}return QF(e)}(e.rest)}(e),function mG(n){return new JF(n).contentType}(e))}throw CM()}function QF(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function XF(n,e){switch(n){case jo.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw D0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jo.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw D0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function fG(n){if(typeof atob>"u")throw function QH(n){return new Br(or.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:D0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class JF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw D0(jo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function _G(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class jl{constructor(e,t){let r=0,i="";KF(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(KF(this.data_)){const i=function hG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new jl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new jl(r,!0)}}static getBlob(...e){if(DM()){const t=e.map(r=>r instanceof jl?r.data_:r);return new jl(dG.apply(null,t))}{const t=e.map(l=>Ab(l)?SM(jo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[o++]=l[h]}),new jl(i,!0)}}uploadData(){return this.data_}}function AM(n){let e;try{e=JSON.parse(n)}catch{return null}return function rG(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function eL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function wG(n,e){return e}class Ns{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||wG}}let xb=null;function T0(){if(xb)return xb;const n=[];n.push(new Ns("bucket")),n.push(new Ns("generation")),n.push(new Ns("metageneration")),n.push(new Ns("name","fullPath",!0));const t=new Ns("name");t.xform=function e(o,l){return function EG(n){return!Ab(n)||n.length<2?n:eL(n)}(l)},n.push(t);const i=new Ns("size");return i.xform=function r(o,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ns("timeCreated")),n.push(new Ns("updated")),n.push(new Ns("md5Hash",null,!0)),n.push(new Ns("cacheControl",null,!0)),n.push(new Ns("contentDisposition",null,!0)),n.push(new Ns("contentEncoding",null,!0)),n.push(new Ns("contentLanguage",null,!0)),n.push(new Ns("contentType",null,!0)),n.push(new Ns("metadata","customMetadata",!0)),xb=n,xb}function tL(n,e,t){const r=AM(e);return null===r?null:function CG(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return function IG(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new _s(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function RM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const nL="prefixes",rL="items";class $l{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hl(n){if(!n)throw CM()}function Mb(n,e){return function t(r,i){const o=tL(n,i,e);return Hl(null!==o),o}}function ey(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function GH(){return new Br(or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function HH(){return new Br(or.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function $H(n){return new Br(or.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function zH(n){return new Br(or.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function S0(n){const e=ey(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function jH(n){return new Br(or.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function iL(n,e,t){const i=id(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new $l(i,"GET",Mb(n,t),l);return h.errorHandler=S0(e),h}function RG(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=id(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new $l(h,"GET",function SG(n,e){return function t(r,i){const o=function TG(n,e,t){const r=AM(t);return null===r?null:function bG(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[nL])for(const i of t[nL]){const o=i.replace(/\/$/,""),l=n._makeStorageReference(new _s(e,o));r.prefixes.push(l)}if(t[rL])for(const i of t[rL]){const o=n._makeStorageReference(new _s(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return Hl(null!==o),o}}(n,e.bucket),v);return D.urlParams=o,D.errorHandler=ey(e),D}function oL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function PG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Nb{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function xM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Hl(!1)}return Hl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const LG={STATE_CHANGED:"state_changed"},Ps={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function MM(n){switch(n){case"running":case"pausing":case"canceling":return Ps.RUNNING;case"paused":return Ps.PAUSED;case"success":return Ps.SUCCESS;case"canceled":return Ps.CANCELED;default:return Ps.ERROR}}class UG{constructor(e,t,r){if(function nG(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function ty(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let lL=null;class VG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw b0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw b0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw b0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw b0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw b0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class BG extends VG{initXhr(){this.xhr_.responseType="text"}}function Fu(){return lL?lL():new BG}class cL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=T0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(or.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(YF(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=HF()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(or.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function kG(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=oL(e,r,i),h={name:l.fullPath},m=id(o,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=RM(l,t),W=new $l(m,"POST",function j(ue){let fe;xM(ue);try{fe=ue.getResponseHeader("X-Goog-Upload-URL")}catch{Hl(!1)}return Hl(Ab(fe)),fe},n.maxUploadRetryTime);return W.urlParams=h,W.headers=D,W.body=S,W.errorHandler=ey(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function OG(n,e,t,r){const m=new $l(t,"POST",function o(v){const D=xM(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Hl(!1)}S||Hl(!1);const P=Number(S);return Hl(!isNaN(P)),new Nb(P,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=ey(e),m}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Fu,t,r);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Nb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=function FG(n,e,t,r,i,o,l,h){const m=new Nb(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function ZH(){return new Br(or.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const S=m.current;let j="";j=0===D?"finalize":v===D?"upload, finalize":"upload";const W={"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":`${m.current}`},ue=r.slice(S,S+D);if(null===ue)throw zF();const rt=new $l(t,"POST",function fe(_t,nn){const ln=xM(_t,["active","final"]),Ki=m.current+D,Go=r.size();let py;return py="final"===ln?Mb(e,o)(_t,nn):null,new Nb(Ki,Go,"final"===ln,py)},e.maxUploadRetryTime);return rt.headers=W,rt.body=ue.uploadData(),rt.progressCallback=h||null,rt.errorHandler=ey(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Fu,i,o,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=iL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Fu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function aL(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let rt="";for(let _t=0;_t<2;_t++)rt+=Math.random().toString().slice(2);return rt}();l["Content-Type"]="multipart/related; boundary="+m;const v=oL(e,r,i),D=RM(v,t),j=jl.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===j)throw zF();const W={name:v.fullPath},ue=id(o,n.host,n._protocol),We=n.maxUploadRetryTime,ot=new $l(ue,"POST",Mb(n,t),We);return ot.urlParams=W,ot.headers=l,ot.body=j.uploadData(),ot.errorHandler=ey(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fu,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=GF(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=MM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new UG(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(MM(this._state)){case Ps.SUCCESS:ty(this._resolve.bind(null,this.snapshot))();break;case Ps.CANCELED:case Ps.ERROR:ty(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(MM(this._state)){case Ps.RUNNING:case Ps.PAUSED:e.next&&ty(e.next.bind(e,this.snapshot))();break;case Ps.SUCCESS:e.complete&&ty(e.complete.bind(e))();break;default:e.error&&ty(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class bg{constructor(e,t){this._service=e,this._location=t instanceof _s?t:_s.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bg(e,t)}get root(){const e=new _s(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eL(this._location.path)}get storage(){return this._service}get parent(){const e=function yG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new _s(this._location.bucket,e);return new bg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw qF(e)}}function hL(n,e,t){return NM.apply(this,arguments)}function NM(){return NM=(0,qe.Z)(function*(n,e,t){const i=yield fL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield hL(n,e,i.nextPageToken))}),NM.apply(this,arguments)}function fL(n,e){null!=e&&"number"==typeof e.maxResults&&bM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=RG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Fu)}function XG(n){n._throwIfRoot("getDownloadURL");const e=function xG(n,e,t){const i=id(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new $l(i,"GET",function AG(n,e){return function t(r,i){const o=tL(n,i,e);return Hl(null!==o),function DG(n,e,t,r){const i=AM(e);if(null===i||!Ab(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(v=>{const S=n.fullPath;return id("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+ZF({alt:"media",token:v})})[0]}(o,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=S0(e),h}(n.storage,n._location,T0());return n.storage.makeRequestWithTokens(e,Fu).then(t=>{if(null===t)throw function YH(){return new Br(or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function pL(n,e){const t=function vG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new _s(n._location.bucket,t);return new bg(n.storage,r)}function gL(n,e){if(n instanceof PM){const t=n;if(null==t._bucket)throw function KH(){return new Br(or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$F+"' property when initializing the app?")}();const r=new bg(t,t._bucket);return null!=e?gL(r,e):r}return void 0!==e?pL(n,e):n}function nz(n,e){if(e&&function ez(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof PM)return function tz(n,e){return new bg(n,e)}(n,e);throw J_("To use ref(service, url), the first argument must be a Storage instance.")}return gL(n,e)}function mL(n,e){const t=e?.[$F];return null==t?null:_s.makeFromBucketSpec(t,n)}class PM{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=jF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_s.makeFromBucketSpec(i,this._host):mL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_s.makeFromBucketSpec(this._url,e):mL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,qe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,qe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bg(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new XH(WF());{const l=function lG(n,e,t,r,i,o,l=!0){const h=ZF(n.urlParams),m=n.url+h,v=Object.assign({},n.headers);return function aG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function sG(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function oG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,o),function uG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new iG(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,qe.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const _L="@firebase/storage";function wL(n,e){return nz(n=(0,U.m9)(n),e)}function hz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new PM(t,r,i,e,yi.SDK_VERSION)}!function fz(){(0,yi._registerComponent)(new Ea.wA("storage",hz,"PUBLIC").setMultipleInstances(!0)),(0,yi.registerVersion)(_L,"0.11.2",""),(0,yi.registerVersion)(_L,"0.11.2","esm2017")}();class Pb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class IL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Pb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Pb(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?l=>t(new Pb(l,this,this._ref)):{next:t.next?l=>t.next(new Pb(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class CL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sd(e,this._service))}get items(){return this._delegate.items.map(e=>new sd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function dz(n,e){return pL(n,e)}(this._delegate,e);return new sd(t,this.storage)}get root(){return new sd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new IL(function iz(n,e,t){return function qG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new cL(n,new jl(e),t)}(n=(0,U.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=jo.RAW,r){this._throwIfRoot("putString");const i=SM(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new IL(new cL(this._delegate,new jl(i.data,!0),o),this)}listAll(){return function uz(n){return function ZG(n){const e={prefixes:[],items:[]};return hL(n,e).then(()=>e)}(n=(0,U.m9)(n))}(this._delegate).then(e=>new CL(e,this.storage))}list(e){return function az(n,e){return fL(n=(0,U.m9)(n),e)}(this._delegate,e||void 0).then(t=>new CL(t,this.storage))}getMetadata(){return function sz(n){return function YG(n){n._throwIfRoot("getMetadata");const e=iL(n.storage,n._location,T0());return n.storage.makeRequestWithTokens(e,Fu)}(n=(0,U.m9)(n))}(this._delegate)}updateMetadata(e){return function oz(n,e){return function QG(n,e){n._throwIfRoot("updateMetadata");const t=function MG(n,e,t,r){const o=id(e.fullServerUrl(),n.host,n._protocol),h=RM(t,r),v=n.maxOperationRetryTime,D=new $l(o,"PATCH",Mb(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=S0(e),D}(n.storage,n._location,e,T0());return n.storage.makeRequestWithTokens(t,Fu)}(n=(0,U.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function lz(n){return XG(n=(0,U.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function cz(n){return function JG(n){n._throwIfRoot("deleteObject");const e=function NG(n,e){const r=id(e.fullServerUrl(),n.host,n._protocol),h=new $l(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=S0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Fu)}(n=(0,U.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw qF(e)}}class DL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(bL(e))throw J_("ref() expected a child path but got a URL, use refFromURL instead.");return new sd(wL(this._delegate,e),this)}refFromURL(e){if(!bL(e))throw J_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_s.makeFromUrl(e,this._delegate.host)}catch{throw J_("refFromUrl() expected a valid full URL but got an invalid one.")}return new sd(wL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function EL(n,e,t,r={}){!function rz(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,U.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function bL(n){return/^[A-Za-z]+:\/\//.test(n)}function _z(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new DL(t,r)}!function yz(n){const e={TaskState:Ps,TaskEvent:LG,StringFormat:jo,Storage:DL,Reference:sd};n.INTERNAL.registerComponent(new Ea.wA("storage-compat",_z,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(BF.Z);var vz=B(9260);function TL(n){const e=function wz(n){return new Fr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const o=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(function LH(n,e=FH.z){return(0,mi.e)((t,r)=>{let i=null,o=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=o;o=null,r.next(v)}};function m(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,ni.x)(r,v=>{o=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function kb(n){return{getDownloadURL:()=>lt(void 0).pipe($n.fc,xn(()=>n.getDownloadURL()),$n.iC),getMetadata:()=>lt(void 0).pipe($n.fc,xn(()=>n.getMetadata()),$n.iC),delete:()=>(0,mn.D)(n.delete()),child:e=>kb(n.child(e)),updateMetadata:e=>(0,mn.D)(n.updateMetadata(e)),put:(e,t)=>TL(n.put(e,t)),putString:(e,t,r)=>TL(n.putString(e,t,r)),list:e=>(0,mn.D)(n.list(e)),listAll:()=>(0,mn.D)(n.listAll())}}const Ez=new f.OlP("angularfire2.storageBucket"),Iz=new f.OlP("angularfire2.storage.maxUploadRetryTime"),Cz=new f.OlP("angularfire2.storage.maxOperationRetryTime"),Dz=new f.OlP("angularfire2.storage.use-emulator");let bz=(()=>{class n{constructor(t,r,i,o,l,h,m,v,D,S){const P=(0,Ou.on)(t,l,r);this.storage=(0,Ou.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const j=l.runOutsideAngular(()=>P.storage(i||void 0)),W=D;return W&&j.useEmulator(...W),m&&j.setMaxUploadRetryTime(m),v&&j.setMaxOperationRetryTime(v),j},[m,v])}ref(t){return kb(this.storage.ref(t))}refFromURL(t){return kb(this.storage.refFromURL(t))}upload(t,r,i){return kb(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ou.Dh),f.LFG(Ou.xv,8),f.LFG(Ez,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG($n.HU),f.LFG(Iz,8),f.LFG(Cz,8),f.LFG(Dz,8),f.LFG(Ip,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Tz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Sz=(()=>{class n{constructor(){vz.Z.registerVersion("angularfire",$n.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[bz],imports:[Tz]}),n})();const Ob_firebase={apiKey:"AIzaSyBWDl4DyscEGeARJgm1MQmaxCj0WwB_cYM",authDomain:"fir-app-83ca0.firebaseapp.com",projectId:"fir-app-83ca0",storageBucket:"fir-app-83ca0.appspot.com",messagingSenderId:"296875108390",appId:"1:296875108390:web:56afb6afb5794c45a3dee7"};B(6451),B(5363),B(6063),B(3099),B(9468);const RL=new f.OlP("angularfire2.auth.use-emulator");B(9568);const xL="@firebase/database";let OM="";function NL(n){OM=n}class Bz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class jz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const PL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bz(e)}}catch{}return new jz},Tg=PL("localStorage"),FM=PL("sessionStorage"),ny=new wa.Yd("@firebase/database"),kL=function(){let n=1;return function(){return n++}}(),OL=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},A0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=A0.apply(null,r):e+="object"==typeof r?(0,U.Wl)(r):r,e+=" "}return e};let Sg=null,FL=!0;const LL=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ny.logLevel=wa.in.VERBOSE,Sg=ny.log.bind(ny),e&&FM.set("logging_enabled",!0)):"function"==typeof n?Sg=n:(Sg=null,FM.remove("logging_enabled"))},Wi=function(...n){if(!0===FL&&(FL=!1,null===Sg&&!0===FM.get("logging_enabled")&&LL(!0)),Sg){const e=A0.apply(null,n);Sg(e)}},R0=function(n){return function(...e){Wi(n,...e)}},LM=function(...n){const e="FIREBASE INTERNAL ERROR: "+A0(...n);ny.error(e)},Gl=function(...n){const e=`FIREBASE FATAL ERROR: ${A0(...n)}`;throw ny.error(e),new Error(e)},ys=function(...n){const e="FIREBASE WARNING: "+A0(...n);ny.warn(e)},Lb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ff="[MIN_NAME]",od="[MAX_NAME]",Ag=function(n,e){if(n===e)return 0;if(n===ff||e===od)return-1;if(e===ff||n===od)return 1;{const t=BL(n),r=BL(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Gz=function(n,e){return n===e?0:n<e?-1:1},x0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Wl)(e))},UM=function(n){if("object"!=typeof n||null===n)return(0,U.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Wl)(e[r]),t+=":",t+=UM(n[e[r]]);return t+="}",t},UL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function qi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const VL=function(n){(0,U.hu)(!Lb(n),"Invalid JSON number");const r=1023;let i,o,l,h,m;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let P=parseInt(D.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},Kz=new RegExp("^-?(0*)\\d{1,10}$"),BL=function(n){if(Kz.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ry=function(n){try{n()}catch(e){setTimeout(()=>{throw ys("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Qz=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},M0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Xz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ys(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Jz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Wi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ys(e)}}let N0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const zL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,KL="websocket",ZL="long_polling";class BM{constructor(e,t,r,i,o=!1,l="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Tg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function YL(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===KL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ZL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function eW(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return qi(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class tW{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const jM={},$M={};function HM(n){const e=n.toString();return jM[e]||(jM[e]=new tW),jM[e]}class rW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ry(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pf{constructor(e,t,r,i,o,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=R0(e),this.stats_=HM(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),YL(t,ZL,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new GM((...o)=>{const[l,h,m,v,D]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&zL.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pf.forceAllow_=!0}static forceDisallow(){pf.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!pf.forceAllow_&&(pf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=UL(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class GM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=kL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=GM.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Wi("frame writing exception"),h.stack&&Wi(h.stack),Wi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Wi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Wi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Vb=null;typeof MozWebSocket<"u"?Vb=MozWebSocket:typeof WebSocket<"u"&&(Vb=WebSocket);let iy=(()=>{class n{constructor(t,r,i,o,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=R0(this.connId),this.stats_=HM(r),this.connURL=n.connectionURL_(r,h,m,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){const h={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&zL.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),l&&(h.p=l),YL(t,KL,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tg.set("previous_websocket_failure",!0);try{let i;if((0,U.Yr)()){i={headers:{"User-Agent":`Firebase/5/${OM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Vb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Vb&&!n.forceDisallow_}static previouslyFailed(){return Tg.isInMemoryStorage||!0===Tg.get("previous_websocket_failure")}markConnectionHealthy(){Tg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=UL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),rU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[pf,iy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=iy&&iy.isAvailable();let i=r&&!iy.previouslyFailed();if(t.webSocketOnly&&(r||ys("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[iy];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class cU{constructor(e,t,r,i,o,l,h,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=R0("c:"+this.id+":"),this.transportManager_=new rU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=M0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=x0("t",e),r=x0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=x0("t",e),r=x0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=x0("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?LM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):LM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ys("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),M0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):M0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class dU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Bb extends hU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Bb}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const fU=32,pU=768;class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bn(){return new Nn("")}function cn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gf(n){return n.pieces_.length-n.pieceNum_}function tr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function WM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function P0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function gU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function Rr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Nn(t,0)}function dn(n){return n.pieceNum_>=n.pieces_.length}function ks(n,e){const t=cn(n),r=cn(e);if(null===t)return e;if(t===r)return ks(tr(n),tr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function bW(n,e){const t=P0(n,0),r=P0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Ag(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function qM(n,e){if(gf(n)!==gf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Oa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(gf(n)>gf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class TW{constructor(e,t){this.errorPrefix_=t,this.parts_=P0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);mU(this)}}function mU(n){if(n.byteLength_>pU)throw new Error(n.errorPrefix_+"has a key path longer than "+pU+" bytes ("+n.byteLength_+").");if(n.parts_.length>fU)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fU+") or object contains a cycle "+Rg(n))}function Rg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class KM extends hU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new KM}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const k0=1e3;let $b,xg=(()=>{class n extends dU{constructor(t,r,i,o,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=R0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=k0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");KM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Bb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,U.Wl)(l)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new U.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,o),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ys(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,h=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):LM("Unrecognized action received from server: "+(0,U.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=k0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=k0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=k0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,qe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,o())};t.realtime_={close:D,sendRequest:function(j){(0,U.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(j)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,W]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?Wi("getToken() completed but was canceled"):(Wi("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=W&&W.token,v=new cU(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,ue=>{ys(ue+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(j){t.log_("Failed to get token: "+j),m||(t.repoInfo_.nodeAdmin&&ys(j),D())}}})()}interrupt(t){Wi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Wi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=k0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>UM(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Nn(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Wi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Wi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+OM.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Bb.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class fn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new fn(e,t)}}class jb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new fn(ff,e),i=new fn(ff,t);return 0!==this.compare(r,i)}minPost(){return fn.MIN}}class vU extends jb{static get __EMPTY_NODE(){return $b}static set __EMPTY_NODE(e){$b=e}compare(e,t){return Ag(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return fn.MIN}maxPost(){return new fn(od,$b)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new fn(e,$b)}toString(){return".key"}}const zl=new vU;class Hb{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let YM,Lu=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??uo.EMPTY_NODE,this.right=l??uo.EMPTY_NODE}copy(t,r,i,o,l){return new n(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return uo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return uo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class uo{constructor(e,t=uo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new uo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Lu.BLACK,null,null))}remove(e){return new uo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Hb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Hb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Hb(this.root_,null,this.comparator_,!0,e)}}function kW(n,e){return Ag(n.name,e.name)}function ZM(n,e){return Ag(n,e)}uo.EMPTY_NODE=new class PW{copy(e,t,r,i,o){return this}insert(e,t,r){return new Lu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wU=function(n){return"number"==typeof n?"number:"+VL(n):"string:"+n},EU=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===YM||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===YM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let IU,CU,DU,sy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),EU(this.priorityNode_)}static set __childrenNodeConstructor(t){IU=t}static get __childrenNodeConstructor(){return IU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return dn(t)?this:".priority"===cn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=cn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===gf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(tr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?VL(this.value_):this.value_,this.lazyHash_=OL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(o>=0,"Unknown leaf type: "+r),(0,U.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ar=new class UW extends jb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Ag(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return fn.MIN}maxPost(){return new fn(od,new sy("[PRIORITY-POST]",DU))}makePost(e,t){const r=CU(e);return new fn(t,new sy("[PRIORITY-POST]",r))}toString(){return".priority"}},VW=Math.log(2);class BW{constructor(e){this.count=parseInt(Math.log(e+1)/VW,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gb=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,P;if(0===D)return null;if(1===D)return S=n[m],P=t?t(S):S,new Lu(P,S.node,Lu.BLACK,null,null);{const j=parseInt(D/2,10)+m,W=i(m,j),ue=i(j+1,v);return S=n[j],P=t?t(S):S,new Lu(P,S.node,Lu.BLACK,W,ue)}},h=function(m){let v=null,D=null,S=n.length;const P=function(W,ue){const fe=S-W,We=S;S-=W;const ot=i(fe+1,We),rt=n[fe],_t=t?t(rt):rt;j(new Lu(_t,rt.node,ue,null,ot))},j=function(W){v?(v.left=W,v=W):(D=W,v=W)};for(let W=0;W<m.count;++W){const ue=m.nextBitIsOne(),fe=Math.pow(2,m.count-(W+1));ue?P(fe,Lu.BLACK):(P(fe,Lu.BLACK),P(fe,Lu.RED))}return D}(new BW(n.length));return new uo(r||e,h)};let QM;const oy={};class ad{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)(oy&&ar,"ChildrenNode.ts has not been loaded"),QM=QM||new ad({".priority":oy},{".priority":ar}),QM}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof uo?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==zl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(fn.Wrap);let h,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();h=i?Gb(r,e.getCompare()):oy;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new ad(D,v)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,o)=>{const l=(0,U.DV)(this.indexSet_,o);if((0,U.hu)(l,"Missing index implementation for "+o),i===oy){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(fn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),Gb(h,l.getCompare())}return oy}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new fn(e.name,h))),m.insert(e,e.node)}});return new ad(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===oy)return i;{const o=t.get(e.name);return o?i.remove(new fn(e.name,o)):i}});return new ad(r,this.indexSet_)}}let O0,rn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EU(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return O0||(O0=new n(new uo(ZM),null,ad.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||O0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?O0:r}}getChild(t){const r=cn(t);return null===r?this:this.getImmediateChild(r).getChild(tr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new fn(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?O0:this.priorityNode_;return new n(o,h,l)}}updateChild(t,r){const i=cn(t);if(null===i)return r;{(0,U.hu)(".priority"!==cn(t)||1===gf(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(tr(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(ar,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!t&&l&&o<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+wU(this.getPriority().val())+":"),this.forEachChild(ar,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":OL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new fn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new fn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new fn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,fn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,fn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===F0?-1:0}withIndex(t){if(t===zl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===zl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ar),o=r.getIterator(ar);let l=i.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=o.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===zl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const F0=new class jW extends rn{constructor(){super(new uo(ZM),rn.EMPTY_NODE,ad.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return rn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(fn,{MIN:{value:new fn(ff,rn.EMPTY_NODE)},MAX:{value:new fn(od,F0)}}),vU.__EMPTY_NODE=rn.EMPTY_NODE,sy.__childrenNodeConstructor=rn,function OW(n){YM=n}(F0),function LW(n){DU=n}(F0);const $W=!0;function jr(n,e=null){if(null===n)return rn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new sy(n,jr(e));if(n instanceof Array||!$W){let t=rn.EMPTY_NODE;return qi(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const o=jr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(jr(e))}{const t=[];let r=!1;if(qi(n,(l,h)=>{if("."!==l.substring(0,1)){const m=jr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new fn(l,m)))}}),0===t.length)return rn.EMPTY_NODE;const o=Gb(t,kW,l=>l.name,ZM);if(r){const l=Gb(t,ar.getCompare());return new rn(o,jr(e),new ad({".priority":l},{".priority":ar}))}return new rn(o,jr(e),ad.Default)}}!function FW(n){CU=n}(jr);class XM extends jb{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!dn(e)&&".priority"!==cn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Ag(e.name,t.name):o}makePost(e,t){const r=jr(e),i=rn.EMPTY_NODE.updateChild(this.indexPath_,r);return new fn(t,i)}maxPost(){const e=rn.EMPTY_NODE.updateChild(this.indexPath_,F0);return new fn(od,e)}toString(){return P0(this.indexPath_,0).join("/")}}const JM=new class HW extends jb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ag(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return fn.MIN}maxPost(){return fn.MAX}makePost(e,t){const r=jr(e);return new fn(t,r)}toString(){return".value"}};function bU(n){return{type:"value",snapshotNode:n}}function ay(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function L0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function U0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class eN{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(L0(t,h)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(ay(t,r)):l.trackChildChange(U0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ar,(i,o)=>{t.hasChild(i)||r.trackChildChange(L0(i,o))}),t.isLeafNode()||t.forEachChild(ar,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(U0(i,o,l))}else r.trackChildChange(ay(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?rn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class V0{constructor(e){this.indexedFilter_=new eN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=V0.getStartPost_(e),this.endPost_=V0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,l){return this.matches(new fn(t,r))||(r=rn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=rn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(rn.EMPTY_NODE);const o=this;return t.forEachChild(ar,(l,h)=>{o.matches(new fn(l,h))||(i=i.updateImmediateChild(l,rn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class zW{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new V0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new fn(t,r))||(r=rn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=rn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=rn.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(rn.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;o.hasNext();){const h=o.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,rn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,j)=>S(j,P)}else l=this.index_.getCompare();const h=e;(0,U.hu)(h.numChildren()===this.limit_,"");const m=new fn(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||h.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const j=null==P?1:l(P,m);if(D&&!r.isEmpty()&&j>=0)return o?.trackChildChange(U0(t,r,S)),h.updateImmediateChild(t,r);{o?.trackChildChange(L0(t,S));const ue=h.updateImmediateChild(t,rn.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(o?.trackChildChange(ay(P.name,P.node)),ue.updateImmediateChild(P.name,P.node)):ue}}return r.isEmpty()?e:D&&l(v,m)>=0?(null!=o&&(o.trackChildChange(L0(v.name,v.node)),o.trackChildChange(ay(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,rn.EMPTY_NODE)):e}}class zb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ar}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ff}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:od}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ar}copy(){const e=new zb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function nN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Wb(n,e){const t=n.copy();return t.index_=e,t}function TU(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ar?t="$priority":n.index_===JM?t="$value":n.index_===zl?t="$key":((0,U.hu)(n.index_ instanceof XM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,U.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,U.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,U.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function SU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ar&&(e.i=n.index_.toString()),e}class qb extends dU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=R0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=qb.getListenId_(e,r),h={};this.listens_[l]=h;const m=TU(e._queryParams);this.restRequest_(o+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(o,S,!1,r),(0,U.DV)(this.listens_,l)===h){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=qb.getListenId_(e,t);delete this.listens_[r]}get(e){const t=TU(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(o,l)=>{let h=l;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,U.cI)(h.responseText)}catch{ys("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&ys("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class QW{constructor(){this.rootNode_=rn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Kb(){return{value:null,children:new Map}}function uy(n,e,t){if(dn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=cn(e);n.children.has(r)||n.children.set(r,Kb()),uy(n.children.get(r),e=tr(e),t)}}function rN(n,e){if(dn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ar,(r,i)=>{uy(n,new Nn(r),i)}),rN(n,e)}}if(n.children.size>0){const t=cn(e);return e=tr(e),n.children.has(t)&&rN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function iN(n,e,t){null!==n.value?t(e,n.value):function XW(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{iN(i,new Nn(e.toString()+"/"+r),t)})}class JW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&qi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class n4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new JW(e);const r=1e4+2e4*Math.random();M0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;qi(e,(i,o)=>{o>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),M0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fa||(Fa={})),Fa))();function aN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Zb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Fa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(dn(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new Zb(bn(),t,this.revert)}}return(0,U.hu)(cn(this.path)===e,"operationForChild called for unrelated child."),new Zb(tr(this.path),this.affectedTree,this.revert)}}class B0{constructor(e,t){this.source=e,this.path=t,this.type=Fa.LISTEN_COMPLETE}operationForChild(e){return dn(this.path)?new B0(this.source,bn()):new B0(this.source,tr(this.path))}}class Mg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Fa.OVERWRITE}operationForChild(e){return dn(this.path)?new Mg(this.source,bn(),this.snap.getImmediateChild(e)):new Mg(this.source,tr(this.path),this.snap)}}class ly{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Fa.MERGE}operationForChild(e){if(dn(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new Mg(this.source,bn(),t.value):new ly(this.source,bn(),t)}return(0,U.hu)(cn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ly(this.source,tr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(dn(e))return this.isFullyInitialized()&&!this.filtered_;const t=cn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class r4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function j0(n,e,t,r,i,o){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function o4(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new fn(e.childName,e.snapshotNode),i=new fn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function s4(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function Yb(n,e){return{eventCache:n,serverCache:e}}function $0(n,e,t,r){return Yb(new mf(e,t,r),n.serverCache)}function RU(n,e,t,r){return Yb(n.eventCache,new mf(e,t,r))}function Qb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ng(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let uN;class ur{constructor(e,t=(()=>(uN||(uN=new uo(Gz)),uN))()){this.value=e,this.children=t}static fromObject(e){let t=new ur(null);return qi(e,(r,i)=>{t=t.set(new Nn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bn(),value:this.value};if(dn(e))return null;{const r=cn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(tr(e),t);return null!=o?{path:Rr(new Nn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(dn(e))return this;{const t=cn(e),r=this.children.get(t);return null!==r?r.subtree(tr(e)):new ur(null)}}set(e,t){if(dn(e))return new ur(t,this.children);{const r=cn(e),o=(this.children.get(r)||new ur(null)).set(tr(e),t),l=this.children.insert(r,o);return new ur(this.value,l)}}remove(e){if(dn(e))return this.children.isEmpty()?new ur(null):new ur(null,this.children);{const t=cn(e),r=this.children.get(t);if(r){const i=r.remove(tr(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new ur(null):new ur(this.value,o)}return this}}get(e){if(dn(e))return this.value;{const t=cn(e),r=this.children.get(t);return r?r.get(tr(e)):null}}setTree(e,t){if(dn(e))return t;{const r=cn(e),o=(this.children.get(r)||new ur(null)).setTree(tr(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new ur(this.value,l)}}fold(e){return this.fold_(bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Rr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(dn(e))return null;{const o=cn(e),l=this.children.get(o);return l?l.findOnPath_(tr(e),Rr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bn(),t)}foreachOnPath_(e,t,r){if(dn(e))return this;{this.value&&r(t,this.value);const i=cn(e),o=this.children.get(i);return o?o.foreachOnPath_(tr(e),Rr(t,i),r):new ur(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Rr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Uu{constructor(e){this.writeTree_=e}static empty(){return new Uu(new ur(null))}}function H0(n,e,t){if(dn(e))return new Uu(new ur(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=ks(i,e);return o=o.updateChild(l,t),new Uu(n.writeTree_.set(i,o))}{const i=new ur(t),o=n.writeTree_.setTree(e,i);return new Uu(o)}}}function lN(n,e,t){let r=n;return qi(t,(i,o)=>{r=H0(r,Rr(e,i),o)}),r}function xU(n,e){if(dn(e))return Uu.empty();{const t=n.writeTree_.setTree(e,new ur(null));return new Uu(t)}}function cN(n,e){return null!=Pg(n,e)}function Pg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ks(t.path,e)):null}function MU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ar,(r,i)=>{e.push(new fn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new fn(r,i.value))}),e}function _f(n,e){if(dn(e))return n;{const t=Pg(n,e);return new Uu(null!=t?new ur(t):n.writeTree_.subtree(e))}}function dN(n){return n.writeTree_.isEmpty()}function cy(n,e){return NU(bn(),n.writeTree_,e)}function NU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,U.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=NU(Rr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Rr(n,".priority"),r)),t}}function Xb(n,e){return LU(e,n)}function h4(n,e){if(n.snap)return Oa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Oa(Rr(n.path,t),e))return!0;return!1}function p4(n){return n.visible}function PU(n,e,t){let r=Uu.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let h;if(o.snap)Oa(t,l)?(h=ks(t,l),r=H0(r,h,o.snap)):Oa(l,t)&&(h=ks(l,t),r=H0(r,bn(),o.snap.getChild(h)));else{if(!o.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(Oa(t,l))h=ks(t,l),r=lN(r,h,o.children);else if(Oa(l,t))if(h=ks(l,t),dn(h))r=lN(r,bn(),o.children);else{const m=(0,U.DV)(o.children,cn(h));if(m){const v=m.getChild(tr(h));r=H0(r,bn(),v)}}}}}return r}function kU(n,e,t,r,i){if(r||i){const o=_f(n.visibleWrites,e);return!i&&dN(o)?t:i||null!=t||cN(o,bn())?cy(PU(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Oa(v.path,e)||Oa(e,v.path))},e),t||rn.EMPTY_NODE):null}{const o=Pg(n.visibleWrites,e);if(null!=o)return o;{const l=_f(n.visibleWrites,e);return dN(l)?t:null!=t||cN(l,bn())?cy(l,t||rn.EMPTY_NODE):null}}}function Jb(n,e,t,r){return kU(n.writeTree,n.treePath,e,t,r)}function hN(n,e){return function g4(n,e,t){let r=rn.EMPTY_NODE;const i=Pg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ar,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=_f(n.visibleWrites,e);return t.forEachChild(ar,(l,h)=>{const m=cy(_f(o,new Nn(l)),h);r=r.updateImmediateChild(l,m)}),MU(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return MU(_f(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function OU(n,e,t,r){return function m4(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Rr(e,t);if(cN(n.visibleWrites,o))return null;{const l=_f(n.visibleWrites,o);return dN(l)?i.getChild(t):cy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function eT(n,e){return function y4(n,e){return Pg(n.visibleWrites,e)}(n.writeTree,Rr(n.treePath,e))}function fN(n,e,t){return function _4(n,e,t,r){const i=Rr(e,t),o=Pg(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?cy(_f(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function FU(n,e){return LU(Rr(n.treePath,e),n.writeTree)}function LU(n,e){return{treePath:n,writeTree:e}}class I4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,U0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,L0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,ay(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,U0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const UU=new class C4{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class pN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new mf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ng(this.viewCache_),o=function E4(n,e,t,r,i,o){return function v4(n,e,t,r,i,o,l){let h;const m=_f(n.visibleWrites,e),v=Pg(m,bn());if(null!=v)h=v;else{if(null==t)return[];h=cy(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),P=o?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let j=P.getNext();for(;j&&D.length<i;)0!==S(j,r)&&D.push(j),j=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function VU(n,e,t,r,i,o){const l=e.eventCache;if(null!=eT(r,t))return e;{let h,m;if(dn(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Ng(e),S=hN(r,v instanceof rn?v:rn.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const v=Jb(r,Ng(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const v=cn(t);if(".priority"===v){(0,U.hu)(1===gf(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=OU(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=tr(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const P=OU(r,t,l.getNode(),m);S=null!=P?l.getNode().getImmediateChild(v).updateChild(D,P):l.getNode().getImmediateChild(v)}else S=fN(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,o):l.getNode()}}return $0(e,h,l.isFullyInitialized()||dn(t),n.filter.filtersNodes())}}function tT(n,e,t,r,i,o,l,h){const m=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(dn(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const j=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),j,null)}else{const j=cn(t);if(!m.isCompleteForPath(t)&&gf(t)>1)return e;const W=tr(t),fe=m.getNode().getImmediateChild(j).updateChild(W,r);v=".priority"===j?D.updatePriority(m.getNode(),fe):D.updateChild(m.getNode(),j,fe,W,UU,null)}const S=RU(e,v,m.isFullyInitialized()||dn(t),D.filtersNodes());return VU(n,S,t,i,new pN(i,S,o),h)}function gN(n,e,t,r,i,o,l){const h=e.eventCache;let m,v;const D=new pN(i,e,o);if(dn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=$0(e,v,!0,n.filter.filtersNodes());else{const S=cn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=$0(e,v,h.isFullyInitialized(),h.isFiltered());else{const P=tr(t),j=h.getNode().getImmediateChild(S);let W;if(dn(P))W=r;else{const ue=D.getCompleteChild(S);W=null!=ue?".priority"===WM(P)&&ue.getChild(gU(P)).isEmpty()?ue:ue.updateChild(P,r):rn.EMPTY_NODE}m=j.equals(W)?e:$0(e,n.filter.updateChild(h.getNode(),S,W,P,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function BU(n,e){return n.eventCache.isCompleteForChild(e)}function jU(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function mN(n,e,t,r,i,o,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=dn(t)?r:new ur(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const W=jU(0,e.serverCache.getNode().getImmediateChild(S),P);m=tT(n,m,new Nn(S),W,i,o,l,h)}}),v.children.inorderTraversal((S,P)=>{const j=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!D.hasChild(S)&&!j){const ue=jU(0,e.serverCache.getNode().getImmediateChild(S),P);m=tT(n,m,new Nn(S),ue,i,o,l,h)}}),m}class N4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new eN(r.getIndex()),o=function WW(n){return n.loadsAllData()?new eN(n.getIndex()):n.hasLimit()?new zW(n):new V0(n)}(r);this.processor_=function D4(n){return{filter:n}}(o);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(rn.EMPTY_NODE,l.getNode(),null),v=o.updateFullNode(rn.EMPTY_NODE,h.getNode(),null),D=new mf(m,l.isFullyInitialized(),i.filtersNodes()),S=new mf(v,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=Yb(S,D),this.eventGenerator_=new r4(this.query_)}get query(){return this.query_}}function O4(n,e){const t=Ng(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!dn(e)&&!t.getImmediateChild(cn(e)).isEmpty())?t.getChild(e):null}function $U(n){return 0===n.eventRegistrations_.length}function HU(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function GU(n,e,t,r){e.type===Fa.MERGE&&null!==e.source.queryId&&((0,U.hu)(Ng(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(Qb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function T4(n,e,t,r,i){const o=new I4;let l,h;if(t.type===Fa.OVERWRITE){const v=t;v.source.fromUser?l=gN(n,e,v.path,v.snap,r,i,o):((0,U.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!dn(v.path),l=tT(n,e,v.path,v.snap,r,i,h,o))}else if(t.type===Fa.MERGE){const v=t;v.source.fromUser?l=function A4(n,e,t,r,i,o,l){let h=e;return r.foreach((m,v)=>{const D=Rr(t,m);BU(e,cn(D))&&(h=gN(n,h,D,v,i,o,l))}),r.foreach((m,v)=>{const D=Rr(t,m);BU(e,cn(D))||(h=gN(n,h,D,v,i,o,l))}),h}(n,e,v.path,v.children,r,i,o):((0,U.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=mN(n,e,v.path,v.children,r,i,h,o))}else if(t.type===Fa.ACK_USER_WRITE){const v=t;l=v.revert?function M4(n,e,t,r,i,o){let l;if(null!=eT(r,t))return e;{const h=new pN(r,e,i),m=e.eventCache.getNode();let v;if(dn(t)||".priority"===cn(t)){let D;if(e.serverCache.isFullyInitialized())D=Jb(r,Ng(e));else{const S=e.serverCache.getNode();(0,U.hu)(S instanceof rn,"serverChildren would be complete if leaf node"),D=hN(r,S)}v=n.filter.updateFullNode(m,D,o)}else{const D=cn(t);let S=fN(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,tr(t),h,o):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,rn.EMPTY_NODE,tr(t),h,o):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Jb(r,Ng(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=eT(r,bn()),$0(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,o):function R4(n,e,t,r,i,o,l){if(null!=eT(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(dn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return tT(n,e,t,m.getNode().getChild(t),i,o,h,l);if(dn(t)){let v=new ur(null);return m.getNode().forEachChild(zl,(D,S)=>{v=v.set(new Nn(D),S)}),mN(n,e,t,v,i,o,h,l)}return e}{let v=new ur(null);return r.foreach((D,S)=>{const P=Rr(t,D);m.isCompleteForPath(P)&&(v=v.set(D,m.getNode().getChild(P)))}),mN(n,e,t,v,i,o,h,l)}}(n,e,v.path,v.affectedTree,r,i,o)}else{if(t.type!==Fa.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);l=function x4(n,e,t,r,i){const o=e.serverCache;return VU(n,RU(e,o.getNode(),o.isFullyInitialized()||dn(t),o.isFiltered()),t,r,UU,i)}(n,e,t.path,r,o)}const m=o.getChanges();return function S4(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(bU(Qb(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function b4(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,U.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,zU(n,o.changes,o.viewCache.eventCache.getNode(),null)}function zU(n,e,t,r){return function i4(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function GW(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),j0(n,i,"child_removed",e,r,t),j0(n,i,"child_added",e,r,t),j0(n,i,"child_moved",o,r,t),j0(n,i,"child_changed",e,r,t),j0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let nT,iT;class WU{constructor(){this.views=new Map}}function _N(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,U.hu)(null!=o,"SyncTree gave us an op for an invalid query."),GU(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat(GU(l,e,t,r));return o}}function qU(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=Jb(t,i?r:null),m=!1;h?m=!0:r instanceof rn?(h=hN(t,r),m=!1):(h=rn.EMPTY_NODE,m=!1);const v=Yb(new mf(h,m,!1),new mf(r,i,!1));return new N4(e,v)}return l}function KU(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yf(n,e){let t=null;for(const r of n.views.values())t=t||O4(r,e);return t}function ZU(n,e){return e._queryParams.loadsAllData()?rT(n):n.views.get(e._queryIdentifier)}function YU(n,e){return null!=ZU(n,e)}function vf(n){return null!=rT(n)}function rT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let z4=1;class QU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ur(null),this.pendingWriteTree_=function w4(){return{visibleWrites:Uu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yN(n,e,t,r,i){return function u4(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=H0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?dy(n,new Mg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wf(n,e,t=!1){const r=function c4(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function d4(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&h4(h,r.path)?i=!1:Oa(r.path,h.path)&&(o=!0)),l--}return!!i&&(o?(function f4(n){n.visibleWrites=PU(n.allWrites,p4,bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=xU(n.visibleWrites,r.path):qi(r.children,m=>{n.visibleWrites=xU(n.visibleWrites,Rr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let o=new ur(null);return null!=r.snap?o=o.set(bn(),!0):qi(r.children,l=>{o=o.set(new Nn(l),!0)}),dy(n,new Zb(r.path,o,t))}return[]}function G0(n,e,t){return dy(n,new Mg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function sT(n,e,t,r,i=!1){const o=e._path,l=n.syncPointTree_.get(o);let h=[];if(l&&("default"===e._queryIdentifier||YU(l,e))){const m=function $4(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const h=vf(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(HU(v,t,r)),$U(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||o.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(HU(m,t,r)),$U(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||o.push(m.query)))}return h&&!vf(n)&&o.push(new(function V4(){return(0,U.hu)(nT,"Reference.ts has not been loaded"),nT}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,r);(function B4(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const v=m.removed;if(h=m.events,!i){const D=-1!==v.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(P,j)=>vf(j));if(D&&!S){const P=n.syncPointTree_.subtree(o);if(!P.isEmpty()){const j=function X4(n){return n.fold((e,t,r)=>{if(t&&vf(t))return[rT(t)];{let i=[];return t&&(i=KU(t)),qi(r,(o,l)=>{i=i.concat(l)}),i}})}(P);for(let W=0;W<j.length;++W){const ue=j[W],fe=ue.query,We=t2(n,ue);n.listenProvider_.startListening(W0(fe),z0(n,fe),We.hashFn,We.onComplete)}}}!S&&v.length>0&&!r&&(D?n.listenProvider_.stopListening(W0(e),null):v.forEach(P=>{const j=n.queryToTagMap.get(aT(P));n.listenProvider_.stopListening(W0(P),j)}))}!function J4(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=aT(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,v)}return h}function XU(n,e,t,r){const i=wN(n,r);if(null!=i){const o=EN(i),l=o.path,h=o.queryId,m=ks(l,e);return IN(n,l,new Mg(aN(h),m,t))}return[]}function vN(n,e,t,r=!1){const i=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,j)=>{const W=ks(P,i);o=o||yf(j,W),l=l||vf(j)});let m,h=n.syncPointTree_.get(i);h?(l=l||vf(h),o=o||yf(h,bn())):(h=new WU,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?m=!0:(m=!1,o=rn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((j,W)=>{const ue=yf(W,bn());ue&&(o=o.updateImmediateChild(j,ue))}));const v=YU(h,e);if(!v&&!e._queryParams.loadsAllData()){const P=aT(e);(0,U.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const j=function e3(){return z4++}();n.queryToTagMap.set(P,j),n.tagToQueryMap.set(j,P)}let S=function j4(n,e,t,r,i,o){const l=qU(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function F4(n,e){n.eventRegistrations_.push(e)}(l,t),function L4(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ar,(o,l)=>{r.push(ay(o,l))}),t.isFullyInitialized()&&r.push(bU(t.getNode())),zU(n,r,t.getNode(),e)}(l,t)}(h,e,t,Xb(n.pendingWriteTree_,i),o,m);if(!v&&!l&&!r){const P=ZU(h,e);S=S.concat(function t3(n,e,t){const r=e._path,i=z0(n,e),o=t2(n,t),l=n.listenProvider_.startListening(W0(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!vf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,D,S)=>{if(!dn(v)&&D&&vf(D))return[rT(D).query];{let P=[];return D&&(P=P.concat(KU(D).map(j=>j.query))),qi(S,(j,W)=>{P=P.concat(W)}),P}});for(let v=0;v<m.length;++v){const D=m[v];n.listenProvider_.stopListening(W0(D),z0(n,D))}}return l}(n,e,P))}return S}function oT(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=yf(h,ks(l,e));if(v)return v});return kU(i,e,o,t,!0)}function dy(n,e){return JU(e,n.syncPointTree_,null,Xb(n.pendingWriteTree_,bn()))}function JU(n,e,t,r){if(dn(n.path))return e2(n,e,t,r);{const i=e.get(bn());null==t&&null!=i&&(t=yf(i,bn()));let o=[];const l=cn(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,D=FU(r,l);o=o.concat(JU(h,m,v,D))}return i&&(o=o.concat(_N(i,n,r,t))),o}}function e2(n,e,t,r){const i=e.get(bn());null==t&&null!=i&&(t=yf(i,bn()));let o=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=FU(r,l),D=n.operationForChild(l);D&&(o=o.concat(e2(D,h,m,v)))}),i&&(o=o.concat(_N(i,n,r,t))),o}function t2(n,e){const t=e.query,r=z0(n,t);return{hashFn:()=>(function P4(n){return n.viewCache_.serverCache.getNode()}(e)||rn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Z4(n,e,t){const r=wN(n,t);if(r){const i=EN(r),o=i.path,l=i.queryId,h=ks(o,e);return IN(n,o,new B0(aN(l),h))}return[]}(n,t._path,r):function K4(n,e){return dy(n,new B0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function qz(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return sT(n,t,null,o)}}}}function z0(n,e){const t=aT(e);return n.queryToTagMap.get(t)}function aT(n){return n._path.toString()+"$"+n._queryIdentifier}function wN(n,e){return n.tagToQueryMap.get(e)}function EN(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function IN(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),_N(r,t,Xb(n.pendingWriteTree_,e),null)}function W0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function G4(){return(0,U.hu)(iT,"Reference.ts has not been loaded"),iT}())(n._repo,n._path):n}class CN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new CN(t)}node(){return this.node_}}class DN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Rr(this.path_,e);return new DN(this.syncTree_,t)}node(){return oT(this.syncTree_,this.path_)}}const n3=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},n2=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?r3(n[".sv"],e,t):"object"==typeof n[".sv"]?s3(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},r3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,U.hu)(!1,"Unexpected server value: "+n)},s3=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},r2=function(n,e,t,r){return TN(e,new DN(t,n),r)},bN=function(n,e,t){return TN(n,new CN(e),t)};function TN(n,e,t){const r=n.getPriority().val(),i=n2(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,h=n2(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new sy(h,jr(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new sy(i))),l.forEachChild(ar,(h,m)=>{const v=TN(m,e.getImmediateChild(h),t);v!==m&&(o=o.updateImmediateChild(h,v))}),o}}class SN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function uT(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,i=cn(t);for(;null!==i;){const o=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new SN(i,r,o),t=tr(t),i=cn(t)}return r}function kg(n){return n.node.value}function AN(n,e){n.node.value=e,RN(n)}function s2(n){return n.node.childCount>0}function lT(n,e){qi(n.node.children,(t,r)=>{e(new SN(t,n,r))})}function o2(n,e,t,r){t&&!r&&e(n),lT(n,i=>{o2(i,e,!0,r)}),t&&r&&e(n)}function q0(n){return new Nn(null===n.parent?n.name:q0(n.parent)+"/"+n.name)}function RN(n){null!==n.parent&&function u3(n,e,t){const r=function o3(n){return void 0===kg(n)&&!s2(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,RN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,RN(n))}(n.parent,n.name,n)}const l3=/[\[\].#$\/\u0000-\u001F\u007F]/,c3=/[\[\].#$\u0000-\u001F\u007F]/,xN=10485760,cT=function(n){return"string"==typeof n&&0!==n.length&&!l3.test(n)},a2=function(n){return"string"==typeof n&&0!==n.length&&!c3.test(n)},K0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Lb(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},Wl=function(n,e,t,r){r&&void 0===e||Z0((0,U.gK)(n,"value"),e,t)},Z0=function(n,e,t){const r=t instanceof Nn?new TW(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Rg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Rg(r)+" with contents = "+e.toString());if(Lb(e))throw new Error(n+"contains "+e.toString()+" "+Rg(r));if("string"==typeof e&&e.length>xN/3&&(0,U.ug)(e)>xN)throw new Error(n+"contains a string greater than "+xN+" utf8 bytes "+Rg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(qi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!cT(l)))throw new Error(n+" contains an invalid key ("+l+") "+Rg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function SW(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),mU(n)})(r,l),Z0(n,h,r),function AW(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Rg(r)+" in addition to actual children.")}},u2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];qi(e,(l,h)=>{const m=new Nn(l);if(Z0(i,h,Rr(t,m)),".priority"===WM(m)&&!K0(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=P0(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!cT(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(bW);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Oa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},MN=function(n,e,t){if(!t||void 0!==e){if(Lb(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!K0(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Y0=function(n,e,t,r){if(!(r&&void 0===t||cT(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Q0=function(n,e,t,r){if(!(r&&void 0===t||a2(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},f3=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Q0(n,e,t,r)},La=function(n,e){if(".info"===cn(e))throw new Error(n+" failed = Can't modify data under /.info/")},l2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!cT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),a2(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class p3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!qM(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function c2(n,e,t){dT(n,t),d2(n,r=>qM(r,e))}function $o(n,e,t){dT(n,t),d2(n,r=>Oa(r,e)||Oa(e,r))}function d2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(g3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function g3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Sg&&Wi("event: "+t.toString()),ry(r)}}}const h2="repo_interrupt",m3=25;class _3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new p3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kb(),this.transactionQueueTree_=new SN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function f2(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function X0(n){return n3({timestamp:f2(n)})}function p2(n,e,t,r,i){n.dataUpdateCount++;const o=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,U.UI)(t,v=>jr(v));l=function Y4(n,e,t,r){const i=wN(n,r);if(i){const o=EN(i),l=o.path,h=o.queryId,m=ks(l,e),v=ur.fromObject(t);return IN(n,l,new ly(aN(h),m,v))}return[]}(n.serverSyncTree_,o,m,i)}else{const m=jr(t);l=XU(n.serverSyncTree_,o,m,i)}else if(r){const m=(0,U.UI)(t,v=>jr(v));l=function q4(n,e,t){const r=ur.fromObject(t);return dy(n,new ly({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,m)}else{const m=jr(t);l=G0(n.serverSyncTree_,o,m)}let h=o;l.length>0&&(h=fy(n,o)),$o(n.eventQueue_,h,l)}function g2(n,e){NN(n,"connected",e),!1===e&&function I3(n){hy(n,"onDisconnectEvents");const e=X0(n),t=Kb();iN(n.onDisconnect_,bn(),(i,o)=>{const l=r2(i,o,n.serverSyncTree_,e);uy(t,i,l)});let r=[];iN(t,bn(),(i,o)=>{r=r.concat(G0(n.serverSyncTree_,i,o));const l=FN(n,i);fy(n,l)}),n.onDisconnect_=Kb(),$o(n.eventQueue_,bn(),r)}(n)}function NN(n,e,t){const r=new Nn("/.info/"+e),i=jr(t);n.infoData_.updateSnapshot(r,i);const o=G0(n.infoSyncTree_,r,i);$o(n.eventQueue_,r,o)}function hT(n){return n.nextWriteId_++}function PN(n,e,t,r,i){hy(n,"set",{path:e.toString(),value:t,priority:r});const o=X0(n),l=jr(t,r),h=oT(n.serverSyncTree_,e),m=bN(l,h,o),v=hT(n),D=yN(n.serverSyncTree_,e,m,v,!0);dT(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,j)=>{const W="ok"===P;W||ys("set at "+e+" failed: "+P);const ue=wf(n.serverSyncTree_,v,!W);$o(n.eventQueue_,e,ue),Ef(0,i,P,j)});const S=FN(n,e);fy(n,S),$o(n.eventQueue_,S,[])}function C3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&rN(n.onDisconnect_,e),Ef(0,t,r,i)})}function m2(n,e,t,r){const i=jr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&uy(n.onDisconnect_,e,i),Ef(0,r,o,l)})}function kN(n,e,t){let r;r=".info"===cn(e._path)?sT(n.infoSyncTree_,e,t):sT(n.serverSyncTree_,e,t),c2(n.eventQueue_,e._path,r)}function _2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(h2)}function hy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Wi(t,...e)}function Ef(n,e,t,r){e&&ry(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function ON(n,e,t){return oT(n.serverSyncTree_,e,t)||rn.EMPTY_NODE}function fT(n,e=n.transactionQueueTree_){if(e||pT(n,e),kg(e)){const t=v2(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function R3(n,e,t){const r=t.map(v=>v.currentWriteId),i=ON(n,e,r);let o=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,U.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=ks(e,D.path);o=o.updateChild(S,D.currentOutputSnapshotRaw)}const h=o.val(!0),m=e;n.server_.put(m.toString(),h,v=>{hy(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(wf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();pT(n,uT(n.transactionQueueTree_,e)),fT(n,n.transactionQueueTree_),$o(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)ry(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ys("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}fy(n,e)}},l)}(n,q0(e),t)}else s2(e)&&lT(e,t=>{fT(n,t)})}function fy(n,e){const t=y2(n,e),r=q0(t);return function x3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=ks(t,m.path);let S,D=!1;if((0,U.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(wf(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=m3)D=!0,S="maxretry",i=i.concat(wf(n.serverSyncTree_,m.currentWriteId,!0));else{const P=ON(n,m.path,l);m.currentInputSnapshot=P;const j=e[h].update(P.val());if(void 0!==j){Z0("transaction failed: Data returned ",j,m.path);let W=jr(j);"object"==typeof j&&null!=j&&(0,U.r3)(j,".priority")||(W=W.updatePriority(P.getPriority()));const fe=m.currentWriteId,We=X0(n),ot=bN(W,P,We);m.currentOutputSnapshotRaw=W,m.currentOutputSnapshotResolved=ot,m.currentWriteId=hT(n),l.splice(l.indexOf(fe),1),i=i.concat(yN(n.serverSyncTree_,m.path,ot,m.currentWriteId,m.applyLocally)),i=i.concat(wf(n.serverSyncTree_,fe,!0))}else D=!0,S="nodata",i=i.concat(wf(n.serverSyncTree_,m.currentWriteId,!0))}$o(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}pT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)ry(r[h]);fT(n,n.transactionQueueTree_)}(n,v2(n,t),r),r}function y2(n,e){let t,r=n.transactionQueueTree_;for(t=cn(e);null!==t&&void 0===kg(r);)r=uT(r,t),t=cn(e=tr(e));return r}function v2(n,e){const t=[];return w2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function w2(n,e,t){const r=kg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lT(e,i=>{w2(n,i,t)})}function pT(n,e){const t=kg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,AN(e,t.length>0?t:void 0)}lT(e,r=>{pT(n,r)})}function FN(n,e){const t=q0(y2(n,e)),r=uT(n.transactionQueueTree_,e);return function a3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{LN(n,i)}),LN(n,r),o2(r,i=>{LN(n,i)}),t}function LN(n,e){const t=kg(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,U.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,U.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(wf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?AN(e,void 0):t.length=o+1,$o(n.eventQueue_,q0(e),i);for(let l=0;l<r.length;l++)ry(r[l])}}const UN=function(n,e){const t=P3(n),r=t.namespace;return"firebase.com"===t.domain&&Gl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Gl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ys("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new BM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Nn(t.pathString)}},P3=function(n){let e="",t="",r="",i="",o="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function M3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const P=function N3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ys(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const j=e.slice(0,v);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),o=r}"ns"in P&&(o=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:o}},E2="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",k3=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=E2.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=E2.charAt(e[i]);return(0,U.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class I2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class C2{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class VN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class D2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return C3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){La("OnDisconnect.remove",this._path);const e=new U.BH;return m2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){La("OnDisconnect.set",this._path),Wl("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return m2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){La("OnDisconnect.setWithPriority",this._path),Wl("OnDisconnect.setWithPriority",e,this._path,!1),MN("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function D3(n,e,t,r,i){const o=jr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,h)=>{"ok"===l&&uy(n.onDisconnect_,e,o),Ef(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){La("OnDisconnect.update",this._path),u2("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function b3(n,e,t,r){if((0,U.xb)(t))return Wi("onDisconnect().update() called with empty data.  Don't do anything."),void Ef(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&qi(t,(l,h)=>{const m=jr(h);uy(n.onDisconnect_,Rr(e,l),m)}),Ef(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class lo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return dn(this._path)?null:WM(this._path)}get ref(){return new Ua(this._repo,this._path)}get _queryIdentifier(){const e=SU(this._queryParams),t=UM(e);return"{}"===t?"default":t}get _queryObject(){return SU(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof lo))return!1;const t=this._repo===e._repo,r=qM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function DW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function gT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function If(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===zl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ff)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==od)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ar){if(null!=e&&!K0(e)||null!=t&&!K0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof XM||n.getIndex()===JM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ua extends lo{constructor(e,t){super(e,t,new zb,!1)}get parent(){const e=gU(this._path);return null===e?null:new Ua(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Og{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=Fg(this.ref,e);return new Og(this._node.getChild(t),r,ar)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Og(i,Fg(this.ref,r),ar)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function b2(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?Fg(n._root,e):n._root}function T2(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=UN(e,n._repo.repoInfo_.nodeAdmin);l2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Gl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),b2(n,t.path.toString())}function Fg(n,e){return null===cn((n=(0,U.m9)(n))._path)?f3("child","path",e,!1):Q0("child","path",e,!1),new Ua(n._repo,Rr(n._path,e))}function BN(n,e){n=(0,U.m9)(n),La("set",n._path),Wl("set",e,n._path,!1);const t=new U.BH;return PN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function V3(n,e){u2("update",e,n._path,!1);const t=new U.BH;return function E3(n,e,t,r){hy(n,"update",{path:e.toString(),value:t});let i=!0;const o=X0(n),l={};if(qi(t,(h,m)=>{i=!1,l[h]=r2(Rr(e,h),jr(m),n.serverSyncTree_,o)}),i)Wi("update() called with empty data.  Don't do anything."),Ef(0,r,"ok",void 0);else{const h=hT(n),m=function W4(n,e,t,r){!function l4(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=lN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=ur.fromObject(t);return dy(n,new ly({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);dT(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||ys("update at "+e+" failed: "+v);const P=wf(n.serverSyncTree_,h,!S),j=P.length>0?fy(n,e):e;$o(n.eventQueue_,j,P),Ef(0,r,v,D)}),qi(t,v=>{const D=FN(n,Rr(e,v));fy(n,D)}),$o(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function B3(n){n=(0,U.m9)(n);const e=new VN(()=>{}),t=new J0(e);return function w3(n,e,t){const r=function Q4(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=ks(v,t);r=r||yf(D,S)});let i=n.syncPointTree_.get(t);i?r=r||yf(i,bn()):(i=new WU,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,l=o?new mf(r,!0,!1):null;return function k4(n){return Qb(n.viewCache_)}(qU(i,e,Xb(n.pendingWriteTree_,e._path),o?l.getNode():rn.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=jr(i).withIndex(e._queryParams.getIndex());let l;if(vN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=G0(n.serverSyncTree_,e._path,o);else{const h=z0(n.serverSyncTree_,e);l=XU(n.serverSyncTree_,e._path,o,h)}return $o(n.eventQueue_,e._path,l),sT(n.serverSyncTree_,e,t,null,!0),o},i=>(hy(n,"get for query "+(0,U.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Og(r,new Ua(n._repo,n._path),n._queryParams.getIndex()))}class J0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new I2("value",this,new Og(e.snapshotNode,new Ua(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new C2(this,e,t):null}matches(e){return e instanceof J0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class _T{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new C2(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=Fg(new Ua(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new I2(e.type,this,new Og(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof _T&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function eE(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const m=t,v=(D,S)=>{kN(n._repo,n,h),m(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new VN(t,o||void 0),h="value"===e?new J0(l):new _T(e,l);return function T3(n,e,t){let r;r=".info"===cn(e._path)?vN(n.infoSyncTree_,e,t):vN(n.serverSyncTree_,e,t),c2(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>kN(n._repo,n,h)}function jN(n,e,t,r){return eE(n,"value",e,t,r)}function S2(n,e,t,r){return eE(n,"child_added",e,t,r)}function A2(n,e,t,r){return eE(n,"child_changed",e,t,r)}function R2(n,e,t,r){return eE(n,"child_moved",e,t,r)}function x2(n,e,t,r){return eE(n,"child_removed",e,t,r)}function M2(n,e,t){let r=null;const i=t?new VN(t):null;"value"===e?r=new J0(i):e&&(r=new _T(e,i)),kN(n._repo,n,r)}class Vu{}class N2 extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wl("endAt",this._value,e._path,!0);const t=nN(e._queryParams,this._value,this._key);if(mT(t),If(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class $3 extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wl("endBefore",this._value,e._path,!1);const t=function YW(n,e,t){let r;return r=nN(n,e,n.index_===zl||t?t:ff),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(mT(t),If(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class P2 extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wl("startAt",this._value,e._path,!0);const t=tN(e._queryParams,this._value,this._key);if(mT(t),If(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class z3 extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wl("startAfter",this._value,e._path,!1);const t=function ZW(n,e,t){let r;return r=tN(n,e,n.index_===zl||t?t:od),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(mT(t),If(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new lo(e._repo,e._path,t,e._orderByCalled)}}class q3 extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new lo(e._repo,e._path,function qW(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Z3 extends Vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new lo(e._repo,e._path,function KW(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Q3 extends Vu{constructor(e){super(),this._path=e}_apply(e){gT(e,"orderByChild");const t=new Nn(this._path);if(dn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new XM(t),i=Wb(e._queryParams,r);return If(i),new lo(e._repo,e._path,i,!0)}}class J3 extends Vu{_apply(e){gT(e,"orderByKey");const t=Wb(e._queryParams,zl);return If(t),new lo(e._repo,e._path,t,!0)}}class t6 extends Vu{_apply(e){gT(e,"orderByPriority");const t=Wb(e._queryParams,ar);return If(t),new lo(e._repo,e._path,t,!0)}}class r6 extends Vu{_apply(e){gT(e,"orderByValue");const t=Wb(e._queryParams,JM);return If(t),new lo(e._repo,e._path,t,!0)}}class s6 extends Vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Wl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new N2(this._value,this._key)._apply(new P2(this._value,this._key)._apply(e))}}function Bu(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function U4(n){(0,U.hu)(!nT,"__referenceConstructor has already been defined"),nT=n})(Ua),function H4(n){(0,U.hu)(!iT,"__referenceConstructor has already been defined"),iT=n}(Ua);const a6="FIREBASE_DATABASE_EMULATOR_HOST",$N={};let k2=!1;function O2(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Gl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wi("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=UN(o,i),h=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env[a6]),v?(m=!0,o=`http://${v}?ns=${h.namespace}`,l=UN(o,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new N0(N0.OWNER):new Jz(n.name,n.options,e);l2("Invalid Firebase Database URL",l),dn(l.path)||Gl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function c6(n,e,t,r){let i=$N[e.name];i||(i={},$N[e.name]=i);let o=i[n.toURLString()];return o&&Gl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new _3(n,k2,t,r),i[n.toURLString()]=o,o}(h,n,D,new Xz(n.name,t));return new h6(S,n)}class h6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function y3(n,e,t){if(n.stats_=HM(n.repoInfo_),n.forceRestClient_||Qz())n.server_=new qb(n.repoInfo_,(r,i,o,l)=>{p2(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>g2(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new xg(n.repoInfo_,e,(r,i,o,l)=>{p2(n,r,i,o,l)},r=>{g2(n,r)},r=>{!function v3(n,e){qi(e,(t,r)=>{NN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function nW(n,e){const t=n.toString();return $M[t]||($M[t]=e()),$M[t]}(n.repoInfo_,()=>new n4(n.stats_,n.server_)),n.infoData_=new QW,n.infoSyncTree_=new QU({startListening:(r,i,o,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=G0(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),NN(n,"connected",!1),n.serverSyncTree_=new QU({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(h,m)=>{const v=l(h,m);$o(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ua(this._repo,bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function l6(n,e){const t=$N[e];(!t||t[n.key]!==n)&&Gl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),_2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Gl("Cannot call "+e+" on a deleted database.")}}function F2(){rU.IS_TRANSPORT_INITIALIZED&&ys("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function f6(){F2(),pf.forceDisallow()}function p6(){F2(),iy.forceDisallow(),pf.forceAllow()}function _6(n,e){LL(n,e)}const v6={".sv":"timestamp"};class I6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}xg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},xg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function y6(n){NL(yi.SDK_VERSION),(0,yi._registerComponent)(new Ea.wA("database",(e,{instanceIdentifier:t})=>O2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,yi.registerVersion)(xL,"0.14.4",n),(0,yi.registerVersion)(xL,"0.14.4","esm2017")}();const T6=new wa.Yd("@firebase/database-compat"),U2=function(n){T6.warn("FIREBASE WARNING: "+n)};class R6{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,U2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class x6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Cf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Q0("DataSnapshot.child","path",e,!1),new Cf(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Q0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Cf(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ho(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ss{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const l=ss.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new Cf(this.database,v),D)};h.userCallback=t,h.context=l.context;const m=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return jN(this._delegate,h,m),t;case"child_added":return S2(this._delegate,h,m),t;case"child_removed":return x2(this._delegate,h,m),t;case"child_changed":return A2(this._delegate,h,m),t;case"child_moved":return R2(this._delegate,h,m),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,M2(this._delegate,e,i)}else M2(this._delegate,e)}get(){return B3(this._delegate).then(e=>new Cf(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const o=ss.getCancelAndContextArgs_("Query.once",r,i),l=new U.BH,h=(v,D)=>{const S=new Cf(this.database,v);t&&t.call(o.context,S,D),l.resolve(S)};h.userCallback=t,h.context=o.context;const m=v=>{o.cancel&&o.cancel.call(o.context,v),l.reject(v)};switch(e){case"value":jN(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":S2(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":x2(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":A2(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":R2(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new ss(this.database,Bu(this._delegate,function K3(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new q3(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new ss(this.database,Bu(this._delegate,function Y3(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Z3(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new ss(this.database,Bu(this._delegate,function X3(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Q0("orderByChild","path",n,!1),new Q3(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new ss(this.database,Bu(this._delegate,function e6(){return new J3}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new ss(this.database,Bu(this._delegate,function n6(){return new t6}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new ss(this.database,Bu(this._delegate,function i6(){return new r6}()))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new ss(this.database,Bu(this._delegate,function G3(n=null,e){return Y0("startAt","key",e,!0),new P2(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new ss(this.database,Bu(this._delegate,function W3(n,e){return Y0("startAfter","key",e,!0),new z3(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new ss(this.database,Bu(this._delegate,function j3(n,e){return Y0("endAt","key",e,!0),new N2(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new ss(this.database,Bu(this._delegate,function H3(n,e){return Y0("endBefore","key",e,!0),new $3(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new ss(this.database,Bu(this._delegate,function o6(n,e){return Y0("equalTo","key",e,!0),new s6(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ss))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ho(this.database,new Ua(this._delegate._repo,this._delegate._path))}}class Ho extends ss{constructor(e,t){super(e,new lo(t._repo,t._path,new zb,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ho(this.database,Fg(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ho(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Ho(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=BN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,U2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}La("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=V3(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function U3(n,e,t){if(La("setWithPriority",n._path),Wl("setWithPriority",e,n._path,!1),MN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return PN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function F3(n){return La("remove",n._path),BN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function C6(n,e,t){var r;if(n=(0,U.m9)(n),La("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new U.BH,h=jN(n,()=>{});return function A3(n,e,t,r,i,o){hy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:kL(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=ON(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Z0("transaction failed: Data returned ",m,l.path),l.status=0;const v=uT(n.transactionQueueTree_,e),D=kg(v)||[];let S;D.push(l),AN(v,D),"object"==typeof m&&null!==m&&(0,U.r3)(m,".priority")?(S=(0,U.DV)(m,".priority"),(0,U.hu)(K0(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(oT(n.serverSyncTree_,e)||rn.EMPTY_NODE).getPriority().val();const P=X0(n),j=jr(m,S),W=bN(j,h,P);l.currentOutputSnapshotRaw=j,l.currentOutputSnapshotResolved=W,l.currentWriteId=hT(n);const ue=yN(n.serverSyncTree_,e,W,l.currentWriteId,l.applyLocally);$o(n.eventQueue_,e,ue),fT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,D)=>{let S=null;m?o.reject(m):(S=new Og(D,new Ua(n._repo,n._path),ar),o.resolve(new I6(v,S)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new x6(o.committed,new Cf(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function L3(n,e){n=(0,U.m9)(n),La("setPriority",n._path),MN("setPriority",e,!1);const t=new U.BH;return PN(n._repo,Rr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function O3(n,e){n=(0,U.m9)(n),La("push",n._path),Wl("push",e,n._path,!0);const t=f2(n._repo),r=k3(t),i=Fg(n,r),o=Fg(n,r);let l;return l=null!=e?BN(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ho(this.database,l));t&&i.then(()=>t(null),l=>t(l));const o=new Ho(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return La("Reference.onDisconnect",this._delegate._path),new R6(new D2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class tE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:f6,forceLongPolling:p6}}useEmulator(e,t,r={}){!function L2(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Gl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new N0(N0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);o=new N0(l)}!function u6(n,e,t,r){n.repoInfo_=new BM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof Ho){const t=T2(this._delegate,e.toString());return new Ho(this,t)}{const t=b2(this._delegate,e);return new Ho(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=T2(this._delegate,e);return new Ho(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function g6(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),_2(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function m6(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function S3(n){n.persistentConnection_&&n.persistentConnection_.resume(h2)}(n._repo)}(this._delegate)}}tE.ServerValue={TIMESTAMP:function w6(){return v6}(),increment:n=>function E6(n){return{".sv":{increment:n}}}(n)};var N6=Object.freeze({__proto__:null,initStandalone:function M6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){NL(t);const l=new Ea.zt("auth-internal",new Ea.H0("database-standalone"));return l.setComponent(new Ea.wA("auth-internal",()=>r,"PRIVATE")),{instance:new tE(O2(n,l,void 0,e,o),n),namespace:i}}});const P6=tE.ServerValue;!function k6(n){n.INTERNAL.registerComponent(new Ea.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new tE(i,r)},"PUBLIC").setServiceProps({Reference:Ho,Query:ss,Database:tE,DataSnapshot:Cf,enableLogging:_6,INTERNAL:N6,ServerValue:P6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(BF.Z);const G6=new f.OlP("angularfire2.database.use-emulator"),z6=function(){return{"background-color":"gray"}},W6=function(){return{"background-color":"green"}};let q6=(()=>{class n{constructor(t,r,i,o){this.fb=t,this.fs=r,this.router=i,this.serviceFirebase=o}onCreateCourse(t){const r=t.value;this.router.navigateByUrl("/products"),this.fs.createCourse(r)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sH),f.Y36(p0),f.Y36(Ri),f.Y36(p0))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-input-form"]],decls:27,vars:4,consts:[["id","formContent"],[3,"ngSubmit"],["f","ngForm"],["for","courseName"],["name","courseName","type","text","ngModel","","required",""],["for","courseDescrption"],["name","courseDescrption","type","text","ngModel","","required",""],["for","courseDate"],["name","courseDate","type","date","ngModel","","required",""],["type","submit",3,"disabled","ngStyle"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"p"),f._uU(2,"Information"),f.qZA(),f.TgZ(3,"form",1,2),f.NdJ("ngSubmit",function(){f.CHM(i);const l=f.MAs(4);return f.KtG(r.onCreateCourse(l))}),f.TgZ(5,"label",3),f._uU(6,"Course Name"),f.qZA(),f._UZ(7,"br")(8,"input",4)(9,"br")(10,"br"),f.TgZ(11,"label",5),f._uU(12,"Course Description"),f.qZA(),f._UZ(13,"br")(14,"input",6)(15,"br")(16,"br"),f.TgZ(17,"label",7),f._uU(18,"Course Date"),f.qZA(),f._UZ(19,"br")(20,"input",8)(21,"br")(22,"br"),f.TgZ(23,"button",9),f._uU(24,"Submit"),f.qZA(),f.TgZ(25,"button"),f._uU(26,"Cancel"),f.qZA()()()}if(2&t){const i=f.MAs(4);f.xp6(23),f.Q6J("disabled",i.invalid)("ngStyle",i.invalid?f.DdM(2,z6):f.DdM(3,W6))}},dependencies:[as,Db,q_,fb,pb,Q_,E0,Y_],styles:["#formContent[_ngcontent-%COMP%]{margin:10px 50px}#formContent[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:auto 10px;width:150px}"]}),n})();const K6=function(){return{"background-color":"gray"}},Z6=function(){return{"background-color":"green"}},Y6=[{path:"",component:um,children:[{path:"auth",component:QE},{path:"products",component:o$},{path:"main",component:dH},{path:"inputForm",component:q6},{path:"update",component:(()=>{class n{constructor(t,r){this.router=t,this.serviceFirebase=r,this.oldDataToUpdate={courseId:"",courseName:"",courseDate:"",courseDescription:""}}ngOnInit(){}onUpdateCourse(t){let r=localStorage.getItem(JSON.parse('"updatedata"')),i=JSON.parse(r);this.oldDataToUpdate=i,this.serviceFirebase.updateCourse(t.value,i),this.router.navigateByUrl("/products"),localStorage.removeItem("updatedata")}onCancel(){this.router.navigateByUrl("/products"),localStorage.removeItem("updatedata")}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ri),f.Y36(p0))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-update"]],decls:27,vars:7,consts:[["id","body"],[3,"ngSubmit"],["f","ngForm"],["for","courseName"],["name","courseName","type","text","ngModel","","required","",3,"placeholder"],["for","courseDescrption"],["name","courseDescrption","type","text","ngModel","","required","",3,"placeholder"],["for","courseDate"],["name","courseDate","type","date","ngModel","","required","",3,"placeholder"],["type","submit",3,"disabled","ngStyle"],[2,"background-color","rgb(190, 66, 66)","color","white",3,"click"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"p"),f._uU(2,"Update Course Information"),f.qZA(),f.TgZ(3,"form",1,2),f.NdJ("ngSubmit",function(){f.CHM(i);const l=f.MAs(4);return f.KtG(r.onUpdateCourse(l))}),f.TgZ(5,"label",3),f._uU(6,"Course Name"),f.qZA(),f._UZ(7,"br")(8,"input",4)(9,"br")(10,"br"),f.TgZ(11,"label",5),f._uU(12,"Course Description"),f.qZA(),f._UZ(13,"br")(14,"input",6)(15,"br")(16,"br"),f.TgZ(17,"label",7),f._uU(18,"Course Date"),f.qZA(),f._UZ(19,"br")(20,"input",8)(21,"br")(22,"br"),f.TgZ(23,"button",9),f._uU(24,"Update"),f.qZA(),f.TgZ(25,"button",10),f.NdJ("click",function(){return r.onCancel()}),f._uU(26,"Cancel"),f.qZA()()()}if(2&t){const i=f.MAs(4);f.xp6(8),f.s9C("placeholder",r.oldDataToUpdate.courseName),f.xp6(6),f.s9C("placeholder",r.oldDataToUpdate.courseDescription),f.xp6(6),f.s9C("placeholder",r.oldDataToUpdate.courseDate),f.xp6(3),f.Q6J("disabled",i.invalid)("ngStyle",i.invalid?f.DdM(5,K6):f.DdM(6,Z6))}},dependencies:[as,Db,q_,fb,pb,Q_,E0,Y_],styles:["#body[_ngcontent-%COMP%]{margin:15px}button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]}),n})()}]}];let Q6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[lm]}),n.\u0275inj=f.cJS({providers:[{provide:RL,useValue:["localhost",9099]},{provide:G6,useValue:["localhost",5001]}],imports:[aa,pp,oH,Ou.hO.initializeApp(Ob_firebase),Sz,n$(()=>r$()),IS(()=>oP(Ob_firebase)),OH,qE.forRoot(Y6)]}),n})();Of().bootstrapModule(Q6).catch(n=>console.error(n))},9751:(It,Se,B)=>{B.d(Se,{y:()=>me});var f=B(2961),G=B(727),O=B(8822),ne=B(9635),oe=B(2416),ae=B(576),we=B(2806);let me=(()=>{class te{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const Ke=new te;return Ke.source=this,Ke.operator=Te,Ke}subscribe(Te,Ke,at){const _e=function q(te){return te&&te instanceof f.Lv||function K(te){return te&&(0,ae.m)(te.next)&&(0,ae.m)(te.error)&&(0,ae.m)(te.complete)}(te)&&(0,G.Nn)(te)}(Te)?Te:new f.Hp(Te,Ke,at);return(0,we.x)(()=>{const{operator:Ae,source:ke}=this;_e.add(Ae?Ae.call(_e,ke):ke?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Te){try{return this._subscribe(Te)}catch(Ke){Te.error(Ke)}}forEach(Te,Ke){return new(Ke=ve(Ke))((at,_e)=>{const Ae=new f.Hp({next:ke=>{try{Te(ke)}catch(Be){_e(Be),Ae.unsubscribe()}},error:_e,complete:at});this.subscribe(Ae)})}_subscribe(Te){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Te)}[O.L](){return this}pipe(...Te){return(0,ne.U)(Te)(this)}toPromise(Te){return new(Te=ve(Te))((Ke,at)=>{let _e;this.subscribe(Ae=>_e=Ae,Ae=>at(Ae),()=>Ke(_e))})}}return te.create=je=>new te(je),te})();function ve(te){var je;return null!==(je=te??oe.v.Promise)&&void 0!==je?je:Promise}},7579:(It,Se,B)=>{B.d(Se,{x:()=>we});var f=B(9751),G=B(727);const ne=(0,B(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=B(8737),ae=B(2806);let we=(()=>{class ve extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const te=new me(this,this);return te.operator=q,te}_throwIfClosed(){if(this.closed)throw new ne}next(q){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(q)}})}error(q){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:te}=this;for(;te.length;)te.shift().error(q)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:te,isStopped:je,observers:Te}=this;return te||je?G.Lc:(this.currentObservers=null,Te.push(q),new G.w0(()=>{this.currentObservers=null,(0,oe.P)(Te,q)}))}_checkFinalizedStatuses(q){const{hasError:te,thrownError:je,isStopped:Te}=this;te?q.error(je):Te&&q.complete()}asObservable(){const q=new f.y;return q.source=this,q}}return ve.create=(K,q)=>new me(K,q),ve})();class me extends we{constructor(K,q){super(),this.destination=K,this.source=q}next(K){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===te||te.call(q,K)}error(K){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===te||te.call(q,K)}complete(){var K,q;null===(q=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===q||q.call(K)}_subscribe(K){var q,te;return null!==(te=null===(q=this.source)||void 0===q?void 0:q.subscribe(K))&&void 0!==te?te:G.Lc}}},2961:(It,Se,B)=>{B.d(Se,{Hp:()=>at,Lv:()=>te});var f=B(576),G=B(727),O=B(2416),ne=B(7849);function oe(){}const ae=ve("C",void 0,void 0);function ve(De,Ce,Me){return{kind:De,value:Ce,error:Me}}var K=B(3410),q=B(2806);class te extends G.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,G.Nn)(Ce)&&Ce.add(this)):this.destination=Be}static create(Ce,Me,$e){return new at(Ce,Me,$e)}next(Ce){this.isStopped?ke(function me(De){return ve("N",De,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?ke(function we(De){return ve("E",void 0,De)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?ke(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Te(De,Ce){return je.call(De,Ce)}class Ke{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Ce)}catch($e){_e($e)}}error(Ce){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Ce)}catch($e){_e($e)}else _e(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Me){_e(Me)}}}class at extends te{constructor(Ce,Me,$e){let Oe;if(super(),(0,f.m)(Ce)||!Ce)Oe={next:Ce??void 0,error:Me??void 0,complete:$e??void 0};else{let se;this&&O.v.useDeprecatedNextContext?(se=Object.create(Ce),se.unsubscribe=()=>this.unsubscribe(),Oe={next:Ce.next&&Te(Ce.next,se),error:Ce.error&&Te(Ce.error,se),complete:Ce.complete&&Te(Ce.complete,se)}):Oe=Ce}this.destination=new Ke(Oe)}}function _e(De){O.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(De):(0,ne.h)(De)}function ke(De,Ce){const{onStoppedNotification:Me}=O.v;Me&&K.z.setTimeout(()=>Me(De,Ce))}const Be={closed:!0,next:oe,error:function Ae(De){throw De},complete:oe}},727:(It,Se,B)=>{B.d(Se,{Lc:()=>ae,w0:()=>oe,Nn:()=>we});var f=B(576);const O=(0,B(3888).d)(ve=>function(q){ve(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((te,je)=>`${je+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ne=B(8737);class oe{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Te of q)Te.remove(this);else q.remove(this);const{initialTeardown:te}=this;if((0,f.m)(te))try{te()}catch(Te){K=Te instanceof O?Te.errors:[Te]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Te of je)try{me(Te)}catch(Ke){K=K??[],Ke instanceof O?K=[...K,...Ke.errors]:K.push(Ke)}}if(K)throw new O(K)}}add(K){var q;if(K&&K!==this)if(this.closed)me(K);else{if(K instanceof oe){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(K)}}_hasParent(K){const{_parentage:q}=this;return q===K||Array.isArray(q)&&q.includes(K)}_addParent(K){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(K),q):q?[q,K]:K}_removeParent(K){const{_parentage:q}=this;q===K?this._parentage=null:Array.isArray(q)&&(0,ne.P)(q,K)}remove(K){const{_finalizers:q}=this;q&&(0,ne.P)(q,K),K instanceof oe&&K._removeParent(this)}}oe.EMPTY=(()=>{const ve=new oe;return ve.closed=!0,ve})();const ae=oe.EMPTY;function we(ve){return ve instanceof oe||ve&&"closed"in ve&&(0,f.m)(ve.remove)&&(0,f.m)(ve.add)&&(0,f.m)(ve.unsubscribe)}function me(ve){(0,f.m)(ve)?ve():ve.unsubscribe()}},2416:(It,Se,B)=>{B.d(Se,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(It,Se,B)=>{B.d(Se,{E:()=>G});const G=new(B(9751).y)(oe=>oe.complete())},8996:(It,Se,B)=>{B.d(Se,{D:()=>Ce});var f=B(8421),G=B(5363),O=B(9468),ae=B(9751),me=B(2202),ve=B(576),K=B(9672);function te(Me,$e){if(!Me)throw new Error("Iterable cannot be null");return new ae.y(Oe=>{(0,K.f)(Oe,$e,()=>{const se=Me[Symbol.asyncIterator]();(0,K.f)(Oe,$e,()=>{se.next().then(tt=>{tt.done?Oe.complete():Oe.next(tt.value)})},0,!0)})})}var je=B(3670),Te=B(8239),Ke=B(1144),at=B(6495),_e=B(2206),Ae=B(4532),ke=B(3260);function Ce(Me,$e){return $e?function De(Me,$e){if(null!=Me){if((0,je.c)(Me))return function ne(Me,$e){return(0,f.Xf)(Me).pipe((0,O.R)($e),(0,G.Q)($e))}(Me,$e);if((0,Ke.z)(Me))return function we(Me,$e){return new ae.y(Oe=>{let se=0;return $e.schedule(function(){se===Me.length?Oe.complete():(Oe.next(Me[se++]),Oe.closed||this.schedule())})})}(Me,$e);if((0,Te.t)(Me))return function oe(Me,$e){return(0,f.Xf)(Me).pipe((0,O.R)($e),(0,G.Q)($e))}(Me,$e);if((0,_e.D)(Me))return te(Me,$e);if((0,at.T)(Me))return function q(Me,$e){return new ae.y(Oe=>{let se;return(0,K.f)(Oe,$e,()=>{se=Me[me.h](),(0,K.f)(Oe,$e,()=>{let tt,St;try{({value:tt,done:St}=se.next())}catch(it){return void Oe.error(it)}St?Oe.complete():Oe.next(tt)},0,!0)}),()=>(0,ve.m)(se?.return)&&se.return()})}(Me,$e);if((0,ke.L)(Me))return function Be(Me,$e){return te((0,ke.Q)(Me),$e)}(Me,$e)}throw(0,Ae.z)(Me)}(Me,$e):(0,f.Xf)(Me)}},8421:(It,Se,B)=>{B.d(Se,{Xf:()=>je});var f=B(655),G=B(1144),O=B(8239),ne=B(9751),oe=B(3670),ae=B(2206),we=B(4532),me=B(6495),ve=B(3260),K=B(576),q=B(7849),te=B(8822);function je(De){if(De instanceof ne.y)return De;if(null!=De){if((0,oe.c)(De))return function Te(De){return new ne.y(Ce=>{const Me=De[te.L]();if((0,K.m)(Me.subscribe))return Me.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,G.z)(De))return function Ke(De){return new ne.y(Ce=>{for(let Me=0;Me<De.length&&!Ce.closed;Me++)Ce.next(De[Me]);Ce.complete()})}(De);if((0,O.t)(De))return function at(De){return new ne.y(Ce=>{De.then(Me=>{Ce.closed||(Ce.next(Me),Ce.complete())},Me=>Ce.error(Me)).then(null,q.h)})}(De);if((0,ae.D)(De))return Ae(De);if((0,me.T)(De))return function _e(De){return new ne.y(Ce=>{for(const Me of De)if(Ce.next(Me),Ce.closed)return;Ce.complete()})}(De);if((0,ve.L)(De))return function ke(De){return Ae((0,ve.Q)(De))}(De)}throw(0,we.z)(De)}function Ae(De){return new ne.y(Ce=>{(function Be(De,Ce){var Me,$e,Oe,se;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Me=(0,f.KL)(De);!($e=yield Me.next()).done;)if(Ce.next($e.value),Ce.closed)return}catch(tt){Oe={error:tt}}finally{try{$e&&!$e.done&&(se=Me.return)&&(yield se.call(Me))}finally{if(Oe)throw Oe.error}}Ce.complete()})})(De,Ce).catch(Me=>Ce.error(Me))})}},6451:(It,Se,B)=>{B.d(Se,{T:()=>ae});var f=B(8189),G=B(8421),O=B(515),ne=B(7669),oe=B(8996);function ae(...we){const me=(0,ne.yG)(we),ve=(0,ne._6)(we,1/0),K=we;return K.length?1===K.length?(0,G.Xf)(K[0]):(0,f.J)(ve)((0,oe.D)(K,me)):O.E}},5403:(It,Se,B)=>{B.d(Se,{x:()=>G});var f=B(2961);function G(ne,oe,ae,we,me){return new O(ne,oe,ae,we,me)}class O extends f.Lv{constructor(oe,ae,we,me,ve,K){super(oe),this.onFinalize=ve,this.shouldUnsubscribe=K,this._next=ae?function(q){try{ae(q)}catch(te){oe.error(te)}}:super._next,this._error=me?function(q){try{me(q)}catch(te){oe.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(q){oe.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(It,Se,B)=>{B.d(Se,{U:()=>O});var f=B(4482),G=B(5403);function O(ne,oe){return(0,f.e)((ae,we)=>{let me=0;ae.subscribe((0,G.x)(we,ve=>{we.next(ne.call(oe,ve,me++))}))})}},8189:(It,Se,B)=>{B.d(Se,{J:()=>O});var f=B(5577),G=B(4671);function O(ne=1/0){return(0,f.z)(G.y,ne)}},5577:(It,Se,B)=>{B.d(Se,{z:()=>me});var f=B(4004),G=B(8421),O=B(4482),ne=B(9672),oe=B(5403),we=B(576);function me(ve,K,q=1/0){return(0,we.m)(K)?me((te,je)=>(0,f.U)((Te,Ke)=>K(te,Te,je,Ke))((0,G.Xf)(ve(te,je))),q):("number"==typeof K&&(q=K),(0,O.e)((te,je)=>function ae(ve,K,q,te,je,Te,Ke,at){const _e=[];let Ae=0,ke=0,Be=!1;const De=()=>{Be&&!_e.length&&!Ae&&K.complete()},Ce=$e=>Ae<te?Me($e):_e.push($e),Me=$e=>{Te&&K.next($e),Ae++;let Oe=!1;(0,G.Xf)(q($e,ke++)).subscribe((0,oe.x)(K,se=>{je?.(se),Te?Ce(se):K.next(se)},()=>{Oe=!0},void 0,()=>{if(Oe)try{for(Ae--;_e.length&&Ae<te;){const se=_e.shift();Ke?(0,ne.f)(K,Ke,()=>Me(se)):Me(se)}De()}catch(se){K.error(se)}}))};return ve.subscribe((0,oe.x)(K,Ce,()=>{Be=!0,De()})),()=>{at?.()}}(te,je,ve,q)))}},5363:(It,Se,B)=>{B.d(Se,{Q:()=>ne});var f=B(9672),G=B(4482),O=B(5403);function ne(oe,ae=0){return(0,G.e)((we,me)=>{we.subscribe((0,O.x)(me,ve=>(0,f.f)(me,oe,()=>me.next(ve),ae),()=>(0,f.f)(me,oe,()=>me.complete(),ae),ve=>(0,f.f)(me,oe,()=>me.error(ve),ae)))})}},3099:(It,Se,B)=>{B.d(Se,{B:()=>oe});var f=B(8421),G=B(7579),O=B(2961),ne=B(4482);function oe(we={}){const{connector:me=(()=>new G.x),resetOnError:ve=!0,resetOnComplete:K=!0,resetOnRefCountZero:q=!0}=we;return te=>{let je,Te,Ke,at=0,_e=!1,Ae=!1;const ke=()=>{Te?.unsubscribe(),Te=void 0},Be=()=>{ke(),je=Ke=void 0,_e=Ae=!1},De=()=>{const Ce=je;Be(),Ce?.unsubscribe()};return(0,ne.e)((Ce,Me)=>{at++,!Ae&&!_e&&ke();const $e=Ke=Ke??me();Me.add(()=>{at--,0===at&&!Ae&&!_e&&(Te=ae(De,q))}),$e.subscribe(Me),!je&&at>0&&(je=new O.Hp({next:Oe=>$e.next(Oe),error:Oe=>{Ae=!0,ke(),Te=ae(Be,ve,Oe),$e.error(Oe)},complete:()=>{_e=!0,ke(),Te=ae(Be,K),$e.complete()}}),(0,f.Xf)(Ce).subscribe(je))})(te)}}function ae(we,me,...ve){if(!0===me)return void we();if(!1===me)return;const K=new O.Hp({next:()=>{K.unsubscribe(),we()}});return(0,f.Xf)(me(...ve)).subscribe(K)}},9468:(It,Se,B)=>{B.d(Se,{R:()=>G});var f=B(4482);function G(O,ne=0){return(0,f.e)((oe,ae)=>{ae.add(O.schedule(()=>oe.subscribe(ae),ne))})}},8505:(It,Se,B)=>{B.d(Se,{b:()=>oe});var f=B(576),G=B(4482),O=B(5403),ne=B(4671);function oe(ae,we,me){const ve=(0,f.m)(ae)||we||me?{next:ae,error:we,complete:me}:ae;return ve?(0,G.e)((K,q)=>{var te;null===(te=ve.subscribe)||void 0===te||te.call(ve);let je=!0;K.subscribe((0,O.x)(q,Te=>{var Ke;null===(Ke=ve.next)||void 0===Ke||Ke.call(ve,Te),q.next(Te)},()=>{var Te;je=!1,null===(Te=ve.complete)||void 0===Te||Te.call(ve),q.complete()},Te=>{var Ke;je=!1,null===(Ke=ve.error)||void 0===Ke||Ke.call(ve,Te),q.error(Te)},()=>{var Te,Ke;je&&(null===(Te=ve.unsubscribe)||void 0===Te||Te.call(ve)),null===(Ke=ve.finalize)||void 0===Ke||Ke.call(ve)}))}):ne.y}},4408:(It,Se,B)=>{B.d(Se,{o:()=>oe});var f=B(727);class G extends f.w0{constructor(we,me){super()}schedule(we,me=0){return this}}const O={setInterval(ae,we,...me){const{delegate:ve}=O;return ve?.setInterval?ve.setInterval(ae,we,...me):setInterval(ae,we,...me)},clearInterval(ae){const{delegate:we}=O;return(we?.clearInterval||clearInterval)(ae)},delegate:void 0};var ne=B(8737);class oe extends G{constructor(we,me){super(we,me),this.scheduler=we,this.work=me,this.pending=!1}schedule(we,me=0){var ve;if(this.closed)return this;this.state=we;const K=this.id,q=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(q,K,me)),this.pending=!0,this.delay=me,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(q,this.id,me),this}requestAsyncId(we,me,ve=0){return O.setInterval(we.flush.bind(we,this),ve)}recycleAsyncId(we,me,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return me;null!=me&&O.clearInterval(me)}execute(we,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(we,me);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,me){let K,ve=!1;try{this.work(we)}catch(q){ve=!0,K=q||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:we,scheduler:me}=this,{actions:ve}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(ve,this),null!=we&&(this.id=this.recycleAsyncId(me,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(It,Se,B)=>{B.d(Se,{v:()=>O});var f=B(6063);class G{constructor(oe,ae=G.now){this.schedulerActionCtor=oe,this.now=ae}schedule(oe,ae=0,we){return new this.schedulerActionCtor(this,oe).schedule(we,ae)}}G.now=f.l.now;class O extends G{constructor(oe,ae=G.now){super(oe,ae),this.actions=[],this._active=!1}flush(oe){const{actions:ae}=this;if(this._active)return void ae.push(oe);let we;this._active=!0;do{if(we=oe.execute(oe.state,oe.delay))break}while(oe=ae.shift());if(this._active=!1,we){for(;oe=ae.shift();)oe.unsubscribe();throw we}}}},4986:(It,Se,B)=>{B.d(Se,{z:()=>O});var f=B(4408);const O=new(B(7565).v)(f.o)},6063:(It,Se,B)=>{B.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(It,Se,B)=>{B.d(Se,{z:()=>f});const f={setTimeout(G,O,...ne){const{delegate:oe}=f;return oe?.setTimeout?oe.setTimeout(G,O,...ne):setTimeout(G,O,...ne)},clearTimeout(G){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(G)},delegate:void 0}},2202:(It,Se,B)=>{B.d(Se,{h:()=>G});const G=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(It,Se,B)=>{B.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(It,Se,B)=>{B.d(Se,{_6:()=>ae,jO:()=>ne,yG:()=>oe});var f=B(576);function O(we){return we[we.length-1]}function ne(we){return(0,f.m)(O(we))?we.pop():void 0}function oe(we){return function G(we){return we&&(0,f.m)(we.schedule)}(O(we))?we.pop():void 0}function ae(we,me){return"number"==typeof O(we)?we.pop():me}},8737:(It,Se,B)=>{function f(G,O){if(G){const ne=G.indexOf(O);0<=ne&&G.splice(ne,1)}}B.d(Se,{P:()=>f})},3888:(It,Se,B)=>{function f(G){const ne=G(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}B.d(Se,{d:()=>f})},2806:(It,Se,B)=>{B.d(Se,{O:()=>ne,x:()=>O});var f=B(2416);let G=null;function O(oe){if(f.v.useDeprecatedSynchronousErrorHandling){const ae=!G;if(ae&&(G={errorThrown:!1,error:null}),oe(),ae){const{errorThrown:we,error:me}=G;if(G=null,we)throw me}}else oe()}function ne(oe){f.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=oe)}},9672:(It,Se,B)=>{function f(G,O,ne,oe=0,ae=!1){const we=O.schedule(function(){ne(),ae?G.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(G.add(we),!ae)return we}B.d(Se,{f:()=>f})},4671:(It,Se,B)=>{function f(G){return G}B.d(Se,{y:()=>f})},1144:(It,Se,B)=>{B.d(Se,{z:()=>f});const f=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(It,Se,B)=>{B.d(Se,{D:()=>G});var f=B(576);function G(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(It,Se,B)=>{function f(G){return"function"==typeof G}B.d(Se,{m:()=>f})},3670:(It,Se,B)=>{B.d(Se,{c:()=>O});var f=B(8822),G=B(576);function O(ne){return(0,G.m)(ne[f.L])}},6495:(It,Se,B)=>{B.d(Se,{T:()=>O});var f=B(2202),G=B(576);function O(ne){return(0,G.m)(ne?.[f.h])}},8239:(It,Se,B)=>{B.d(Se,{t:()=>G});var f=B(576);function G(O){return(0,f.m)(O?.then)}},3260:(It,Se,B)=>{B.d(Se,{L:()=>ne,Q:()=>O});var f=B(655),G=B(576);function O(oe){return(0,f.FC)(this,arguments,function*(){const we=oe.getReader();try{for(;;){const{value:me,done:ve}=yield(0,f.qq)(we.read());if(ve)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(me)}}finally{we.releaseLock()}})}function ne(oe){return(0,G.m)(oe?.getReader)}},4482:(It,Se,B)=>{B.d(Se,{A:()=>G,e:()=>O});var f=B(576);function G(ne){return(0,f.m)(ne?.lift)}function O(ne){return oe=>{if(G(oe))return oe.lift(function(ae){try{return ne(ae,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(It,Se,B)=>{B.d(Se,{U:()=>O,z:()=>G});var f=B(4671);function G(...ne){return O(ne)}function O(ne){return 0===ne.length?f.y:1===ne.length?ne[0]:function(ae){return ne.reduce((we,me)=>me(we),ae)}}},7849:(It,Se,B)=>{B.d(Se,{h:()=>O});var f=B(2416),G=B(3410);function O(ne){G.z.setTimeout(()=>{const{onUnhandledError:oe}=f.v;if(!oe)throw ne;oe(ne)})}},4532:(It,Se,B)=>{function f(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Se,{z:()=>f})},655:(It,Se,B)=>{function ne(he,ye){var be={};for(var Re in he)Object.prototype.hasOwnProperty.call(he,Re)&&ye.indexOf(Re)<0&&(be[Re]=he[Re]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(Re=Object.getOwnPropertySymbols(he);ze<Re.length;ze++)ye.indexOf(Re[ze])<0&&Object.prototype.propertyIsEnumerable.call(he,Re[ze])&&(be[Re[ze]]=he[Re[ze]])}return be}function te(he,ye,be,Re){return new(be||(be=Promise))(function(Ue,Pe){function pt(vt){try{ut(Re.next(vt))}catch(tn){Pe(tn)}}function Tn(vt){try{ut(Re.throw(vt))}catch(tn){Pe(tn)}}function ut(vt){vt.done?Ue(vt.value):function ze(Ue){return Ue instanceof be?Ue:new be(function(Pe){Pe(Ue)})}(vt.value).then(pt,Tn)}ut((Re=Re.apply(he,ye||[])).next())})}function De(he){return this instanceof De?(this.v=he,this):new De(he)}function Ce(he,ye,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Re=be.apply(he,ye||[]),Ue=[];return ze={},Pe("next"),Pe("throw"),Pe("return"),ze[Symbol.asyncIterator]=function(){return this},ze;function Pe(hn){Re[hn]&&(ze[hn]=function(In){return new Promise(function($r,Gn){Ue.push([hn,In,$r,Gn])>1||pt(hn,In)})})}function pt(hn,In){try{!function Tn(hn){hn.value instanceof De?Promise.resolve(hn.value.v).then(ut,vt):tn(Ue[0][2],hn)}(Re[hn](In))}catch($r){tn(Ue[0][3],$r)}}function ut(hn){pt("next",hn)}function vt(hn){pt("throw",hn)}function tn(hn,In){hn(In),Ue.shift(),Ue.length&&pt(Ue[0][0],Ue[0][1])}}function $e(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,ye=he[Symbol.asyncIterator];return ye?ye.call(he):(he=function at(he){var ye="function"==typeof Symbol&&Symbol.iterator,be=ye&&he[ye],Re=0;if(be)return be.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Re>=he.length&&(he=void 0),{value:he&&he[Re++],done:!he}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),be={},Re("next"),Re("throw"),Re("return"),be[Symbol.asyncIterator]=function(){return this},be);function Re(Ue){be[Ue]=he[Ue]&&function(Pe){return new Promise(function(pt,Tn){!function ze(Ue,Pe,pt,Tn){Promise.resolve(Tn).then(function(ut){Ue({value:ut,done:pt})},Pe)}(pt,Tn,(Pe=he[Ue](Pe)).done,Pe.value)})}}}B.d(Se,{FC:()=>Ce,KL:()=>$e,_T:()=>ne,mG:()=>te,qq:()=>De})},4650:(It,Se,B)=>{B.d(Se,{$8M:()=>ru,$WT:()=>zr,$Z:()=>KE,AFp:()=>Ml,AaK:()=>me,CHM:()=>Xl,CRH:()=>BC,CZH:()=>h_,CqO:()=>Cm,D6c:()=>Ow,DdM:()=>aw,EJc:()=>tD,EpF:()=>mI,F4k:()=>Im,FYo:()=>Hy,FiY:()=>Ao,GfV:()=>SE,Gpc:()=>q,JOm:()=>At,KtG:()=>Ka,LFG:()=>Bt,Lbi:()=>xs,Lck:()=>fA,MAs:()=>gI,MMx:()=>Xm,MR2:()=>FT,NdJ:()=>wp,OlP:()=>on,Oqu:()=>Mv,P3R:()=>yE,PXZ:()=>UA,Q6J:()=>pv,QGY:()=>vp,Qsj:()=>GT,R0b:()=>oo,RDi:()=>ET,Rgc:()=>Rl,SBq:()=>ch,Sil:()=>MA,Suo:()=>Zc,TTD:()=>md,TgZ:()=>mp,X6Q:()=>Jc,XFs:()=>gt,Xpm:()=>jt,Xts:()=>Py,Y36:()=>gh,YKP:()=>nw,YNc:()=>pI,Yjl:()=>en,Yz7:()=>vt,Z0I:()=>$r,ZZ4:()=>Pu,_Bn:()=>vC,_UZ:()=>wm,_Vd:()=>lh,_c5:()=>Yh,_uU:()=>NI,aQg:()=>Zh,c2e:()=>eD,cJS:()=>hn,cg1:()=>Ah,dDg:()=>Nl,dqk:()=>an,eFA:()=>tg,eJc:()=>Ma,ekj:()=>RI,eoX:()=>Aw,f3M:()=>kn,g9A:()=>JC,h0i:()=>Lh,hGG:()=>wD,hij:()=>ri,iGM:()=>Yp,ifc:()=>L,ip1:()=>Au,jDz:()=>Jm,kL8:()=>Um,lG2:()=>xt,lqb:()=>Oc,lri:()=>oi,n5z:()=>cc,oAB:()=>re,oxw:()=>vI,q4F:()=>AE,qLn:()=>op,qOj:()=>oI,qZA:()=>Eh,rWj:()=>Sw,s9C:()=>bm,sBO:()=>w_,s_b:()=>s_,soG:()=>g_,tb:()=>rs,tp0:()=>Mt,uIk:()=>mm,vHH:()=>_e,vpe:()=>Fo,wAp:()=>kt,xp6:()=>VE,z2F:()=>ig,zSh:()=>El,zs3:()=>hh});var f=B(7579),G=B(727),O=B(9751),ne=B(6451),oe=B(3099);function ae(s){for(let a in s)if(s[a]===ae)return a;throw Error("Could not find renamed property on target object.")}function we(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function me(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(me).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function ve(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const K=ae({__forward_ref__:ae});function q(s){return s.__forward_ref__=q,s.toString=function(){return me(this())},s}function te(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===q}function Te(s){return s&&!!s.\u0275providers}const at="https://g.co/ng/security#xss";class _e extends Error{constructor(a,u){super(Ae(a,u)),this.code=a}}function Ae(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}function ke(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,a){throw new _e(-201,!1)}function Ue(s,a){null==s&&function Pe(s,a,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function vt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function hn(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return Gn(s,di)||Gn(s,co)}function $r(s){return null!==In(s)}function Gn(s,a){return s.hasOwnProperty(a)?s[a]:null}function zn(s){return s&&(s.hasOwnProperty(ki)||s.hasOwnProperty(Ln))?s[ki]:null}const di=ae({\u0275prov:ae}),ki=ae({\u0275inj:ae}),co=ae({ngInjectableDef:ae}),Ln=ae({ngInjectorDef:ae});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let Un;function Wn(s){const a=Un;return Un=s,a}function Hr(s,a,u){const c=In(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&gt.Optional?null:void 0!==a?a:void $e(me(s))}const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qn={},Mr="__NG_DI_FLAG__",Pn="ngTempTokenPath",Qr="ngTokenPath",Vn=/\n/gm,lr="\u0275",Kt="__source";let Di;function Jt(s){const a=Di;return Di=s,a}function hi(s,a=gt.Default){if(void 0===Di)throw new _e(-203,!1);return null===Di?Hr(s,void 0,a):Di.get(s,a&gt.Optional?null:void 0,a)}function Bt(s,a=gt.Default){return(function os(){return Un}()||hi)(te(s),a)}function kn(s,a=gt.Default){return Bt(s,Nr(a))}function Nr(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Zn(s){const a=[];for(let u=0;u<s.length;u++){const c=te(s[u]);if(Array.isArray(c)){if(0===c.length)throw new _e(900,!1);let d,g=gt.Default;for(let y=0;y<c.length;y++){const C=c[y],T=Gr(C);"number"==typeof T?-1===T?d=C.token:g|=T:d=C}a.push(Bt(d,g))}else a.push(Bt(c))}return a}function Xr(s,a){return s[Mr]=a,s.prototype[Mr]=a,s}function Gr(s){return s[Mr]}function H(s){return{toString:s}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),L=(()=>{return(s=L||(L={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",L;var s})();const N={},Y=[],Ee=ae({\u0275cmp:ae}),nt=ae({\u0275dir:ae}),Rt=ae({\u0275pipe:ae}),Tt=ae({\u0275mod:ae}),Zt=ae({\u0275fac:ae}),Pt=ae({__NG_ELEMENT_ID__:ae});let Cn=0;function jt(s){return H(()=>{const a=ju(s),u={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||L.Emulated,id:"c"+Cn++,styles:s.styles||Y,_:null,schemas:s.schemas||null,tView:null};Df(u);const c=s.dependencies;return u.directiveDefs=Fs(c,!1),u.pipeDefs=Fs(c,!0),u})}function vs(s){return wt(s)||pn(s)}function pe(s){return null!==s}function re(s){return H(()=>({type:s.type,bootstrap:s.bootstrap||Y,declarations:s.declarations||Y,imports:s.imports||Y,exports:s.exports||Y,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function yt(s,a){if(null==s)return N;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,a&&(a[d]=g)}return u}function xt(s){return H(()=>{const a=ju(s);return Df(a),a})}function en(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function wt(s){return s[Ee]||null}function pn(s){return s[nt]||null}function sn(s){return s[Rt]||null}function zr(s){const a=wt(s)||pn(s)||sn(s);return null!==a&&a.standalone}function vr(s,a){const u=s[Tt]||null;if(!u&&!0===a)throw new Error(`Type ${me(s)} does not have '\u0275mod' property.`);return u}function ju(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Y,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yt(s.inputs,a),outputs:yt(s.outputs)}}function Df(s){s.features?.forEach(a=>a(s))}function Fs(s,a){if(!s)return null;const u=a?sn:vs;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(pe)}const wr=0,et=1,Yt=2,An=3,gn=4,Ls=5,Er=6,ho=7,Bn=8,Va=9,zo=10,Ht=11,$u=12,Oi=13,Ba=14,Us=15,cr=16,fo=17,po=18,bi=19,as=20,Wr=21,En=22,ql=1,ja=2,Wo=7,Vs=8,go=9,Pr=10;function ei(s){return Array.isArray(s)&&"object"==typeof s[ql]}function Zi(s){return Array.isArray(s)&&!0===s[ql]}function mo(s){return 0!=(4&s.flags)}function Hu(s){return s.componentOffset>-1}function $a(s){return 1==(1&s.flags)}function fi(s){return!!s.template}function Bs(s){return 0!=(256&s[Yt])}function ws(s,a){return s.hasOwnProperty(Zt)?s[Zt]:null}class gd{constructor(a,u,c){this.previousValue=a,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function md(){return Gu}function Gu(s){return s.type.prototype.ngOnChanges&&(s.setInput=$s),Rf}function Rf(){const s=zu(this),a=s?.current;if(a){const u=s.previous;if(u===N)s.previous=a;else for(let c in a)u[c]=a[c];s.current=null,this.ngOnChanges(a)}}function $s(s,a,u,c){const d=this.declaredInputs[u],g=zu(s)||function _d(s,a){return s[Kl]=a}(s,{previous:N,current:null}),y=g.current||(g.current={}),C=g.previous,T=C[d];y[d]=new gd(T&&T.currentValue,a,C===N),s[c]=a}md.ngInherit=!0;const Kl="__ngSimpleChanges__";function zu(s){return s[Kl]||null}const On=function(s,a,u){};function dr(s){for(;Array.isArray(s);)s=s[wr];return s}function wo(s,a){return dr(a[s])}function kr(s,a){return dr(a[s.index])}function qu(s,a){return s.data[a]}function Ir(s,a){const u=a[s];return ei(u)?u:u[wr]}function Hs(s){return 64==(64&s[Yt])}function Es(s,a){return null==a?null:s[a]}function qa(s){s[po]=0}function Yo(s,a){s[Ls]+=a;let u=s,c=s[An];for(;null!==c&&(1===a&&1===u[Ls]||-1===a&&0===u[Ls]);)c[Ls]+=a,u=c,c=c[An]}const Lt={lFrame:Ya(null),bindingsEnabled:!0};function vd(){return Lt.bindingsEnabled}function ge(){return Lt.lFrame.lView}function Vt(){return Lt.lFrame.tView}function Xl(s){return Lt.lFrame.contextLView=s,s[Bn]}function Ka(s){return Lt.lFrame.contextLView=null,s}function Yn(){let s=Ed();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ed(){return Lt.lFrame.currentTNode}function Li(s,a){const u=Lt.lFrame;u.currentTNode=s,u.isParent=a}function Zu(){return Lt.lFrame.isParent}function Is(){return Lt.lFrame.bindingIndex++}function bd(s,a){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Qn(a)}function Qn(s){Lt.lFrame.currentDirectiveIndex=s}function Za(){return Lt.lFrame.currentQueryIndex}function Td(s){Lt.lFrame.currentQueryIndex=s}function Qu(s){const a=s[et];return 2===a.type?a.declTNode:1===a.type?s[Er]:null}function Sd(s,a,u){if(u&gt.SkipSelf){let d=a,g=s;for(;!(d=d.parent,null!==d||u&gt.Host||(d=Qu(g),null===d||(g=g[Us],10&d.type))););if(null===d)return!1;a=d,s=g}const c=Lt.lFrame=Jl();return c.currentTNode=a,c.lView=s,!0}function Jo(s){const a=Jl(),u=s[et];Lt.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Jl(){const s=Lt.lFrame,a=null===s?null:s.child;return null===a?Ya(s):a}function Ya(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function ec(){const s=Lt.lFrame;return Lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Xu=ec;function Ad(){const s=ec();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function qr(){return Lt.lFrame.selectedIndex}function cs(s){Lt.lFrame.selectedIndex=s}function Rn(){const s=Lt.lFrame;return qu(s.tView,s.selectedIndex)}function Ju(s,a){for(let u=a.directiveStart,c=a.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:M}=g;y&&(s.contentHooks??(s.contentHooks=[])).push(-u,y),C&&((s.contentHooks??(s.contentHooks=[])).push(u,C),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(u,C)),T&&(s.viewHooks??(s.viewHooks=[])).push(-u,T),A&&((s.viewHooks??(s.viewHooks=[])).push(u,A),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks??(s.destroyHooks=[])).push(u,M)}}function rc(s,a,u){el(s,a,3,u)}function Nd(s,a,u,c){(3&s[Yt])===u&&el(s,a,u,c)}function Pd(s,a){let u=s[Yt];(3&u)===a&&(u&=2047,u+=1,s[Yt]=u)}function el(s,a,u,c){const g=c??-1,y=a.length-1;let C=0;for(let T=void 0!==c?65535&s[po]:0;T<y;T++)if("number"==typeof a[T+1]){if(C=a[T],null!=c&&C>=c)break}else a[T]<0&&(s[po]+=65536),(C<g||-1==g)&&(ta(s,u,a,T),s[po]=(4294901760&s[po])+T+2),T++}function ta(s,a,u,c){const d=u[c]<0,g=u[c+1],C=s[d?-u[c]:u[c]];if(d){if(s[Yt]>>11<s[po]>>16&&(3&s[Yt])===a){s[Yt]+=2048,On(4,C,g);try{g.call(C)}finally{On(5,C,g)}}}else{On(4,C,g);try{g.call(C)}finally{On(5,C,g)}}}const Qa=-1;class Cs{constructor(a,u,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function na(s,a,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],y=u[c++],C=u[c++];s.setAttribute(a,y,C,g)}else{const g=d,y=u[++c];Ws(g)?s.setProperty(a,g,y):s.setAttribute(a,g,y),c++}}return c}function Od(s){return 3===s||4===s||6===s}function Ws(s){return 64===s.charCodeAt(0)}function Io(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let c=0;c<a.length;c++){const d=a[c];"number"==typeof d?u=d:0===u||ra(s,u,d,null,-1===u||2===u?a[++c]:null)}}return s}function ra(s,a,u,c,d){let g=0,y=s.length;if(-1===a)y=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===a){y=-1;break}if(C>a){y=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==y&&(s.splice(y,0,a),g=y+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Co(s){return s!==Qa}function ia(s){return 32767&s}function eu(s,a){let u=function Ja(s){return s>>16}(s),c=a;for(;u>0;)c=c[Us],u--;return c}let sc=!0;function tu(s){const a=sc;return sc=s,a}const oc=255,rl=5;let ac=0;const gi={};function uc(s,a){const u=Ld(s,a);if(-1!==u)return u;const c=a[et];c.firstCreatePass&&(s.injectorIndex=a.length,ds(c.data,s),ds(a,null),ds(c.blueprint,null));const d=Xn(s,a),g=s.injectorIndex;if(Co(d)){const y=ia(d),C=eu(d,a),T=C[et].data;for(let A=0;A<8;A++)a[g+A]=C[y+A]|T[y+A]}return a[g+8]=d,g}function ds(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Ld(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Xn(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=a;for(;null!==d;){if(c=Do(d),null===c)return Qa;if(u++,d=d[Us],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return Qa}function qs(s,a,u){!function Fd(s,a,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Pt)&&(c=u[Pt]),null==c&&(c=u[Pt]=ac++);const d=c&oc;a.data[s+(d>>rl)]|=1<<d}(s,a,u)}function Ud(s,a,u){if(u&gt.Optional||void 0!==s)return s;$e()}function nu(s,a,u,c){if(u&gt.Optional&&void 0===c&&(c=null),!(u&(gt.Self|gt.Host))){const d=s[Va],g=Wn(void 0);try{return d?d.get(a,c,u&gt.Optional):Hr(a,c,u&gt.Optional)}finally{Wn(g)}}return Ud(c,0,u)}function Vd(s,a,u,c=gt.Default,d){if(null!==s){if(1024&a[Yt]){const y=function Of(s,a,u,c,d){let g=s,y=a;for(;null!==g&&null!==y&&1024&y[Yt]&&!(256&y[Yt]);){const C=sl(g,y,u,c|gt.Self,gi);if(C!==gi)return C;let T=g.parent;if(!T){const A=y[Wr];if(A){const M=A.get(u,gi,c);if(M!==gi)return M}T=Do(y),y=y[Us]}g=T}return d}(s,a,u,c,gi);if(y!==gi)return y}const g=sl(s,a,u,c,gi);if(g!==gi)return g}return nu(a,u,c,d)}function sl(s,a,u,c,d){const g=function kf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Pt)?s[Pt]:void 0;return"number"==typeof a?a>=0?a&oc:lc:a}(u);if("function"==typeof g){if(!Sd(a,s,c))return c&gt.Host?Ud(d,0,c):nu(a,u,c,d);try{const y=g(c);if(null!=y||c&gt.Optional)return y;$e()}finally{Xu()}}else if("number"==typeof g){let y=null,C=Ld(s,a),T=Qa,A=c&gt.Host?a[cr][Er]:null;for((-1===C||c&gt.SkipSelf)&&(T=-1===C?Xn(s,a):a[C+8],T!==Qa&&ol(c,!1)?(y=a[et],C=ia(T),a=eu(T,a)):C=-1);-1!==C;){const M=a[et];if(Ks(g,C,M.data)){const $=hr(C,a,u,y,c,A);if($!==gi)return $}T=a[C+8],T!==Qa&&ol(c,a[et].data[C+8]===A)&&Ks(g,C,a)?(y=M,C=ia(T),a=eu(T,a)):C=-1}}return d}function hr(s,a,u,c,d,g){const y=a[et],C=y.data[s+8],M=sa(C,y,u,null==c?Hu(C)&&sc:c!=y&&0!=(3&C.type),d&gt.Host&&g===C);return null!==M?Fn(a,y,M,C):gi}function sa(s,a,u,c,d){const g=s.providerIndexes,y=a.data,C=1048575&g,T=s.directiveStart,M=g>>20,X=d?C+M:s.directiveEnd;for(let Q=c?C:C+M;Q<X;Q++){const Ie=y[Q];if(Q<T&&u===Ie||Q>=T&&Ie.type===u)return Q}if(d){const Q=y[T];if(Q&&fi(Q)&&Q.type===u)return T}return null}function Fn(s,a,u,c){let d=s[u];const g=a.data;if(function Gg(s){return s instanceof Cs}(d)){const y=d;y.resolving&&function De(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new _e(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ke(s)}(g[u]));const C=tu(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?Wn(y.injectImpl):null;Sd(s,c,gt.Default);try{d=s[u]=y.factory(void 0,g,s,c),a.firstCreatePass&&u>=c.directiveStart&&function Hg(s,a,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=a.type.prototype;if(c){const y=Gu(a);(u.preOrderHooks??(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks??(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],a)}finally{null!==T&&Wn(T),tu(C),y.resolving=!1,Xu()}}return d}function Ks(s,a,u){return!!(u[a+(s>>rl)]&1<<s)}function ol(s,a){return!(s&gt.Self||s&gt.Host&&a)}class oa{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,c){return Vd(this._tNode,this._lView,a,Nr(c),u)}}function lc(){return new oa(Yn(),ge())}function cc(s){return H(()=>{const a=s.prototype.constructor,u=a[Zt]||Zs(a),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Zt]||Zs(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Zs(s){return je(s)?()=>{const a=Zs(te(s));return a&&a()}:ws(s)}function Do(s){const a=s[et],u=a.type;return 2===u?a.declTNode:1===u?s[Er]:null}function ru(s){return function il(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(Od(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===a)return u[d+1];d+=2}}}return null}(Yn(),s)}const aa="__parameters__";function To(s,a,u){return H(()=>{const c=function Bd(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(a);function d(...g){if(this instanceof d)return c.apply(this,g),this;const y=new d(...g);return C.annotation=y,C;function C(T,A,M){const $=T.hasOwnProperty(aa)?T[aa]:Object.defineProperty(T,aa,{value:[]})[aa];for(;$.length<=M;)$.push(null);return($[M]=$[M]||[]).push(y),T}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class on{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=vt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ys(s,a){s.forEach(u=>Array.isArray(u)?Ys(u,a):a(u))}function mc(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function iu(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Ui(s,a,u){let c=Yi(s,a);return c>=0?s[1|c]=u:(c=~c,function cl(s,a,u,c){let d=s.length;if(d==a)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>a;)s[d]=s[d-2],d--;s[a]=u,s[a+1]=c}}(s,c,a,u)),c}function mn(s,a){const u=Yi(s,a);if(u>=0)return s[1|u]}function Yi(s,a){return function Qi(s,a,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),y=s[g<<u];if(a===y)return g<<u;y>a?d=g:c=g+1}return~(d<<u)}(s,a,1)}const Ao=Xr(To("Optional"),8),Mt=Xr(To("SkipSelf"),4);var At=(()=>((At=At||{})[At.Important=1]="Important",At[At.DashCase=2]="DashCase",At))();const Sc=new Map;let Ts=0;const Z="__ngContext__";function J(s,a){ei(a)?(s[Z]=a[as],function Zd(s){Sc.set(s[as],s)}(a)):s[Z]=a}let Ai;function Kr(s,a){return Ai(s,a)}function Qd(s){const a=s[An];return Zi(a)?a[An]:a}function gu(s){return $f(s[Oi])}function mu(s){return $f(s[gn])}function $f(s){for(;null!==s&&!Zi(s);)s=s[gn];return s}function fa(s,a,u,c,d){if(null!=c){let g,y=!1;Zi(c)?g=c:ei(c)&&(y=!0,c=c[wr]);const C=dr(c);0===s&&null!==u?null==d?_i(a,u,C):Gt(a,u,C,d||null,!0):1===s&&null!==u?Gt(a,u,C,d||null,!0):2===s?function wy(s,a,u){const c=Ss(s,a);c&&function pa(s,a,u,c){s.removeChild(a,u,c)}(s,c,a,u)}(a,C,y):3===s&&a.destroyNode(C),null!=g&&function Zf(s,a,u,c,d){const g=u[Wo];g!==dr(u)&&fa(a,s,c,g,d);for(let C=Pr;C<u.length;C++){const T=u[C];Kf(T[et],T,s,a,c,g)}}(a,s,g,u,d)}}function Gf(s,a,u){return s.createElement(a,u)}function I(s,a){const u=s[go],c=u.indexOf(a),d=a[An];512&a[Yt]&&(a[Yt]&=-513,Yo(d,-1)),u.splice(c,1)}function x(s,a){if(s.length<=Pr)return;const u=Pr+a,c=s[u];if(c){const d=c[fo];null!==d&&d!==s&&I(d,c),a>0&&(s[u-1][gn]=c[gn]);const g=iu(s,Pr+a);!function Wg(s,a){Kf(s,a,a[Ht],2,null,null),a[wr]=null,a[Er]=null}(c[et],c);const y=g[bi];null!==y&&y.detachView(g[et]),c[An]=null,c[gn]=null,c[Yt]&=-65}return c}function k(s,a){if(!(128&a[Yt])){const u=a[Ht];u.destroyNode&&Kf(s,a,u,3,null,null),function w(s){let a=s[Oi];if(!a)return ee(s[et],s);for(;a;){let u=null;if(ei(a))u=a[Oi];else{const c=a[Pr];c&&(u=c)}if(!u){for(;a&&!a[gn]&&a!==s;)ei(a)&&ee(a[et],a),a=a[An];null===a&&(a=s),ei(a)&&ee(a[et],a),u=a&&a[gn]}a=u}}(a)}}function ee(s,a){if(!(128&a[Yt])){a[Yt]&=-65,a[Yt]|=128,function Ve(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=a[u[c]];if(!(d instanceof Cs)){const g=u[c+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const C=d[g[y]],T=g[y+1];On(4,C,T);try{T.call(C)}finally{On(5,C,T)}}else{On(4,d,g);try{g.call(d)}finally{On(5,d,g)}}}}}(s,a),function ce(s,a){const u=s.cleanup,c=a[ho];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const y=u[g+3];y>=0?c[d=y]():c[d=-y].unsubscribe(),g+=2}else{const y=c[d=u[g+1]];u[g].call(y)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();a[ho]=null}}(s,a),1===a[et].type&&a[Ht].destroy();const u=a[fo];if(null!==u&&Zi(a[An])){u!==a[An]&&I(u,a);const c=a[bi];null!==c&&c.detachView(s)}!function Yd(s){Sc.delete(s[as])}(a)}}function Ye(s,a,u){return function Et(s,a,u){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return u[wr];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===L.None||g===L.Emulated)return null}return kr(c,u)}}(s,a.parent,u)}function Gt(s,a,u,c,d){s.insertBefore(a,u,c,d)}function _i(s,a,u){s.appendChild(a,u)}function Po(s,a,u,c,d){null!==c?Gt(s,a,u,c,d):_i(s,a,u)}function Ss(s,a){return s.parentNode(a)}let Jd,Cy,qg,ga=function Nc(s,a,u){return 40&s.type?kr(s,u):null};function yl(s,a,u,c){const d=Ye(s,c,a),g=a[Ht],C=function Xd(s,a,u){return ga(s,a,u)}(c.parent||a[Er],c,a);if(null!=d)if(Array.isArray(u))for(let T=0;T<u.length;T++)Po(g,d,u[T],C,!1);else Po(g,d,u,C,!1);void 0!==Jd&&Jd(g,c,a,u,d)}function th(s,a){if(null!==a){const u=a.type;if(3&u)return kr(a,s);if(4&u)return ma(-1,s[a.index]);if(8&u){const c=a.child;if(null!==c)return th(s,c);{const d=s[a.index];return Zi(d)?ma(-1,d):dr(d)}}if(32&u)return Kr(a,s)()||dr(s[a.index]);{const c=vl(s,a);return null!==c?Array.isArray(c)?c[0]:th(Qd(s[cr]),c):th(s,a.next)}}return null}function vl(s,a){return null!==a?s[cr][Er].projection[a.projection]:null}function ma(s,a){const u=Pr+s+1;if(u<a.length){const c=a[u],d=c[et].firstChild;if(null!==d)return th(c,d)}return a[Wo]}function qf(s,a,u,c,d,g,y){for(;null!=u;){const C=c[u.index],T=u.type;if(y&&0===a&&(C&&J(dr(C),c),u.flags|=2),32!=(32&u.flags))if(8&T)qf(s,a,u.child,c,d,g,!1),fa(a,s,d,C,g);else if(32&T){const A=Kr(u,c);let M;for(;M=A();)fa(a,s,d,M,g);fa(a,s,d,C,g)}else 16&T?Ey(s,a,c,u,d,g):fa(a,s,d,C,g);u=y?u.projectionNext:u.next}}function Kf(s,a,u,c,d,g){qf(u,c,s.firstChild,a,d,g,!1)}function Ey(s,a,u,c,d,g){const y=u[cr],T=y[Er].projection[c.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)fa(a,s,d,T[A],g);else qf(s,a,T,y[An],d,g,!0)}function wl(s,a,u){""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u)}function Yf(s,a,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&na(s,a,c),null!==d&&wl(s,a,d),null!==g&&function Iy(s,a,u){s.setAttribute(a,"style",u)}(s,a,g)}function ET(s){Cy=s}function oE(s){return function Dy(){if(void 0===qg&&(qg=null,an.trustedTypes))try{qg=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return qg}()?.createScriptURL(s)||s}class aE{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${at})`}}function ya(s){return s instanceof aE?s.changingThisBreaksApplicationSecurity:s}function As(s,a){const u=function rh(s){return s instanceof aE&&s.getTypeName()||null}(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${at})`)}return u===a}const dE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Cr=(()=>((Cr=Cr||{})[Cr.NONE=0]="NONE",Cr[Cr.HTML=1]="HTML",Cr[Cr.STYLE=2]="STYLE",Cr[Cr.SCRIPT=3]="SCRIPT",Cr[Cr.URL=4]="URL",Cr[Cr.RESOURCE_URL=5]="RESOURCE_URL",Cr))();function mE(s){const a=rp();return a?a.sanitize(Cr.URL,s)||"":As(s,"URL")?ya(s):function Jf(s){return(s=String(s)).match(dE)?s:"unsafe:"+s}(ke(s))}function Xg(s){const a=rp();if(a)return oE(a.sanitize(Cr.RESOURCE_URL,s)||"");if(As(s,"ResourceURL"))return oE(ya(s));throw new _e(904,!1)}function yE(s,a,u){return function kT(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?Xg:mE}(a,u)(s)}function rp(){const s=ge();return s&&s[$u]}const Py=new on("ENVIRONMENT_INITIALIZER"),kc=new on("INJECTOR",-1),sh=new on("INJECTOR_DEF_TYPES");class vE{get(a,u=qn){if(u===qn){const c=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw c.name="NullInjectorError",c}return u}}function FT(s){return{\u0275providers:s}}function ip(...s){return{\u0275providers:oh(0,s),\u0275fromNgModule:!0}}function oh(s,...a){const u=[],c=new Set;let d;return Ys(a,g=>{const y=g;ky(y,u,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&wE(d,u),u}function wE(s,a){for(let u=0;u<s.length;u++){const{providers:d}=s[u];Oy(d,g=>{a.push(g)})}}function ky(s,a,u,c){if(!(s=te(s)))return!1;let d=null,g=zn(s);const y=!g&&wt(s);if(g||y){if(y&&!y.standalone)return!1;d=s}else{const T=s.ngModule;if(g=zn(T),!g)return!1;d=T}const C=c.has(d);if(y){if(C)return!1;if(c.add(d),y.dependencies){const T="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of T)ky(A,a,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let A;c.add(d);try{Ys(g.imports,M=>{ky(M,a,u,c)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&wE(A,a)}if(!C){const A=ws(d)||(()=>new d);a.push({provide:d,useFactory:A,deps:Y},{provide:sh,useValue:d,multi:!0},{provide:Py,useValue:()=>Bt(d),multi:!0})}const T=g.providers;null==T||C||Oy(T,M=>{a.push(M)})}}return d!==s&&void 0!==s.providers}function Oy(s,a){for(let u of s)Te(u)&&(u=u.\u0275providers),Array.isArray(u)?Oy(u,a):a(u)}const LT=ae({provide:String,useValue:ae});function Fy(s){return null!==s&&"object"==typeof s&&LT in s}function _u(s){return"function"==typeof s}const El=new on("Set Injector scope."),em={},VT={};let Ly;function tm(){return void 0===Ly&&(Ly=new vE),Ly}class Oc{}class IE extends Oc{get destroyed(){return this._destroyed}constructor(a,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uh(a,y=>this.processProvider(y)),this.records.set(kc,ah(void 0,this)),d.has("environment")&&this.records.set(Oc,ah(void 0,this));const g=this.records.get(El);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(sh.multi,Y,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Jt(this),c=Wn(void 0);try{return a()}finally{Jt(u),Wn(c)}}get(a,u=qn,c=gt.Default){this.assertNotDestroyed(),c=Nr(c);const d=Jt(this),g=Wn(void 0);try{if(!(c&gt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const T=function jy(s){return"function"==typeof s||"object"==typeof s&&s instanceof on}(a)&&In(a);C=T&&this.injectableDefInScope(T)?ah(Uy(a),em):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(c&gt.Self?tm():this.parent).get(a,u=c&gt.Optional&&u===qn?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Pn]=y[Pn]||[]).unshift(me(a)),d)throw y;return function Jr(s,a,u,c){const d=s[Pn];throw a[Kt]&&d.unshift(a[Kt]),s.message=function z(s,a,u,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==lr?s.slice(2):s;let d=me(a);if(Array.isArray(a))d=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let y in a)if(a.hasOwnProperty(y)){let C=a[y];g.push(y+":"+("string"==typeof C?JSON.stringify(C):me(C)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Vn,"\n  ")}`}("\n"+s.message,d,u,c),s[Qr]=d,s[Pn]=null,s}(y,a,"R3InjectorError",this.source)}throw y}finally{Wn(g),Jt(d)}}resolveInjectorInitializers(){const a=Jt(this),u=Wn(void 0);try{const c=this.get(Py.multi,Y,gt.Self);for(const d of c)d()}finally{Jt(a),Wn(u)}}toString(){const a=[],u=this.records;for(const c of u.keys())a.push(me(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(a){let u=_u(a=te(a))?a:te(a&&a.provide);const c=function jT(s){return Fy(s)?ah(void 0,s.useValue):ah(Vy(s),em)}(a);if(_u(a)||!0!==a.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=ah(void 0,em,!0),d.factory=()=>Zn(d.multi),this.records.set(u,d)),u=a,d.multi.push(a)}this.records.set(u,c)}hydrate(a,u){return u.value===em&&(u.value=VT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function CE(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=te(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Uy(s){const a=In(s),u=null!==a?a.factory:ws(s);if(null!==u)return u;if(s instanceof on)throw new _e(204,!1);if(s instanceof Function)return function BT(s){const a=s.length;if(a>0)throw function ua(s,a){const u=[];for(let c=0;c<s;c++)u.push(a);return u}(a,"?"),new _e(204,!1);const u=function xr(s){return s&&(s[di]||s[co])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new _e(204,!1)}function Vy(s,a,u){let c;if(_u(s)){const d=te(s);return ws(d)||Uy(d)}if(Fy(s))c=()=>te(s.useValue);else if(function EE(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Zn(s.deps||[]));else if(function UT(s){return!(!s||!s.useExisting)}(s))c=()=>Bt(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function By(s){return!!s.deps}(s))return ws(d)||Uy(d);c=()=>new d(...Zn(s.deps))}return c}function ah(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function uh(s,a){for(const u of s)Array.isArray(u)?uh(u,a):u&&Te(u)?uh(u.\u0275providers,a):a(u)}class $T{}class DE{}class TE{resolveComponentFactory(a){throw function HT(s){const a=Error(`No component factory found for ${me(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let lh=(()=>{class s{}return s.NULL=new TE,s})();function nm(){return yu(Yn(),ge())}function yu(s,a){return new ch(kr(s,a))}let ch=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=nm,s})();function sp(s){return s instanceof ch?s.nativeElement:s}class Hy{}let GT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function zT(){const s=ge(),u=Ir(Yn().index,s);return(ei(u)?u:s)[Ht]}(),s})(),WT=(()=>{class s{}return s.\u0275prov=vt({token:s,providedIn:"root",factory:()=>null}),s})();class SE{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const AE=new SE("15.2.9"),rm={},Gy="ngOriginalError";function zy(s){return s[Gy]}class op{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&zy(a);for(;u&&zy(u);)u=zy(u);return u||null}}function va(s){return s instanceof Function?s():s}function kE(s,a,u){let c=s.length;for(;;){const d=s.indexOf(a,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=a.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const Wy="ng-template";function qy(s,a,u){let c=0,d=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&d){const y=s[c++];if(u&&"class"===g&&-1!==kE(y.toLowerCase(),a,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function Ky(s){return 4===s.type&&s.value!==Wy}function dh(s,a,u){return a===(4!==s.type||u?s.value:Wy)}function Zy(s,a,u){let c=4;const d=s.attrs||[],g=function FE(s){for(let a=0;a<s.length;a++)if(Od(s[a]))return a;return s.length}(d);let y=!1;for(let C=0;C<a.length;C++){const T=a[C];if("number"!=typeof T){if(!y)if(4&c){if(c=2|1&c,""!==T&&!dh(s,T,u)||""===T&&1===a.length){if(Oo(c))return!1;y=!0}}else{const A=8&c?T:a[++C];if(8&c&&null!==s.attrs){if(!qy(s.attrs,A,u)){if(Oo(c))return!1;y=!0}continue}const $=OE(8&c?"class":T,d,Ky(s),u);if(-1===$){if(Oo(c))return!1;y=!0;continue}if(""!==A){let X;X=$>g?"":d[$+1].toLowerCase();const Q=8&c?X:null;if(Q&&-1!==kE(Q,A,0)||2&c&&A!==X){if(Oo(c))return!1;y=!0}}}}else{if(!y&&!Oo(c)&&!Oo(T))return!1;if(y&&Oo(T))continue;y=!1,c=T|1&c}}return Oo(c)||y}function Oo(s){return 0==(1&s)}function OE(s,a,u,c){if(null===a)return-1;let d=0;if(c||!u){let g=!1;for(;d<a.length;){const y=a[d];if(y===s)return d;if(3===y||6===y)g=!0;else{if(1===y||2===y){let C=a[++d];for(;"string"==typeof C;)C=a[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=g?1:2}return-1}return function LE(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===a)return u;u++}return-1}(a,s)}function up(s,a,u=!1){for(let c=0;c<a.length;c++)if(Zy(s,a[c],u))return!0;return!1}function UE(s,a){return s?":not("+a.trim()+")":a}function eS(s){let a=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const C=s[++u];d+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Oo(y)&&(a+=UE(g,d),d=""),c=y,g=g||!Oo(c);u++}return""!==d&&(a+=UE(g,d)),a}const $t={};function VE(s){BE(Vt(),ge(),qr()+s,!1)}function BE(s,a,u,c){if(!c)if(3==(3&a[Yt])){const g=s.preOrderCheckHooks;null!==g&&rc(a,g,u)}else{const g=s.preOrderHooks;null!==g&&Nd(a,g,0,u)}cs(u)}function $E(s,a=null,u=null,c){const d=Yy(s,a,u,c);return d.resolveInjectorInitializers(),d}function Yy(s,a=null,u=null,c,d=new Set){const g=[u||Y,ip(s)];return c=c||("object"==typeof s?void 0:me(s)),new IE(g,a||tm(),c||null,d)}let hh=(()=>{class s{static create(u,c){if(Array.isArray(u))return $E({name:""},c,u,"");{const d=u.name??"";return $E({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=qn,s.NULL=new vE,s.\u0275prov=vt({token:s,providedIn:"any",factory:()=>Bt(kc)}),s.__NG_ELEMENT_ID__=-1,s})();function gh(s,a=gt.Default){const u=ge();return null===u?Bt(s,a):Vd(Yn(),u,te(s),a)}function KE(){throw new Error("invalid")}function ZE(s,a){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const y=s.data[g];Td(u[c]),y.contentQueries(2,a[g],g)}}}function am(s,a,u,c,d,g,y,C,T,A,M){const $=a.blueprint.slice();return $[wr]=d,$[Yt]=76|c,(null!==M||s&&1024&s[Yt])&&($[Yt]|=1024),qa($),$[An]=$[Us]=s,$[Bn]=u,$[zo]=y||s&&s[zo],$[Ht]=C||s&&s[Ht],$[$u]=T||s&&s[$u]||null,$[Va]=A||s&&s[Va]||null,$[Er]=g,$[as]=function Ac(){return Ts++}(),$[Wr]=M,$[cr]=2==a.type?s[cr]:$,$}function fp(s,a,u,c,d){let g=s.data[a];if(null===g)g=function tv(s,a,u,c,d){const g=Ed(),y=Zu(),T=s.data[a]=function wS(s,a,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,u,a,c,d);return null===s.firstChild&&(s.firstChild=T),null!==g&&(y?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(s,a,u,c,d),function Dd(){return Lt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const y=function Qo(){const s=Lt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Li(g,!0),g}function pp(s,a,u,c){if(0===u)return-1;const d=a.length;for(let g=0;g<u;g++)a.push(c),s.blueprint.push(c),s.data.push(null);return d}function um(s,a,u){Jo(a);try{const c=s.viewQuery;null!==c&&iI(1,c,u);const d=s.template;null!==d&&QE(s,a,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ZE(s,a),s.staticViewQueries&&iI(2,s.viewQuery,u);const g=s.components;null!==g&&function YE(s,a){for(let u=0;u<a.length;u++)pP(s,a[u])}(a,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[Yt]&=-5,Ad()}}function lm(s,a,u,c){const d=a[Yt];if(128!=(128&d)){Jo(a);try{qa(a),function zs(s){return Lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&QE(s,a,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&rc(a,A,null)}else{const A=s.preOrderHooks;null!==A&&Nd(a,A,0,null),Pd(a,0)}if(function hP(s){for(let a=gu(s);null!==a;a=mu(a)){if(!a[ja])continue;const u=a[go];for(let c=0;c<u.length;c++){const d=u[c];512&d[Yt]||Yo(d[An],1),d[Yt]|=512}}}(a),function dP(s){for(let a=gu(s);null!==a;a=mu(a))for(let u=Pr;u<a.length;u++){const c=a[u],d=c[et];Hs(c)&&lm(d,c,d.template,c[Bn])}}(a),null!==s.contentQueries&&ZE(s,a),y){const A=s.contentCheckHooks;null!==A&&rc(a,A)}else{const A=s.contentHooks;null!==A&&Nd(a,A,1),Pd(a,1)}!function _S(s,a){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)cs(~d);else{const g=d,y=u[++c],C=u[++c];bd(y,g),C(2,a[g])}}}finally{cs(-1)}}(s,a);const C=s.components;null!==C&&function yS(s,a){for(let u=0;u<a.length;u++)fP(s,a[u])}(a,C);const T=s.viewQuery;if(null!==T&&iI(2,T,c),y){const A=s.viewCheckHooks;null!==A&&rc(a,A)}else{const A=s.viewHooks;null!==A&&Nd(a,A,2),Pd(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Yt]&=-41,512&a[Yt]&&(a[Yt]&=-513,Yo(a[An],-1))}finally{Ad()}}}function QE(s,a,u,c,d){const g=qr(),y=2&c;try{cs(-1),y&&a.length>En&&BE(s,a,En,!1),On(y?2:0,d),u(c,d)}finally{cs(g),On(y?3:1,d)}}function qe(s,a,u){if(mo(a)){const d=a.directiveEnd;for(let g=a.directiveStart;g<d;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,u[g],g)}}}function $n(s,a,u){vd()&&(function U(s,a,u,c){const d=u.directiveStart,g=u.directiveEnd;Hu(u)&&function DS(s,a,u){const c=kr(a,s),d=Lc(u),g=s[zo],y=iv(s,am(s,d,null,u.onPush?32:16,c,a,g,g.createRenderer(c,u),null,null,null));s[a.index]=y}(a,u,s.data[d+u.componentOffset]),s.firstCreatePass||uc(u,a),J(c,a);const y=u.initialInputs;for(let C=d;C<g;C++){const T=s.data[C],A=Fn(a,s,C,u);J(A,a),null!==y&&cP(0,C-d,A,T,0,y),fi(T)&&(Ir(u.index,a)[Bn]=Fn(a,s,C,u))}}(s,a,u,kr(u,a)),64==(64&u.flags)&&yi(s,a,u))}function vu(s,a,u=kr){const c=a.localNames;if(null!==c){let d=a.index+1;for(let g=0;g<c.length;g+=2){const y=c[g+1],C=-1===y?u(a,s):s[y];s[d++]=C}}}function Lc(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=cm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function cm(s,a,u,c,d,g,y,C,T,A){const M=En+c,$=M+d,X=function rP(s,a){const u=[];for(let c=0;c<a;c++)u.push(c<s?null:$t);return u}(M,$),Q="function"==typeof A?A():A;return X[et]={type:s,blueprint:X,template:u,queries:null,viewQuery:C,declTNode:a,data:X.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:Q,incompleteFirstPass:!1}}function dm(s,a,u,c){const d=SS(a);null===u?d.push(c):(d.push(u),s.firstCreatePass&&AS(s).push(c,d.length-1))}function XE(s,a,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?JE(u,a,d,g):c.hasOwnProperty(d)&&JE(u,a,c[d],g)}return u}function JE(s,a,u,c){s.hasOwnProperty(u)?s[u].push(a,c):s[u]=[a,c]}function no(s,a,u,c,d,g,y,C){const T=kr(a,u);let M,A=a.inputs;!C&&null!=A&&(M=A[c])?(sI(s,u,M,c,d),Hu(a)&&function iP(s,a){const u=Ir(a,s);16&u[Yt]||(u[Yt]|=32)}(u,a.index)):3&a.type&&(c=function IS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,a.value||"",c):d,g.setProperty(T,c,d))}function eI(s,a,u,c){if(vd()){const d=null===c?null:{"":-1},g=function Ea(s,a){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const y=u[g];if(up(a,y.selectors,!1))if(c||(c=[]),fi(y))if(null!==y.findHostDirectiveDefs){const C=[];d=d||new Map,y.findHostDirectiveDefs(y,C,d),c.unshift(...C,y),hm(s,a,C.length)}else c.unshift(y),hm(s,a,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(s,u);let y,C;null===g?y=C=null:[y,C]=g,null!==y&&CS(s,a,u,y,d,C),d&&function nv(s,a,u){if(a){const c=s.localNames=[];for(let d=0;d<a.length;d+=2){const g=u[a[d+1]];if(null==g)throw new _e(-301,!1);c.push(a[d],g)}}}(u,c,d)}u.mergedAttrs=Io(u.mergedAttrs,u.attrs)}function CS(s,a,u,c,d,g){for(let A=0;A<c.length;A++)qs(uc(u,a),s,c[A].type);!function lP(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}(u,s.data.length,c.length);for(let A=0;A<c.length;A++){const M=c[A];M.providersResolver&&M.providersResolver(M)}let y=!1,C=!1,T=pp(s,a,c.length,null);for(let A=0;A<c.length;A++){const M=c[A];u.mergedAttrs=Io(u.mergedAttrs,M.hostAttrs),rv(s,u,a,T,M),tI(T,M,d),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const $=M.type.prototype;!y&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(u.index),y=!0),!C&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(u.index),C=!0),T++}!function ES(s,a,u){const d=a.directiveEnd,g=s.data,y=a.attrs,C=[];let T=null,A=null;for(let M=a.directiveStart;M<d;M++){const $=g[M],X=u?u.get($):null,Ie=X?X.outputs:null;T=XE($.inputs,M,T,X?X.inputs:null),A=XE($.outputs,M,A,Ie);const He=null===T||null===y||Ky(a)?null:bS(T,M,y);C.push(He)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=T,a.outputs=A}(s,u,g)}function yi(s,a,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,y=function jg(){return Lt.lFrame.currentDirectiveIndex}();try{cs(g);for(let C=c;C<d;C++){const T=s.data[C],A=a[C];Qn(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&wa(T,A)}}finally{cs(-1),Qn(y)}}function wa(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function hm(s,a,u){a.componentOffset=u,(s.components??(s.components=[])).push(a.index)}function tI(s,a,u){if(u){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)u[a.exportAs[c]]=s;fi(a)&&(u[""]=s)}}function rv(s,a,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=ws(d.type)),y=new Cs(g,fi(d),gh);s.blueprint[c]=y,u[c]=y,function aP(s,a,u,c,d){const g=d.hostBindings;if(g){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const C=~a.index;(function uP(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(y)!=C&&y.push(C),y.push(u,c,g)}}(s,a,c,pp(s,u,d.hostVars,$t),d)}function Ia(s,a,u,c,d,g){const y=kr(s,a);!function nI(s,a,u,c,d,g,y){if(null==g)s.removeAttribute(a,d,u);else{const C=null==y?ke(g):y(g,c||"",d);s.setAttribute(a,d,C,u)}}(a[Ht],y,g,s.value,u,c,d)}function cP(s,a,u,c,d,g){const y=g[a];if(null!==y){const C=c.setInput;for(let T=0;T<y.length;){const A=y[T++],M=y[T++],$=y[T++];null!==C?c.setInput(u,$,A,M):u[M]=$}}}function bS(s,a,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const y=s[g];for(let C=0;C<y.length;C+=2)if(y[C]===a){c.push(g,y[C+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function TS(s,a,u,c){return[s,!0,!1,a,null,0,c,u,null,null]}function fP(s,a){const u=Ir(a,s);if(Hs(u)){const c=u[et];48&u[Yt]?lm(c,u,c.template,u[Bn]):u[Ls]>0&&rI(u)}}function rI(s){for(let c=gu(s);null!==c;c=mu(c))for(let d=Pr;d<c.length;d++){const g=c[d];if(Hs(g))if(512&g[Yt]){const y=g[et];lm(y,g,y.template,g[Bn])}else g[Ls]>0&&rI(g)}const u=s[et].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Ir(u[c],s);Hs(d)&&d[Ls]>0&&rI(d)}}function pP(s,a){const u=Ir(a,s),c=u[et];(function gP(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])})(c,u),um(c,u,u[Bn])}function iv(s,a){return s[Oi]?s[Ba][gn]=a:s[Oi]=a,s[Ba]=a,a}function sv(s){for(;s;){s[Yt]|=32;const a=Qd(s);if(Bs(s)&&!a)return s;s=a}return null}function ov(s,a,u,c=!0){const d=a[zo];d.begin&&d.begin();try{lm(s,a,s.template,u)}catch(y){throw c&&xS(a,y),y}finally{d.end&&d.end()}}function iI(s,a,u){Td(0),a(s,u)}function SS(s){return s[ho]||(s[ho]=[])}function AS(s){return s.cleanup||(s.cleanup=[])}function xS(s,a){const u=s[Va],c=u?u.get(op,null):null;c&&c.handleError(a)}function sI(s,a,u,c,d){for(let g=0;g<u.length;){const y=u[g++],C=u[g++],T=a[y],A=s.data[y];null!==A.setInput?A.setInput(T,d,c,C):T[C]=d}}function av(s,a,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==a)for(let y=0;y<a.length;y++){const C=a[y];"number"==typeof C?g=C:1==g?d=ve(d,C):2==g&&(c=ve(c,C+": "+a[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function uv(s,a,u,c,d=!1){for(;null!==u;){const g=a[u.index];if(null!==g&&c.push(dr(g)),Zi(g))for(let C=Pr;C<g.length;C++){const T=g[C],A=T[et].firstChild;null!==A&&uv(T[et],T,A,c)}const y=u.type;if(8&y)uv(s,a,u.child,c);else if(32&y){const C=Kr(u,a);let T;for(;T=C();)c.push(T)}else if(16&y){const C=vl(a,u);if(Array.isArray(C))c.push(...C);else{const T=Qd(a[cr]);uv(T[et],T,C,c,!0)}}u=d?u.projectionNext:u.next}return c}class fm{get rootNodes(){const a=this._lView,u=a[et];return uv(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(a){this._lView[Bn]=a}get destroyed(){return 128==(128&this._lView[Yt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[An];if(Zi(a)){const u=a[Vs],c=u?u.indexOf(this):-1;c>-1&&(x(a,c),iu(u,c))}this._attachedToViewContainer=!1}k(this._lView[et],this._lView)}onDestroy(a){dm(this._lView[et],this._lView,null,a)}markForCheck(){sv(this._cdRefInjectingView||this._lView)}detach(){this._lView[Yt]&=-65}reattach(){this._lView[Yt]|=64}detectChanges(){ov(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zf(s,a){Kf(s,a,a[Ht],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=a}}class mP extends fm{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;ov(a[et],a,a[Bn],!1)}checkNoChanges(){}get context(){return null}}class MS extends lh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=wt(a);return new pm(u,this.ngModule)}}function NS(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class yP{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,c){c=Nr(c);const d=this.injector.get(a,rm,c);return d!==rm||u===rm?d:this.parentInjector.get(a,u,c)}}class pm extends DE{get inputs(){return NS(this.componentDef.inputs)}get outputs(){return NS(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function tS(s){return s.map(eS).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,c,d){let g=(d=d||this.ngModule)instanceof Oc?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new yP(a,g):a,C=y.get(Hy,null);if(null===C)throw new _e(407,!1);const T=y.get(WT,null),A=C.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",$=c?function vS(s,a,u){return s.selectRootElement(a,u===L.ShadowDom)}(A,c,this.componentDef.encapsulation):Gf(A,M,function _P(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),X=this.componentDef.onPush?288:272,Q=cm(0,null,null,1,0,null,null,null,null,null),Ie=am(null,Q,null,X,null,null,C,A,T,y,null);let He,Je;Jo(Ie);try{const mt=this.componentDef;let Ft,Ne=null;mt.findHostDirectiveDefs?(Ft=[],Ne=new Map,mt.findHostDirectiveDefs(mt,Ft,Ne),Ft.push(mt)):Ft=[mt];const Xt=function wP(s,a){const u=s[et],c=En;return s[c]=a,fp(u,c,2,"#host",null)}(Ie,$),sr=function EP(s,a,u,c,d,g,y,C){const T=d[et];!function IP(s,a,u,c){for(const d of s)a.mergedAttrs=Io(a.mergedAttrs,d.hostAttrs);null!==a.mergedAttrs&&(av(a,a.mergedAttrs,!0),null!==u&&Yf(c,u,a))}(c,s,a,y);const A=g.createRenderer(a,u),M=am(d,Lc(u),null,u.onPush?32:16,d[s.index],s,g,A,C||null,null,null);return T.firstCreatePass&&hm(T,s,c.length-1),iv(d,M),d[s.index]=M}(Xt,$,mt,Ft,Ie,C,A);Je=qu(Q,En),$&&function DP(s,a,u,c){if(c)na(s,u,["ng-version",AE.full]);else{const{attrs:d,classes:g}=function nS(s){const a=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&a.push(g,s[++c]):8===d&&u.push(g);else{if(!Oo(d))break;d=g}c++}return{attrs:a,classes:u}}(a.selectors[0]);d&&na(s,u,d),g&&g.length>0&&wl(s,u,g.join(" "))}}(A,mt,$,c),void 0!==u&&function bP(s,a,u){const c=s.projection=[];for(let d=0;d<a.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(Je,this.ngContentSelectors,u),He=function CP(s,a,u,c,d,g){const y=Yn(),C=d[et],T=kr(y,d);CS(C,d,y,u,null,c);for(let M=0;M<u.length;M++)J(Fn(d,C,y.directiveStart+M,y),d);yi(C,d,y),T&&J(T,d);const A=Fn(d,C,y.directiveStart+y.componentOffset,y);if(s[Bn]=d[Bn]=A,null!==g)for(const M of g)M(A,a);return qe(C,y,s),A}(sr,mt,Ft,Ne,Ie,[TP]),um(Q,Ie,null)}finally{Ad()}return new vP(this.componentType,He,yu(Je,Ie),Ie,Je)}}class vP extends $T{constructor(a,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new mP(d),this.componentType=a}setInput(a,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[a])){const g=this._rootLView;sI(g[et],g,d,a,u),sv(Ir(this._tNode.index,g))}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function TP(){const s=Yn();Ju(ge()[et],s)}function oI(s){let a=function PS(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;a;){let d;if(fi(s))d=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new _e(903,!1);d=a.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=aI(s.inputs),y.declaredInputs=aI(s.declaredInputs),y.outputs=aI(s.outputs);const C=d.hostBindings;C&&xP(s,C);const T=d.viewQuery,A=d.contentQueries;if(T&&AP(s,T),A&&RP(s,A),we(s.inputs,d.inputs),we(s.declaredInputs,d.declaredInputs),we(s.outputs,d.outputs),fi(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let y=0;y<g.length;y++){const C=g[y];C&&C.ngInherit&&C(s),C===oI&&(u=!1)}}a=Object.getPrototypeOf(a)}!function SP(s){let a=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=a+=d.hostVars,d.hostAttrs=Io(d.hostAttrs,u=Io(u,d.hostAttrs))}}(c)}function aI(s){return s===N?{}:s===Y?[]:s}function AP(s,a){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{a(c,d),u(c,d)}:a}function RP(s,a){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{a(c,d,g),u(c,d,g)}:a}function xP(s,a){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{a(c,d),u(c,d)}:a}function lv(s){return!!dv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function dv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function vi(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function mm(s,a,u,c){const d=ge();return vi(d,Is(),a)&&(Vt(),Ia(Rn(),d,s,a,u,c)),mm}function _h(s,a,u,c){return vi(s,Is(),u)?a+ke(u)+c:$t}function pI(s,a,u,c,d,g,y,C){const T=ge(),A=Vt(),M=s+En,$=A.firstCreatePass?function fI(s,a,u,c,d,g,y,C,T){const A=a.consts,M=fp(a,s,4,y||null,Es(A,C));eI(a,u,M,Es(A,T)),Ju(a,M);const $=M.tView=cm(2,M,c,d,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,M),$.queries=a.queries.embeddedTView(M)),M}(M,A,T,a,u,c,d,g,y):A.data[M];Li($,!1);const X=T[Ht].createComment("");yl(A,T,X,$),J(X,T),iv(T,T[M]=TS(X,T,X,$)),$a($)&&$n(A,T,$),null!=y&&vu(T,$,C)}function gI(s){return function ti(s,a){return s[a]}(function Cd(){return Lt.lFrame.contextLView}(),En+s)}function pv(s,a,u){const c=ge();return vi(c,Is(),a)&&no(Vt(),Rn(),c,s,a,c[Ht],u,!1),pv}function vm(s,a,u,c,d){const y=d?"class":"style";sI(s,u,a.inputs[y],y,c)}function mp(s,a,u,c){const d=ge(),g=Vt(),y=En+s,C=d[Ht],T=g.firstCreatePass?function gv(s,a,u,c,d,g){const y=a.consts,T=fp(a,s,2,c,Es(y,d));return eI(a,u,T,Es(y,g)),null!==T.attrs&&av(T,T.attrs,!1),null!==T.mergedAttrs&&av(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(y,g,d,a,u,c):g.data[y],A=d[y]=Gf(C,a,function Md(){return Lt.lFrame.currentNamespace}()),M=$a(T);return Li(T,!0),Yf(C,A,T),32!=(32&T.flags)&&yl(g,d,A,T),0===function Zl(){return Lt.lFrame.elementDepthCount}()&&J(A,d),function Yl(){Lt.lFrame.elementDepthCount++}(),M&&($n(g,d,T),qe(g,T,d)),null!==c&&vu(d,T),mp}function Eh(){let s=Yn();Zu()?function Id(){Lt.lFrame.isParent=!1}():(s=s.parent,Li(s,!1));const a=s;!function Ql(){Lt.lFrame.elementDepthCount--}();const u=Vt();return u.firstCreatePass&&(Ju(u,s),mo(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Ds(s){return 0!=(8&s.flags)}(a)&&vm(u,a,ge(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ic(s){return 0!=(16&s.flags)}(a)&&vm(u,a,ge(),a.stylesWithoutHost,!1),Eh}function wm(s,a,u,c){return mp(s,a,u,c),Eh(),wm}function mI(){return ge()}function vp(s){return!!s&&"function"==typeof s.then}function Im(s){return!!s&&"function"==typeof s.subscribe}const Cm=Im;function wp(s,a,u,c){const d=ge(),g=Vt(),y=Yn();return function yI(s,a,u,c,d,g,y){const C=$a(c),A=s.firstCreatePass&&AS(s),M=a[Bn],$=SS(a);let X=!0;if(3&c.type||y){const He=kr(c,a),Je=y?y(He):He,mt=$.length,Ft=y?Xt=>y(dr(Xt[c.index])):c.index;let Ne=null;if(!y&&C&&(Ne=function US(s,a,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const y=d[g];if(y===u&&d[g+1]===c){const C=a[ho],T=d[g+2];return C.length>T?C[T]:null}"string"==typeof y&&(g+=2)}return null}(s,a,d,c.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=g,Ne.__ngLastListenerFn__=g,X=!1;else{g=Dm(c,a,M,g,!1);const Xt=u.listen(Je,d,g);$.push(g,Xt),A&&A.push(d,Ft,mt,mt+1)}}else g=Dm(c,a,M,g,!1);const Q=c.outputs;let Ie;if(X&&null!==Q&&(Ie=Q[d])){const He=Ie.length;if(He)for(let Je=0;Je<He;Je+=2){const sr=a[Ie[Je]][Ie[Je+1]].subscribe(g),Sr=$.length;$.push(g,sr),A&&A.push(d,c.index,Sr,-(Sr+1))}}}(g,d,d[Ht],y,s,a,c),wp}function Ep(s,a,u,c){try{return On(6,a,u),!1!==u(c)}catch(d){return xS(s,d),!1}finally{On(7,a,u)}}function Dm(s,a,u,c,d){return function g(y){if(y===Function)return c;sv(s.componentOffset>-1?Ir(s.index,a):a);let T=Ep(a,u,c,y),A=g.__ngNextListenerFn__;for(;A;)T=Ep(a,u,A,y)&&T,A=A.__ngNextListenerFn__;return d&&!1===T&&(y.preventDefault(),y.returnValue=!1),T}}function vI(s=1){return function tc(s){return(Lt.lFrame.contextLView=function Rd(s,a){for(;s>0;)a=a[Us],s--;return a}(s,Lt.lFrame.contextLView))[Bn]}(s)}function bm(s,a,u){return wv(s,"",a,"",u),bm}function wv(s,a,u,c,d){const g=ge(),y=_h(g,a,u,c);return y!==$t&&no(Vt(),Rn(),g,s,y,g[Ht],d,!1),wv}function Tm(s,a){return s<<17|a<<2}function Tl(s){return s>>17&32767}function Ih(s){return 2|s}function Sl(s){return(131068&s)>>2}function Sm(s,a){return-131069&s|a<<2}function Dv(s){return 1|s}function bv(s,a,u,c,d){const g=s[u+1],y=null===a;let C=c?Tl(g):Sl(g),T=!1;for(;0!==C&&(!1===T||y);){const M=s[C+1];SI(s[C],a)&&(T=!0,s[C+1]=c?Dv(M):Ih(M)),C=c?Tl(M):Sl(M)}T&&(s[u+1]=c?Ih(g):Dv(g))}function SI(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Yi(s,a)>=0}function RI(s,a){return function Ta(s,a,u,c){const d=ge(),g=Vt(),y=function ls(s){const a=Lt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}(2);g.firstUpdatePass&&function KS(s,a,u,c){const d=s.data;if(null===d[u+1]){const g=d[qr()],y=function xI(s,a){return a>=s.expandoStartIndex}(s,u);(function MI(s,a){return 0!=(s.flags&(a?8:16))})(g,c)&&null===a&&!y&&(a=!1),a=function BP(s,a,u,c){const d=function Yu(s){const a=Lt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=c?a.residualClasses:a.residualStyles;if(null===d)0===(c?a.classBindings:a.styleBindings)&&(u=ts(u=Rv(null,s,a,u,c),a.attrs,c),g=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==d)if(u=Rv(d,s,a,u,c),null===g){let T=function jP(s,a,u){const c=u?a.classBindings:a.styleBindings;if(0!==Sl(c))return s[Tl(c)]}(s,a,c);void 0!==T&&Array.isArray(T)&&(T=Rv(null,s,a,T[1],c),T=ts(T,a.attrs,c),function $P(s,a,u,c){s[Tl(u?a.classBindings:a.styleBindings)]=c}(s,a,c,T))}else g=function HP(s,a,u){let c;const d=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<d;g++)c=ts(c,s[g].hostAttrs,u);return ts(c,a.attrs,u)}(s,a,c)}return void 0!==g&&(c?a.residualClasses=g:a.residualStyles=g),u}(d,g,a,c),function bI(s,a,u,c,d,g){let y=g?a.classBindings:a.styleBindings,C=Tl(y),T=Sl(y);s[c]=u;let M,A=!1;if(Array.isArray(u)?(M=u[1],(null===M||Yi(u,M)>0)&&(A=!0)):M=u,d)if(0!==T){const X=Tl(s[C+1]);s[c+1]=Tm(X,C),0!==X&&(s[X+1]=Sm(s[X+1],c)),s[C+1]=function BS(s,a){return 131071&s|a<<17}(s[C+1],c)}else s[c+1]=Tm(C,0),0!==C&&(s[C+1]=Sm(s[C+1],c)),C=c;else s[c+1]=Tm(T,0),0===C?C=c:s[T+1]=Sm(s[T+1],c),T=c;A&&(s[c+1]=Ih(s[c+1])),bv(s,M,c,!0),bv(s,M,c,!1),function TI(s,a,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&Yi(g,a)>=0&&(u[c+1]=Dv(u[c+1]))}(a,M,s,c,g),y=Tm(C,T),g?a.classBindings=y:a.styleBindings=y}(d,g,a,u,y,c)}}(g,s,y,c),a!==$t&&vi(d,y,a)&&function Cp(s,a,u,c,d,g,y,C){if(!(3&a.type))return;const T=s.data,A=T[C+1],M=function Cv(s){return 1==(1&s)}(A)?Dh(T,a,u,d,Sl(A),y):void 0;Mm(M)||(Mm(g)||function VS(s){return 2==(2&s)}(A)&&(g=Dh(T,null,u,d,C,y)),function _a(s,a,u,c,d){if(a)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:At.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=At.Important),s.setStyle(u,c,d,g))}}(c,y,wo(qr(),u),d,g))}(g,g.data[qr()],d,d[Ht],s,d[y+1]=function xv(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=me(ya(s)))),s}(a,u),c,y)}(s,a,null,!0),RI}function Rv(s,a,u,c,d){let g=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(g=a[C],c=ts(c,g.hostAttrs,d),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function ts(s,a,u){const c=u?1:2;let d=-1;if(null!==a)for(let g=0;g<a.length;g++){const y=a[g];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ui(s,y,!!u||a[++g]))}return void 0===s?null:s}function Dh(s,a,u,c,d,g){const y=null===a;let C;for(;d>0;){const T=s[d],A=Array.isArray(T),M=A?T[1]:T,$=null===M;let X=u[d+1];X===$t&&(X=$?Y:void 0);let Q=$?mn(X,c):M===c?X:void 0;if(A&&!Mm(Q)&&(Q=mn(T,c)),Mm(Q)&&(C=Q,y))return C;const Ie=s[d+1];d=y?Tl(Ie):Sl(Ie)}if(null!==a){let T=g?a.residualClasses:a.residualStyles;null!=T&&(C=mn(T,c))}return C}function Mm(s){return void 0!==s}function NI(s,a=""){const u=ge(),c=Vt(),d=s+En,g=c.firstCreatePass?fp(c,d,1,a,null):c.data[d],y=u[d]=function _l(s,a){return s.createText(a)}(u[Ht],a);yl(c,u,y,g),Li(g,!1)}function Mv(s){return ri("",s,""),Mv}function ri(s,a,u){const c=ge(),d=_h(c,s,a,u);return d!==$t&&function Il(s,a,u){const c=wo(a,s);!function Hf(s,a,u){s.setValue(a,u)}(s[Ht],c,u)}(c,qr(),d),ri}const Ra=void 0;var zI=["en",[["a","p"],["AM","PM"],Ra],[["AM","PM"],Ra,Ra],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ra,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ra,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ra,"{1} 'at' {0}",Ra],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bv(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Bc={};function Ah(s){const a=function KI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Vm(a);if(u)return u;const c=a.split("-")[0];if(u=Vm(c),u)return u;if("en"===c)return zI;throw new _e(701,!1)}function Um(s){return Ah(s)[kt.PluralCase]}function Vm(s){return s in Bc||(Bc[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),Bc[s]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const jc="en-US";let jm=jc;function ew(s,a,u,c,d){if(s=te(s),Array.isArray(s))for(let g=0;g<s.length;g++)ew(s[g],a,u,c,d);else{const g=Vt(),y=ge();let C=_u(s)?s:te(s.provide),T=Vy(s);const A=Yn(),M=1048575&A.providerIndexes,$=A.directiveStart,X=A.providerIndexes>>20;if(_u(s)||!s.multi){const Q=new Cs(T,d,gh),Ie=xa(C,a,d?M:M+X,$);-1===Ie?(qs(uc(A,y),g,C),tw(g,s,a.length),a.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(Q),y.push(Q)):(u[Ie]=Q,y[Ie]=Q)}else{const Q=xa(C,a,M+X,$),Ie=xa(C,a,M,M+X),Je=Ie>=0&&u[Ie];if(d&&!Je||!d&&!(Q>=0&&u[Q])){qs(uc(A,y),g,C);const mt=function Fh(s,a,u,c,d){const g=new Cs(s,u,gh);return g.multi=[],g.index=a,g.componentProviders=0,Oh(g,d,c&&!u),g}(d?yC:_C,u.length,d,c,T);!d&&Je&&(u[Ie].providerFactory=mt),tw(g,s,a.length,0),a.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(mt),y.push(mt)}else tw(g,s,Q>-1?Q:Ie,Oh(u[d?Ie:Q],T,!d&&c));!d&&c&&Je&&u[Ie].componentProviders++}}}function tw(s,a,u,c){const d=_u(a),g=function Jg(s){return!!s.useClass}(a);if(d||g){const T=(g?te(a.useClass):a).prototype.ngOnDestroy;if(T){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&a.multi){const M=A.indexOf(u);-1===M?A.push(u,[c,T]):A[M+1].push(c,T)}else A.push(u,T)}}}function Oh(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function xa(s,a,u,c){for(let d=u;d<c;d++)if(a[d]===s)return d;return-1}function _C(s,a,u,c){return Qm(this.multi,[])}function yC(s,a,u,c){const d=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=Fn(u,u[et],this.providerFactory.index,c);g=C.slice(0,y),Qm(d,g);for(let T=y;T<C.length;T++)g.push(C[T])}else g=[],Qm(d,g);return g}function Qm(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function vC(s,a=[]){return u=>{u.providersResolver=(c,d)=>function hA(s,a,u){const c=Vt();if(c.firstCreatePass){const d=fi(s);ew(u,c.data,c.blueprint,d,!0),ew(a,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,a)}}class Lh{}class nw{}function fA(s,a){return new rw(s,a??null)}class rw extends Lh{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new MS(this);const c=vr(a);this._bootstrapComponents=va(c.bootstrap),this._r3Injector=Yy(a,u,[{provide:Lh,useValue:this},{provide:lh,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Vp extends nw{constructor(a){super(),this.moduleType=a}create(a){return new rw(this.moduleType,a)}}class iw extends Lh{constructor(a,u,c){super(),this.componentFactoryResolver=new MS(this),this.instance=null;const d=new IE([...a,{provide:Lh,useValue:this},{provide:lh,useValue:this.componentFactoryResolver}],u||tm(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Xm(s,a,u=null){return new iw(s,a,u).injector}let wC=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=oh(0,u.type),d=c.length>0?Xm([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=vt({token:s,providedIn:"environment",factory:()=>new s(Bt(Oc))}),s})();function Jm(s){s.getStandaloneInjector=a=>a.get(wC).getOrCreateStandaloneInjector(s)}function aw(s,a,u){const c=function Or(){const s=Lt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}()+s,d=ge();return d[c]===$t?function Ca(s,a,u){return s[a]=u}(d,c,u?a.call(u):a()):function Cl(s,a){return s[a]}(d,c)}function r_(s){return a=>{setTimeout(s,void 0,a)}}const Fo=class Wc extends f.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,c){let d=a,g=u||(()=>null),y=c;if(a&&"object"==typeof a){const T=a;d=T.next?.bind(T),g=T.error?.bind(T),y=T.complete?.bind(T)}this.__isAsync&&(g=r_(g),d&&(d=r_(d)),y&&(y=r_(y)));const C=super.subscribe({next:d,error:g,complete:y});return a instanceof G.w0&&a.add(C),C}};function OC(){return this._results[Symbol.iterator]()}class i_{get changes(){return this._changes||(this._changes=new Fo)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=i_.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=OC)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const c=this;c.dirty=!1;const d=function Ti(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function gc(s,a,u){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=a[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Rl=(()=>{class s{}return s.__NG_ELEMENT_ID__=LC,s})();const Rs=Rl,FC=class extends Rs{constructor(a,u,c){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(a,u){const c=this._declarationTContainer.tView,d=am(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,u||null);d[fo]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[bi];return null!==y&&(d[bi]=y.createEmbeddedView(c)),um(c,d,a),new fm(d)}};function LC(){return Tu(Yn(),ge())}function Tu(s,a){return 4&s.type?new FC(a,s,yu(s,a)):null}let s_=(()=>{class s{}return s.__NG_ELEMENT_ID__=Lo,s})();function Lo(){return Uo(Yn(),ge())}const fw=s_,Dn=class extends fw{constructor(a,u,c){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=c}get element(){return yu(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const a=Xn(this._hostTNode,this._hostLView);if(Co(a)){const u=eu(a,this._hostLView),c=ia(a);return new oa(u[et].data[c+8],u)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=UC(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Pr}createEmbeddedView(a,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const y=a.createEmbeddedView(u||{},g);return this.insert(y,d),y}createComponent(a,u,c,d,g){const y=a&&!function ll(s){return"function"==typeof s}(a);let C;if(y)C=u;else{const $=u||{};C=$.index,c=$.injector,d=$.projectableNodes,g=$.environmentInjector||$.ngModuleRef}const T=y?a:new pm(wt(a)),A=c||this.parentInjector;if(!g&&null==T.ngModule){const X=(y?A:this.parentInjector).get(Oc,null);X&&(g=X)}const M=T.create(A,d,void 0,g);return this.insert(M.hostView,C),M}insert(a,u){const c=a._lView,d=c[et];if(function yd(s){return Zi(s[An])}(c)){const M=this.indexOf(a);if(-1!==M)this.detach(M);else{const $=c[An],X=new Dn($,$[Er],$[An]);X.detach(X.indexOf(a))}}const g=this._adjustIndex(u),y=this._lContainer;!function p(s,a,u,c){const d=Pr+c,g=u.length;c>0&&(u[d-1][gn]=a),c<g-Pr?(a[gn]=u[d],mc(u,Pr+c,a)):(u.push(a),a[gn]=null),a[An]=u;const y=a[fo];null!==y&&u!==y&&function _(s,a){const u=s[go];a[cr]!==a[An][An][cr]&&(s[ja]=!0),null===u?s[go]=[a]:u.push(a)}(y,a);const C=a[bi];null!==C&&C.insertView(s),a[Yt]|=64}(d,c,y,g);const C=ma(g,y),T=c[Ht],A=Ss(T,y[Wo]);return null!==A&&function vy(s,a,u,c,d,g){c[wr]=d,c[Er]=a,Kf(s,c,u,1,d,g)}(d,y[Er],T,c,A,C),a.attachToViewContainerRef(),mc(Wp(y),g,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=UC(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),c=x(this._lContainer,u);c&&(iu(Wp(this._lContainer),u),k(c[et],c))}detach(a){const u=this._adjustIndex(a,-1),c=x(this._lContainer,u);return c&&null!=iu(Wp(this._lContainer),u)?new fm(c):null}_adjustIndex(a,u=0){return a??this.length+u}};function UC(s){return s[Vs]}function Wp(s){return s[Vs]||(s[Vs]=[])}function Uo(s,a){let u;const c=a[s.index];if(Zi(c))u=c;else{let d;if(8&s.type)d=dr(c);else{const g=a[Ht];d=g.createComment("");const y=kr(s,a);Gt(g,Ss(g,y),d,function Wf(s,a){return s.nextSibling(a)}(g,y),!1)}a[s.index]=u=TS(c,a,d,s),iv(a,u)}return new Dn(u,s,a)}class o_{constructor(a){this.queryList=a,this.matches=null}clone(){return new o_(this.queryList)}setDirty(){this.queryList.setDirty()}}class qp{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const c=null!==a.contentQueries?a.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const y=u.getByIndex(g);d.push(this.queries[y.indexInDeclarationView].clone())}return new qp(d)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==pw(a,u).matches&&this.queries[u].setDirty()}}class qc{constructor(a,u,c=null){this.predicate=a,this.flags=u,this.read=c}}class Kp{constructor(a=[]){this.queries=a}elementStart(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(a,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Kp(u):null}template(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class a_{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new a_(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(a,u,Su(u,g)),this.matchTNodeWithReadOption(a,u,sa(u,a,g,!1,!1))}else c===Rl?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,sa(u,a,c,!1,!1))}matchTNodeWithReadOption(a,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ch||d===s_||d===Rl&&4&u.type)this.addMatch(u.index,-2);else{const g=sa(u,a,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function Su(s,a){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===a)return u[c+1];return null}function Ni(s,a,u,c){return-1===u?function io(s,a){return 11&s.type?yu(s,a):4&s.type?Tu(s,a):null}(a,s):-2===u?function u_(s,a,u){return u===ch?yu(a,s):u===Rl?Tu(a,s):u===s_?Uo(a,s):void 0}(s,a,c):Fn(s,s[et],u,a)}function Zp(s,a,u,c){const d=a[bi].queries[c];if(null===d.matches){const g=s.data,y=u.matches,C=[];for(let T=0;T<y.length;T+=2){const A=y[T];C.push(A<0?null:Ni(a,g[A],y[T+1],u.metadata.read))}d.matches=C}return d.matches}function Kc(s,a,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const y=Zp(s,a,d,u);for(let C=0;C<g.length;C+=2){const T=g[C];if(T>0)c.push(y[C/2]);else{const A=g[C+1],M=a[-T];for(let $=Pr;$<M.length;$++){const X=M[$];X[fo]===X[An]&&Kc(X[et],X,A,c)}if(null!==M[go]){const $=M[go];for(let X=0;X<$.length;X++){const Q=$[X];Kc(Q[et],Q,A,c)}}}}}return c}function Yp(s){const a=ge(),u=Vt(),c=Za();Td(c+1);const d=pw(u,c);if(s.dirty&&function Wa(s){return 4==(4&s[Yt])}(a)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Kc(u,a,c,[]):Zp(u,a,d,c);s.reset(g,sp),s.notifyOnChanges()}return!0}return!1}function Zc(s,a,u,c){const d=Vt();if(d.firstCreatePass){const g=Yn();(function jC(s,a,u){null===s.queries&&(s.queries=new Kp),s.queries.track(new a_(a,u))})(d,new qc(a,u,c),g.index),function vA(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function l_(s,a,u){const c=new i_(4==(4&u));dm(s,a,c,c.destroy),null===a[bi]&&(a[bi]=new qp),a[bi].queries.push(new o_(c))}(d,ge(),u)}function BC(){return function yA(s,a){return s[bi].queries[a].queryList}(ge(),Za())}function pw(s,a){return s.queries.getByIndex(a)}function Ma(s){return!!vr(s)}function c_(...s){}const Au=new on("Application Initializer");let h_=(()=>{class s{constructor(u){this.appInits=u,this.resolve=c_,this.reject=c_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(vp(g))u.push(g);else if(Cm(g)){const y=new Promise((C,T)=>{g.subscribe({complete:C,error:T})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Bt(Au,8))},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Ml=new on("AppId",{providedIn:"root",factory:function ww(){return`${Ew()}${Ew()}${Ew()}`}});function Ew(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JC=new on("Platform Initializer"),xs=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let eD=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const g_=new on("LocaleId",{providedIn:"root",factory:()=>kn(g_,gt.Optional|gt.SkipSelf)||function Hi(){return typeof $localize<"u"&&$localize.locale||jc}()}),tD=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nD{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let MA=(()=>{class s{compileModuleSync(u){return new Vp(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=va(vr(u).declarations).reduce((y,C)=>{const T=wt(C);return T&&y.push(new pm(T)),y},[]);return new nD(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const kA=(()=>Promise.resolve(0))();function Cw(s){typeof Zone>"u"?kA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class oo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function OA(){let s=an.requestAnimationFrame,a=an.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function LA(s){const a=()=>{!function sD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,m_(s),s.isCheckStableRunning=!0,Dw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),m_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,y,C)=>{try{return bw(s),u.invokeTask(d,g,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),oD(s)}},onInvoke:(u,c,d,g,y,C,T)=>{try{return bw(s),u.invoke(d,g,y,C,T)}finally{s.shouldCoalesceRunChangeDetection&&a(),oD(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,m_(s),Dw(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oo.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(oo.isInAngularZone())throw new _e(909,!1)}run(a,u,c){return this._inner.run(a,u,c)}runTask(a,u,c,d){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+d,a,FA,c_,c_);try{return g.runTask(y,u,c)}finally{g.cancelTask(y)}}runGuarded(a,u,c){return this._inner.runGuarded(a,u,c)}runOutsideAngular(a){return this._outer.run(a)}}const FA={};function Dw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function m_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function bw(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function oD(s){s._nesting--,Dw(s)}class Tw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(a,u,c){return a.apply(u,c)}runGuarded(a,u,c){return a.apply(u,c)}runOutsideAngular(a){return a()}runTask(a,u,c,d){return a.apply(u,c)}}const oi=new on(""),Sw=new on("");let zh,Nl=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zh||(function Hn(s){zh=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oo.assertNotInAngularZone(),Cw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Bt(oo),Bt(Aw),Bt(Sw))},s.\u0275prov=vt({token:s,factory:s.\u0275fac}),s})(),Aw=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return zh?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const er=!1;let vn=null;const Rw=new on("AllowMultipleToken"),Pl=new on("PlatformDestroyListeners"),rs=new on("appBootstrapListener");class UA{constructor(a,u){this.name=a,this.token=u}}function tg(s,a,u=[]){const c=`Platform: ${a}`,d=new on(c);return(g=[])=>{let y=ka();if(!y||y.injector.get(Rw,!1)){const C=[...u,...g,{provide:d,useValue:!0}];s?s(C):function kl(s){if(vn&&!vn.get(Rw,!1))throw new _e(400,!1);vn=s;const a=s.get(rg);(function Pa(s){const a=s.get(JC,null);a&&a.forEach(u=>u())})(s)}(function uD(s=[],a){return hh.create({name:a,providers:[{provide:El,useValue:"platform"},{provide:Pl,useValue:new Set([()=>vn=null])},...s]})}(C,c))}return function ng(s){const a=ka();if(!a)throw new _e(401,!1);return a}()}}function ka(){return vn?.get(rg)??null}let rg=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function Bo(s,a){let u;return u="noop"===s?new Tw:("zone.js"===s?void 0:s)||new oo(a),u}(c?.ngZone,function xu(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:oo,useValue:d}];return d.run(()=>{const y=hh.create({providers:g,parent:this.injector,name:u.moduleType.name}),C=u.create(y),T=C.injector.get(op,null);if(!T)throw new _e(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:M=>{T.handleError(M)}});C.onDestroy(()=>{Nu(this._modules,C),A.unsubscribe()})}),function qh(s,a,u){try{const c=u();return vp(c)?c.catch(d=>{throw a.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(T,d,()=>{const A=C.injector.get(h_);return A.runInitializers(),A.donePromise.then(()=>(function si(s){Ue(s,"Expected localeId to be defined"),"string"==typeof s&&(jm=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(g_,jc)||jc),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,c=[]){const d=Mu({},c);return function aD(s,a,u){const c=new Vp(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(ig);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new _e(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Pl,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Bt(hh))},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Mu(s,a){return Array.isArray(a)?a.reduce(Mu,s):{...s,...a}}let ig=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new O.y(C=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{oo.assertNotInAngularZone(),Cw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{oo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{T.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ne.T)(g,y.pipe((0,oe.B)()))}bootstrap(u,c){const d=u instanceof DE;if(!this._injector.get(h_).done){!d&&zr(u);throw new _e(405,er)}let y;y=d?u:this._injector.get(lh).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const C=function ai(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Lh),A=y.create(hh.NULL,[],c||y.selector,C),M=A.location.nativeElement,$=A.injector.get(oi,null);return $?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),Nu(this.components,A),$?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Nu(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(rs,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Nu(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new _e(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Bt(oo),Bt(Oc),Bt(op))},s.\u0275prov=vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Nu(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}function Jc(){return!1}let w_=(()=>{class s{}return s.__NG_ELEMENT_ID__=sg,s})();function sg(s){return function cD(s,a,u){if(Hu(s)&&!u){const c=Ir(s.index,a);return new fm(c,c)}return 47&s.type?new fm(a[cr],a):null}(Yn(),ge(),16==(16&s))}class Pw{constructor(){}supports(a){return lv(a)}create(a){return new WA(a)}}const zA=(s,a)=>a;class WA{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||zA}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const y=!c||u&&u.currentIndex<kw(c,d,g)?u:c,C=kw(y,d,g),T=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{g||(g=[]);const A=C-d,M=T-d;if(A!=M){for(let X=0;X<A;X++){const Q=X<g.length?g[X]:g[X]=0,Ie=Q+X;M<=Ie&&Ie<A&&(g[X]=Q+1)}g[y.previousIndex]=M-A}}C!==T&&a(y,C,T)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!lv(a))throw new _e(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d,g,y,u=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)g=a[C],y=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,g,y,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,y,C),c=!0),u=u._next}else d=0,function uI(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)a(c.value)}}(a,C=>{y=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,C,y,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,c,d){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,g,d)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,g,d)):a=this._addAfter(new qA(u,c),g,d),a}_verifyReinsertion(a,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?a=this._reinsertAfter(g,a._prev,d):a.currentIndex!=d&&(a.currentIndex=d,this._addToMoves(a,d)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const d=a._prevRemoved,g=a._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(a,u,c),this._addToMoves(a,c),a}_moveAfter(a,u,c){return this._unlink(a),this._insertAfter(a,u,c),this._addToMoves(a,c),a}_addAfter(a,u,c){return this._insertAfter(a,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,c){const d=null===u?this._itHead:u._next;return a._next=d,a._prev=u,null===d?this._itTail=a:d._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new mD),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,c=a._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mD),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class qA{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gD{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const u=a._prevDup,c=a._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class mD{constructor(){this.map=new Map}put(a){const u=a.trackById;let c=this.map.get(u);c||(c=new gD,this.map.set(u,c)),c.add(a)}get(a,u){const d=this.map.get(a);return d?d.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kw(s,a,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+a+d}class _D{constructor(){}supports(a){return a instanceof Map||dv(a)}create(){return new KA}}class KA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||dv(a)))throw new _e(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const c=a._prev;return u._next=a,u._prev=c,a._prev=u,c&&(c._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const d=this._records.get(a);this._maybeAddToChanges(d,u);const g=d._prev,y=d._next;return g&&(g._next=y),y&&(y._prev=g),d._next=null,d._prev=null,d}const c=new ZA(a);return this._records.set(a,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(c=>u(a[c],c))}}class ZA{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function I_(){return new Pu([new Pw])}let Pu=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||I_()),deps:[[s,new Mt,new Ao]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new _e(901,!1)}}return s.\u0275prov=vt({token:s,providedIn:"root",factory:I_}),s})();function ag(){return new Zh([new _D])}let Zh=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ag()),deps:[[s,new Mt,new Ao]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new _e(901,!1)}}return s.\u0275prov=vt({token:s,providedIn:"root",factory:ag}),s})();const Yh=tg(null,"core",[]);let wD=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Bt(ig))},s.\u0275mod=re({type:s}),s.\u0275inj=hn({}),s})();function Ow(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(It,Se,B)=>{B.d(Se,{Z:()=>Ke});var f=B(2090),G=B(4859),O=B(6881),ne=B(1877);class oe{constructor(_e,Ae){this._delegate=_e,this.firebase=Ae,(0,O._addComponent)(_e,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(_e,Ae=O._DEFAULT_ENTRY_NAME){var ke;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(_e);return!Be.isInitialized()&&"EXPLICIT"===(null===(ke=Be.getComponent())||void 0===ke?void 0:ke.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:Ae})}_removeServiceInstance(_e,Ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Ae)}_addComponent(_e){(0,O._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,O._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ve(){const at=function me(at){const _e={},Ae={__esModule:!0,initializeApp:function De(Oe,se={}){const tt=O.initializeApp(Oe,se);if((0,f.r3)(_e,tt.name))return _e[tt.name];const St=new at(tt,Ae);return _e[tt.name]=St,St},app:Be,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Me(Oe){const se=Oe.name,tt=se.replace("-compat","");if(O._registerComponent(Oe)&&"PUBLIC"===Oe.type){const St=(it=Be())=>{if("function"!=typeof it[tt])throw we.create("invalid-app-argument",{appName:se});return it[tt]()};void 0!==Oe.serviceProps&&(0,f.ZB)(St,Oe.serviceProps),Ae[tt]=St,at.prototype[tt]=function(...it){return this._getService.bind(this,se).apply(this,Oe.multipleInstances?it:[])}}return"PUBLIC"===Oe.type?Ae[tt]:null},removeApp:function ke(Oe){delete _e[Oe]},useAsService:function $e(Oe,se){return"serverAuth"===se?null:se},modularAPIs:O}};function Be(Oe){if(!(0,f.r3)(_e,Oe=Oe||O._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Oe});return _e[Oe]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Ce(){return Object.keys(_e).map(Oe=>_e[Oe])}}),Be.App=at,Ae}(oe);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function _e(Ae){(0,f.ZB)(at,Ae)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),at}(),q=new ne.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=K;!function Te(at){(0,O.registerVersion)("@firebase/app-compat","0.2.10",at)}()},6881:(It,Se,B)=>{B.r(Se),B.d(Se,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Di,_DEFAULT_ENTRY_NAME:()=>Hr,_addComponent:()=>ht,_addOrOverwriteComponent:()=>Ut,_apps:()=>an,_clearComponents:()=>Qr,_components:()=>qt,_getProvider:()=>Mr,_registerComponent:()=>qn,_removeServiceInstance:()=>Pn,deleteApp:()=>Kn,getApp:()=>hi,getApps:()=>Bt,initializeApp:()=>Jt,onLog:()=>Zn,registerVersion:()=>Nr,setLogLevel:()=>Xr});var f=B(5861),G=B(4859),O=B(1877),ne=B(2090);const oe=(pe,re)=>re.some(Fe=>pe instanceof Fe);let ae,we;const K=new WeakMap,q=new WeakMap,te=new WeakMap,je=new WeakMap,Te=new WeakMap;let _e={get(pe,re,Fe){if(pe instanceof IDBTransaction){if("done"===re)return q.get(pe);if("objectStoreNames"===re)return pe.objectStoreNames||te.get(pe);if("store"===re)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return De(pe[re])},set:(pe,re,Fe)=>(pe[re]=Fe,!0),has:(pe,re)=>pe instanceof IDBTransaction&&("done"===re||"store"===re)||re in pe};function Be(pe){return"function"==typeof pe?function ke(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...re){return pe.apply(Ce(this),re),De(K.get(this))}:function(...re){return De(pe.apply(Ce(this),re))}:function(re,...Fe){const yt=pe.call(Ce(this),re,...Fe);return te.set(yt,re.sort?re.sort():[re]),De(yt)}}(pe):(pe instanceof IDBTransaction&&function at(pe){if(q.has(pe))return;const re=new Promise((Fe,yt)=>{const xt=()=>{pe.removeEventListener("complete",en),pe.removeEventListener("error",wt),pe.removeEventListener("abort",wt)},en=()=>{Fe(),xt()},wt=()=>{yt(pe.error||new DOMException("AbortError","AbortError")),xt()};pe.addEventListener("complete",en),pe.addEventListener("error",wt),pe.addEventListener("abort",wt)});q.set(pe,re)}(pe),oe(pe,function me(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,_e):pe)}function De(pe){if(pe instanceof IDBRequest)return function Ke(pe){const re=new Promise((Fe,yt)=>{const xt=()=>{pe.removeEventListener("success",en),pe.removeEventListener("error",wt)},en=()=>{Fe(De(pe.result)),xt()},wt=()=>{yt(pe.error),xt()};pe.addEventListener("success",en),pe.addEventListener("error",wt)});return re.then(Fe=>{Fe instanceof IDBCursor&&K.set(Fe,pe)}).catch(()=>{}),Te.set(re,pe),re}(pe);if(je.has(pe))return je.get(pe);const re=Be(pe);return re!==pe&&(je.set(pe,re),Te.set(re,pe)),re}const Ce=pe=>Te.get(pe),Oe=["get","getKey","getAll","getAllKeys","count"],se=["put","add","delete","clear"],tt=new Map;function St(pe,re){if(!(pe instanceof IDBDatabase)||re in pe||"string"!=typeof re)return;if(tt.get(re))return tt.get(re);const Fe=re.replace(/FromIndex$/,""),yt=re!==Fe,xt=se.includes(Fe);if(!(Fe in(yt?IDBIndex:IDBObjectStore).prototype)||!xt&&!Oe.includes(Fe))return;const en=function(){var wt=(0,f.Z)(function*(pn,...sn){const zr=this.transaction(pn,xt?"readwrite":"readonly");let vr=zr.store;return yt&&(vr=vr.index(sn.shift())),(yield Promise.all([vr[Fe](...sn),xt&&zr.done]))[0]});return function(sn){return wt.apply(this,arguments)}}();return tt.set(re,en),en}!function Ae(pe){_e=pe(_e)}(pe=>({...pe,get:(re,Fe,yt)=>St(re,Fe)||pe.get(re,Fe,yt),has:(re,Fe)=>!!St(re,Fe)||pe.has(re,Fe)}));class it{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function Wt(pe){return"VERSION"===pe.getComponent()?.type}(Fe)){const yt=Fe.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Fe=>Fe).join(" ")}}const dt="@firebase/app",he=new O.Yd("@firebase/app"),Hr="[DEFAULT]",Yr={[dt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,qt=new Map;function ht(pe,re){try{pe.container.addComponent(re)}catch(Fe){he.debug(`Component ${re.name} failed to register with FirebaseApp ${pe.name}`,Fe)}}function Ut(pe,re){pe.container.addOrOverwriteComponent(re)}function qn(pe){const re=pe.name;if(qt.has(re))return he.debug(`There were multiple attempts to register component ${re}.`),!1;qt.set(re,pe);for(const Fe of an.values())ht(Fe,pe);return!0}function Mr(pe,re){const Fe=pe.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),pe.container.getProvider(re)}function Pn(pe,re,Fe=Hr){Mr(pe,re).clearInstance(Fe)}function Qr(){qt.clear()}const lr=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kt{constructor(re,Fe,yt){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const Di="9.22.0";function Jt(pe,re={}){let Fe=pe;"object"!=typeof re&&(re={name:re});const yt=Object.assign({name:Hr,automaticDataCollectionEnabled:!1},re),xt=yt.name;if("string"!=typeof xt||!xt)throw lr.create("bad-app-name",{appName:String(xt)});if(Fe||(Fe=(0,ne.aH)()),!Fe)throw lr.create("no-options");const en=an.get(xt);if(en){if((0,ne.vZ)(Fe,en.options)&&(0,ne.vZ)(yt,en.config))return en;throw lr.create("duplicate-app",{appName:xt})}const wt=new G.H0(xt);for(const sn of qt.values())wt.addComponent(sn);const pn=new Kt(Fe,yt,wt);return an.set(xt,pn),pn}function hi(pe=Hr){const re=an.get(pe);if(!re&&pe===Hr&&(0,ne.aH)())return Jt();if(!re)throw lr.create("no-app",{appName:pe});return re}function Bt(){return Array.from(an.values())}function Kn(pe){return kn.apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(pe){const re=pe.name;an.has(re)&&(an.delete(re),yield Promise.all(pe.container.getProviders().map(Fe=>Fe.delete())),pe.isDeleted=!0)})).apply(this,arguments)}function Nr(pe,re,Fe){var yt;let xt=null!==(yt=Yr[pe])&&void 0!==yt?yt:pe;Fe&&(xt+=`-${Fe}`);const en=xt.match(/\s|\//),wt=re.match(/\s|\//);if(en||wt){const pn=[`Unable to register library "${xt}" with version "${re}":`];return en&&pn.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),en&&wt&&pn.push("and"),wt&&pn.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void he.warn(pn.join(" "))}qn(new G.wA(`${xt}-version`,()=>({library:xt,version:re}),"VERSION"))}function Zn(pe,re){if(null!==pe&&"function"!=typeof pe)throw lr.create("invalid-log-argument");(0,O.Am)(pe,re)}function Xr(pe){(0,O.Ub)(pe)}const Gr="firebase-heartbeat-database",Jr=1,z="firebase-heartbeat-store";let H=null;function F(){return H||(H=function Me(pe,re,{blocked:Fe,upgrade:yt,blocking:xt,terminated:en}={}){const wt=indexedDB.open(pe,re),pn=De(wt);return yt&&wt.addEventListener("upgradeneeded",sn=>{yt(De(wt.result),sn.oldVersion,sn.newVersion,De(wt.transaction),sn)}),Fe&&wt.addEventListener("blocked",sn=>Fe(sn.oldVersion,sn.newVersion,sn)),pn.then(sn=>{en&&sn.addEventListener("close",()=>en()),xt&&sn.addEventListener("versionchange",zr=>xt(zr.oldVersion,zr.newVersion,zr))}).catch(()=>{}),pn}(Gr,Jr,{upgrade:(pe,re)=>{0===re&&pe.createObjectStore(z)}}).catch(pe=>{throw lr.create("idb-open",{originalErrorMessage:pe.message})})),H}function N(){return(N=(0,f.Z)(function*(pe){try{return yield(yield F()).transaction(z).objectStore(z).get(nt(pe))}catch(re){if(re instanceof ne.ZR)he.warn(re.message);else{const Fe=lr.create("idb-get",{originalErrorMessage:re?.message});he.warn(Fe.message)}}})).apply(this,arguments)}function Y(pe,re){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,f.Z)(function*(pe,re){try{const yt=(yield F()).transaction(z,"readwrite");yield yt.objectStore(z).put(re,nt(pe)),yield yt.done}catch(Fe){if(Fe instanceof ne.ZR)he.warn(Fe.message);else{const yt=lr.create("idb-set",{originalErrorMessage:Fe?.message});he.warn(yt.message)}}})).apply(this,arguments)}function nt(pe){return`${pe.name}!${pe.options.appId}`}class Zt{constructor(re){this.container=re,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new jt(Fe),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var re=this;return(0,f.Z)(function*(){const yt=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=Pt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==xt&&!re._heartbeatsCache.heartbeats.some(en=>en.date===xt))return re._heartbeatsCache.heartbeats.push({date:xt,agent:yt}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(en=>{const wt=new Date(en.date).valueOf();return Date.now()-wt<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,f.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Fe=Pt(),{heartbeatsToSend:yt,unsentEntries:xt}=function Cn(pe,re=1024){const Fe=[];let yt=pe.slice();for(const xt of pe){const en=Fe.find(wt=>wt.agent===xt.agent);if(en){if(en.dates.push(xt.date),yr(Fe)>re){en.dates.pop();break}}else if(Fe.push({agent:xt.agent,dates:[xt.date]}),yr(Fe)>re){Fe.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:yt}}(re._heartbeatsCache.heartbeats),en=(0,ne.L)(JSON.stringify({version:2,heartbeats:yt}));return re._heartbeatsCache.lastSentHeartbeatDate=Fe,xt.length>0?(re._heartbeatsCache.heartbeats=xt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),en})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class jt{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,f.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function L(pe){return N.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Fe=this;return(0,f.Z)(function*(){var yt;if(yield Fe._canUseIndexedDBPromise){const en=yield Fe.read();return Y(Fe.app,{lastSentHeartbeatDate:null!==(yt=re.lastSentHeartbeatDate)&&void 0!==yt?yt:en.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Fe=this;return(0,f.Z)(function*(){var yt;if(yield Fe._canUseIndexedDBPromise){const en=yield Fe.read();return Y(Fe.app,{lastSentHeartbeatDate:null!==(yt=re.lastSentHeartbeatDate)&&void 0!==yt?yt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...re.heartbeats]})}})()}}function yr(pe){return(0,ne.L)(JSON.stringify({version:2,heartbeats:pe})).length}!function vs(pe){qn(new G.wA("platform-logger",re=>new it(re),"PRIVATE")),qn(new G.wA("heartbeat",re=>new Zt(re),"PRIVATE")),Nr(dt,"0.9.10",pe),Nr(dt,"0.9.10","esm2017"),Nr("fire-js","")}("")},4859:(It,Se,B)=>{B.d(Se,{H0:()=>me,wA:()=>O,zt:()=>oe});var f=B(5861),G=B(2090);class O{constructor(K,q,te){this.name=K,this.instanceFactory=q,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ne="[DEFAULT]";class oe{constructor(K,q){this.name=K,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const q=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(q)){const te=new G.BH;if(this.instancesDeferred.set(q,te),this.isInitialized(q)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:q});je&&te.resolve(je)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(K){var q;const te=this.normalizeInstanceIdentifier(K?.identifier),je=null!==(q=K?.optional)&&void 0!==q&&q;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Te){if(je)return null;throw Te}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function we(ve){return"EAGER"===ve.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[q,te]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(q);try{const Te=this.getOrInitializeService({instanceIdentifier:je});te.resolve(Te)}catch{}}}}clearInstance(K=ne){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,f.Z)(function*(){const q=Array.from(K.instances.values());yield Promise.all([...q.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...q.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ne){return this.instances.has(K)}getOptions(K=ne){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:q={}}=K,te=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:te,options:q});for(const[Te,Ke]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Te)&&Ke.resolve(je);return je}onInit(K,q){var te;const je=this.normalizeInstanceIdentifier(q),Te=null!==(te=this.onInitCallbacks.get(je))&&void 0!==te?te:new Set;Te.add(K),this.onInitCallbacks.set(je,Te);const Ke=this.instances.get(je);return Ke&&K(Ke,je),()=>{Te.delete(K)}}invokeOnInitCallbacks(K,q){const te=this.onInitCallbacks.get(q);if(te)for(const je of te)try{je(K,q)}catch{}}getOrInitializeService({instanceIdentifier:K,options:q={}}){let te=this.instances.get(K);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=K,ve===ne?void 0:ve),options:q}),this.instances.set(K,te),this.instancesOptions.set(K,q),this.invokeOnInitCallbacks(te,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,te)}catch{}var ve;return te||null}normalizeInstanceIdentifier(K=ne){return this.component?this.component.multipleInstances?K:ne:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const q=this.getProvider(K.name);if(q.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);q.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const q=new oe(K,this);return this.providers.set(K,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(It,Se,B)=>{B.d(Se,{Am:()=>ve,Ub:()=>me,Yd:()=>we,in:()=>G});const f=[];var G=(()=>{return(K=G||(G={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",G;var K})();const O={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ne=G.INFO,oe={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ae=(K,q,...te)=>{if(q<K.logLevel)return;const je=(new Date).toISOString(),Te=oe[q];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Te](`[${je}]  ${K.name}:`,...te)};class we{constructor(q){this.name=q,this._logLevel=ne,this._logHandler=ae,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in G))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?O[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...q),this._logHandler(this,G.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...q),this._logHandler(this,G.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...q),this._logHandler(this,G.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...q),this._logHandler(this,G.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...q),this._logHandler(this,G.ERROR,...q)}}function me(K){f.forEach(q=>{q.setLogLevel(K)})}function ve(K,q){for(const te of f){let je=null;q&&q.level&&(je=O[q.level]),te.userLogHandler=null===K?null:(Te,Ke,...at)=>{const _e=at.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch{return null}}).filter(Ae=>Ae).join(" ");Ke>=(je??Te.logLevel)&&K({level:G[Ke].toLowerCase(),message:_e,args:at,type:Te.name})}}}},259:(It,Se,B)=>{B.d(Se,{C6:()=>f.getApps,KN:()=>f.registerVersion,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=B(6881);(0,f.registerVersion)("firebase","9.22.0","app")},9260:(It,Se,B)=>{B.d(Se,{Z:()=>f.Z});var f=B(3942);f.Z.registerVersion("firebase","9.22.0","app-compat")},9568:(It,Se,B)=>{B.r(Se);var f=B(5861),G=B(3942),O=B(1389),ne=B(2090),we=(B(6881),B(1877),B(4859));function me(){return window}const ve=2e3;function q(){return q=(0,f.Z)(function*(F,L,N){var Y;const{BuildInfo:Ee}=me();(0,O.as)(L.sessionId,"AuthEvent did not contain a session ID");const nt=yield function Ae(F){return ke.apply(this,arguments)}(L.sessionId),Rt={};return(0,O.at)()?Rt.ibi=Ee.packageName:(0,O.au)()?Rt.apn=Ee.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),Ee.displayName&&(Rt.appDisplayName=Ee.displayName),Rt.sessionId=nt,(0,O.aw)(F,N,L.type,void 0,null!==(Y=L.eventId)&&void 0!==Y?Y:void 0,Rt)}),q.apply(this,arguments)}function je(){return(je=(0,f.Z)(function*(F){const{BuildInfo:L}=me(),N={};(0,O.at)()?N.iosBundleId=L.packageName:(0,O.au)()?N.androidPackageName=L.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),yield(0,O.ax)(F,N)})).apply(this,arguments)}function at(){return(at=(0,f.Z)(function*(F,L,N){const{cordova:Y}=me();let Ee=()=>{};try{yield new Promise((nt,Rt)=>{let Tt=null;function Zt(){var jt;nt();const yr=null===(jt=Y.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof yr&&yr(),"function"==typeof N?.close&&N.close()}function Pt(){Tt||(Tt=window.setTimeout(()=>{Rt((0,O.az)(F,"redirect-cancelled-by-user"))},ve))}function Cn(){"visible"===document?.visibilityState&&Pt()}L.addPassiveListener(Zt),document.addEventListener("resume",Pt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",Cn,!1),Ee=()=>{L.removePassiveListener(Zt),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",Cn,!1),Tt&&window.clearTimeout(Tt)}})}finally{Ee()}})).apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(F){const L=function Be(F){if((0,O.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const L=new ArrayBuffer(F.length),N=new Uint8Array(L);for(let Y=0;Y<F.length;Y++)N[Y]=F.charCodeAt(Y);return N}(F),N=yield crypto.subtle.digest("SHA-256",L);return Array.from(new Uint8Array(N)).map(Ee=>Ee.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const De=20;class Ce extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(L=>{this.resolveInialized=L})}addPassiveListener(L){this.passiveListeners.add(L)}removePassiveListener(L){this.passiveListeners.delete(L)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(L){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(L)),super.onEvent(L)}initialized(){var L=this;return(0,f.Z)(function*(){yield L.initPromise})()}}function Oe(F){return se.apply(this,arguments)}function se(){return(se=(0,f.Z)(function*(F){const L=yield it()._get(Wt(F));return L&&(yield it()._remove(Wt(F))),L})).apply(this,arguments)}function St(){const F=[],L="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<De;N++){const Y=Math.floor(Math.random()*L.length);F.push(L.charAt(Y))}return F.join("")}function it(){return(0,O.aC)(O.b)}function Wt(F){return(0,O.aD)("authEvent",F.config.apiKey,F.name)}function he(F){if(!F?.includes("?"))return{};const[L,...N]=F.split("?");return(0,ne.zd)(N.join("?"))}const Re=class be{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(L){var N=this;return(0,f.Z)(function*(){const Y=L._key();let Ee=N.eventManagers.get(Y);return Ee||(Ee=new Ce(L),N.eventManagers.set(Y,Ee),N.attachCallbackListeners(L,Ee)),Ee})()}_openPopup(L){(0,O.av)(L,"operation-not-supported-in-this-environment")}_openRedirect(L,N,Y,Ee){var nt=this;return(0,f.Z)(function*(){!function _e(F){var L,N,Y,Ee,nt,Rt,Tt,Zt,Pt,Cn;const jt=me();(0,O.aA)("function"==typeof(null===(L=jt?.universalLinks)||void 0===L?void 0:L.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(N=jt?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(nt=null===(Ee=null===(Y=jt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===nt?void 0:nt.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Zt=null===(Tt=null===(Rt=jt?.cordova)||void 0===Rt?void 0:Rt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===Zt?void 0:Zt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Cn=null===(Pt=jt?.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===Cn?void 0:Cn.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(L);const Rt=yield nt._initialize(L);yield Rt.initialized(),Rt.resetRedirect(),(0,O.aG)(),yield nt._originValidation(L);const Tt=function Me(F,L,N=null){return{type:L,eventId:N,urlResponse:null,sessionId:St(),postBody:null,tenantId:F.tenantId,error:(0,O.az)(F,"no-auth-event")}}(L,Y,Ee);yield function $e(F,L){return it()._set(Wt(F),L)}(L,Tt);const Zt=yield function K(F,L,N){return q.apply(this,arguments)}(L,Tt,N),Pt=yield function Te(F){const{cordova:L}=me();return new Promise(N=>{L.plugins.browsertab.isAvailable(Y=>{let Ee=null;Y?L.plugins.browsertab.openUrl(F):Ee=L.InAppBrowser.open(F,(0,O.ay)()?"_blank":"_system","location=yes"),N(Ee)})})}(Zt);return function Ke(F,L,N){return at.apply(this,arguments)}(L,Rt,Pt)})()}_isIframeWebStorageSupported(L,N){throw new Error("Method not implemented.")}_originValidation(L){const N=L._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function te(F){return je.apply(this,arguments)}(L)),this.originValidationPromises[N]}attachCallbackListeners(L,N){const{universalLinks:Y,handleOpenURL:Ee,BuildInfo:nt}=me(),Rt=setTimeout((0,f.Z)(function*(){yield Oe(L),N.onEvent(ze())}),500),Tt=function(){var Cn=(0,f.Z)(function*(jt){clearTimeout(Rt);const yr=yield Oe(L);let vs=null;yr&&jt?.url&&(vs=function tt(F,L){var N,Y;const Ee=function Os(F){const L=he(F),N=L.link?decodeURIComponent(L.link):void 0,Y=he(N).link,Ee=L.deep_link_id?decodeURIComponent(L.deep_link_id):void 0;return he(Ee).link||Ee||Y||N||F}(L);if(Ee.includes("/__/auth/callback")){const nt=he(Ee),Rt=nt.firebaseError?function dt(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(nt.firebaseError)):null,Tt=null===(Y=null===(N=Rt?.code)||void 0===N?void 0:N.split("auth/"))||void 0===Y?void 0:Y[1],Zt=Tt?(0,O.az)(Tt):null;return Zt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:Ee,postBody:null}}return null}(yr,jt.url)),N.onEvent(vs||ze())});return function(yr){return Cn.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,Tt);const Zt=Ee,Pt=`${nt.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var Cn=(0,f.Z)(function*(jt){if(jt.toLowerCase().startsWith(Pt)&&Tt({url:jt}),"function"==typeof Zt)try{Zt(jt)}catch(yr){console.error(yr)}});return function(jt){return Cn.apply(this,arguments)}}()}};function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}const Tn=1e3;function ut(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function tn(F=(0,ne.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function xr(){try{const F=self.localStorage,L=O.aL();if(F)return F.setItem(L,"1"),F.removeItem(L),!function Gn(F=(0,ne.z$)()){return function In(){return(0,ne.w1)()&&11===document?.documentMode}()||function $r(F=(0,ne.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,ne.hl)()}catch{return zn()&&(0,ne.hl)()}return!1}function zn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function di(){return(function vt(){return"http:"===ut()||"https:"===ut()}()||(0,ne.ru)()||tn())&&!function hn(){return(0,ne.b$)()||(0,ne.UG)()}()&&xr()&&!zn()}function ki(){return tn()&&typeof document<"u"}function Ln(){return(Ln=(0,f.Z)(function*(){return!!ki()&&new Promise(F=>{const L=setTimeout(()=>{F(!1)},Tn);document.addEventListener("deviceready",()=>{clearTimeout(L),F(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},os=O.aA,Wn="persistence";function Yr(F){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(F){yield F._initializationPromise;const L=ht(),N=O.aD(Wn,F.config.apiKey,F.name);L&&L.setItem(N,F._getPersistence())})).apply(this,arguments)}function ht(){var F;try{return(null===(F=function gt(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const Ut=O.aA;class qn{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(Re),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(L){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(L)})()}_openPopup(L,N,Y,Ee){var nt=this;return(0,f.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openPopup(L,N,Y,Ee)})()}_openRedirect(L,N,Y,Ee){var nt=this;return(0,f.Z)(function*(){return yield nt.selectUnderlyingResolver(),nt.assertedUnderlyingResolver._openRedirect(L,N,Y,Ee)})()}_isIframeWebStorageSupported(L,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(L,N)}_originValidation(L){return this.assertedUnderlyingResolver._originValidation(L)}get _shouldInitProactively(){return ki()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var L=this;return(0,f.Z)(function*(){if(L.underlyingResolver)return;const N=yield function co(){return Ln.apply(this,arguments)}();L.underlyingResolver=N?L.cordovaResolver:L.browserResolver})()}}function Mr(F){return F.unwrap()}function Qr(F){return lr(F)}function lr(F){const{_tokenResponse:L}=F instanceof ne.ZR?F.customData:F;if(!L)return null;if(!(F instanceof ne.ZR)&&"temporaryProof"in L&&"phoneNumber"in L)return O.P.credentialFromResult(F);const N=L.providerId;if(!N||N===O.p.PASSWORD)return null;let Y;switch(N){case O.p.GOOGLE:Y=O.V;break;case O.p.FACEBOOK:Y=O.U;break;case O.p.GITHUB:Y=O.W;break;case O.p.TWITTER:Y=O.Z;break;default:const{oauthIdToken:Ee,oauthAccessToken:nt,oauthTokenSecret:Rt,pendingToken:Tt,nonce:Zt}=L;return nt||Rt||Ee||Tt?Tt?N.startsWith("saml.")?O.aO._create(N,Tt):O.L._fromParams({providerId:N,signInMethod:N,pendingToken:Tt,idToken:Ee,accessToken:nt}):new O.X(N).credential({idToken:Ee,accessToken:nt,rawNonce:Zt}):null}return F instanceof ne.ZR?Y.credentialFromError(F):Y.credentialFromResult(F)}function Kt(F,L){return L.catch(N=>{throw N instanceof ne.ZR&&function Vn(F,L){var N;const Y=null===(N=L.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===L?.code)L.resolver=new hi(F,O.aq(F,L));else if(Y){const Ee=lr(L),nt=L;Ee&&(nt.credential=Ee,nt.tenantId=Y.tenantId||void 0,nt.email=Y.email||void 0,nt.phoneNumber=Y.phoneNumber||void 0)}}(F,N),N}).then(N=>{const Ee=N.user;return{operationType:N.operationType,credential:Qr(N),additionalUserInfo:O.ao(N),user:Bt.getOrCreate(Ee)}})}function Di(F,L){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,f.Z)(function*(F,L){const N=yield L;return{verificationId:N.verificationId,confirm:Y=>Kt(F,N.confirm(Y))}})).apply(this,arguments)}class hi{constructor(L,N){this.resolver=N,this.auth=function Pn(F){return F.wrapped()}(L)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(L){return Kt(Mr(this.auth),this.resolver.resolveSignIn(L))}}class Bt{constructor(L){this._delegate=L,this.multiFactor=O.ar(L)}static getOrCreate(L){return Bt.USER_MAP.has(L)||Bt.USER_MAP.set(L,new Bt(L)),Bt.USER_MAP.get(L)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(L){return this._delegate.getIdTokenResult(L)}getIdToken(L){return this._delegate.getIdToken(L)}linkAndRetrieveDataWithCredential(L){return this.linkWithCredential(L)}linkWithCredential(L){var N=this;return(0,f.Z)(function*(){return Kt(N.auth,O.a0(N._delegate,L))})()}linkWithPhoneNumber(L,N){var Y=this;return(0,f.Z)(function*(){return Di(Y.auth,O.l(Y._delegate,L,N))})()}linkWithPopup(L){var N=this;return(0,f.Z)(function*(){return Kt(N.auth,O.d(N._delegate,L,qn))})()}linkWithRedirect(L){var N=this;return(0,f.Z)(function*(){return yield Yr(O.aH(N.auth)),O.g(N._delegate,L,qn)})()}reauthenticateAndRetrieveDataWithCredential(L){return this.reauthenticateWithCredential(L)}reauthenticateWithCredential(L){var N=this;return(0,f.Z)(function*(){return Kt(N.auth,O.a1(N._delegate,L))})()}reauthenticateWithPhoneNumber(L,N){return Di(this.auth,O.r(this._delegate,L,N))}reauthenticateWithPopup(L){return Kt(this.auth,O.e(this._delegate,L,qn))}reauthenticateWithRedirect(L){var N=this;return(0,f.Z)(function*(){return yield Yr(O.aH(N.auth)),O.h(N._delegate,L,qn)})()}sendEmailVerification(L){return O.ae(this._delegate,L)}unlink(L){var N=this;return(0,f.Z)(function*(){return yield O.an(N._delegate,L),N})()}updateEmail(L){return O.aj(this._delegate,L)}updatePassword(L){return O.ak(this._delegate,L)}updatePhoneNumber(L){return O.u(this._delegate,L)}updateProfile(L){return O.ai(this._delegate,L)}verifyBeforeUpdateEmail(L,N){return O.af(this._delegate,L,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bt.USER_MAP=new WeakMap;const Kn=O.aA;let kn=(()=>{class F{constructor(N,Y){if(this.app=N,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ee}=N.options;Kn(Ee,"invalid-api-key",{appName:N.name}),Kn(Ee,"invalid-api-key",{appName:N.name});const nt=typeof window<"u"?qn:void 0;this._delegate=Y.initialize({options:{persistence:Zn(Ee,N.name),popupRedirectResolver:nt}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,Y){O.I(this._delegate,N,Y)}applyActionCode(N){return O.a5(this._delegate,N)}checkActionCode(N){return O.a6(this._delegate,N)}confirmPasswordReset(N,Y){return O.a4(this._delegate,N,Y)}createUserWithEmailAndPassword(N,Y){var Ee=this;return(0,f.Z)(function*(){return Kt(Ee._delegate,O.a8(Ee._delegate,N,Y))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return O.ad(this._delegate,N)}isSignInWithEmailLink(N){return O.ab(this._delegate,N)}getRedirectResult(){var N=this;return(0,f.Z)(function*(){Kn(di(),N._delegate,"operation-not-supported-in-this-environment");const Y=yield O.j(N._delegate,qn);return Y?Kt(N._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function Ue(F,L){(0,O.aH)(F)._logFramework(L)}(this._delegate,N)}onAuthStateChanged(N,Y,Ee){const{next:nt,error:Rt,complete:Tt}=Nr(N,Y,Ee);return this._delegate.onAuthStateChanged(nt,Rt,Tt)}onIdTokenChanged(N,Y,Ee){const{next:nt,error:Rt,complete:Tt}=Nr(N,Y,Ee);return this._delegate.onIdTokenChanged(nt,Rt,Tt)}sendSignInLinkToEmail(N,Y){return O.aa(this._delegate,N,Y)}sendPasswordResetEmail(N,Y){return O.a3(this._delegate,N,Y||void 0)}setPersistence(N){var Y=this;return(0,f.Z)(function*(){let Ee;switch(function Hr(F,L){os(Object.values(Un).includes(L),F,"invalid-persistence-type"),(0,ne.b$)()?os(L!==Un.SESSION,F,"unsupported-persistence-type"):(0,ne.UG)()?os(L===Un.NONE,F,"unsupported-persistence-type"):zn()?os(L===Un.NONE||L===Un.LOCAL&&(0,ne.hl)(),F,"unsupported-persistence-type"):os(L===Un.NONE||xr(),F,"unsupported-persistence-type")}(Y._delegate,N),N){case Un.SESSION:Ee=O.a;break;case Un.LOCAL:Ee=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case Un.NONE:Ee=O.N;break;default:return O.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(Ee)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return Kt(this._delegate,O._(this._delegate))}signInWithCredential(N){return Kt(this._delegate,O.$(this._delegate,N))}signInWithCustomToken(N){return Kt(this._delegate,O.a2(this._delegate,N))}signInWithEmailAndPassword(N,Y){return Kt(this._delegate,O.a9(this._delegate,N,Y))}signInWithEmailLink(N,Y){return Kt(this._delegate,O.ac(this._delegate,N,Y))}signInWithPhoneNumber(N,Y){return Di(this._delegate,O.s(this._delegate,N,Y))}signInWithPopup(N){var Y=this;return(0,f.Z)(function*(){return Kn(di(),Y._delegate,"operation-not-supported-in-this-environment"),Kt(Y._delegate,O.c(Y._delegate,N,qn))})()}signInWithRedirect(N){var Y=this;return(0,f.Z)(function*(){return Kn(di(),Y._delegate,"operation-not-supported-in-this-environment"),yield Yr(Y._delegate),O.f(Y._delegate,N,qn)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return O.a7(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=Un,F})();function Nr(F,L,N){let Y=F;"function"!=typeof F&&({next:Y,error:L,complete:N}=F);const Ee=Y;return{next:Rt=>Ee(Rt&&Bt.getOrCreate(Rt)),error:L,complete:N}}function Zn(F,L){const N=function qt(F,L){const N=ht();if(!N)return[];const Y=O.aD(Wn,F,L);switch(N.getItem(Y)){case Un.NONE:return[O.N];case Un.LOCAL:return[O.i,O.a];case Un.SESSION:return[O.a];default:return[]}}(F,L);if(typeof self<"u"&&!N.includes(O.i)&&N.push(O.i),typeof window<"u")for(const Y of[O.b,O.a])N.includes(Y)||N.push(Y);return N.includes(O.N)||N.push(O.N),N}class Xr{constructor(){this.providerId="phone",this._delegate=new O.P(Mr(G.Z.auth()))}static credential(L,N){return O.P.credential(L,N)}verifyPhoneNumber(L,N){return this._delegate.verifyPhoneNumber(L,N)}unwrap(){return this._delegate}}Xr.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Xr.PROVIDER_ID=O.P.PROVIDER_ID;const Gr=O.aA;class Jr{constructor(L,N,Y=G.Z.app()){var Ee;Gr(null===(Ee=Y.options)||void 0===Ee?void 0:Ee.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new O.R(L,N,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(F){F.INTERNAL.registerComponent(new we.wA("auth-compat",L=>{const N=L.getProvider("app-compat").getImmediate(),Y=L.getProvider("auth");return new kn(N,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:Xr,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:Jr,TwitterAuthProvider:O.Z,Auth:kn,AuthCredential:O.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}(G.Z)},5861:(It,Se,B)=>{function f(O,ne,oe,ae,we,me,ve){try{var K=O[me](ve),q=K.value}catch(te){return void oe(te)}K.done?ne(q):Promise.resolve(q).then(ae,we)}function G(O){return function(){var ne=this,oe=arguments;return new Promise(function(ae,we){var me=O.apply(ne,oe);function ve(q){f(me,ae,we,ve,K,"next",q)}function K(q){f(me,ae,we,ve,K,"throw",q)}ve(void 0)})}}B.d(Se,{Z:()=>G})}},It=>{It(It.s=2846)}]);